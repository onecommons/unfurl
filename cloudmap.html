<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cloud Maps &mdash; Unfurl Documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon32.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/design-tabs.js"></script>
        <script src="_static/custom.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command Line" href="cli.html" />
    <link rel="prev" title="Expression Functions" href="expressions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/unfurl_logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="solution-overview.html">Solution Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Unfurl Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="ensembles.html">Ensembles</a></li>
<li class="toctree-l1"><a class="reference internal" href="jobs.html">Jobs and Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="tosca.html">TOSCA</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsl.html">TOSCA as Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="toscaref.html">TOSCA Language Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="packages.html">Repositories and Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="secrets.html">Managing Secrets</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime.html">Runtime Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="configurators.html">Configurators</a></li>
<li class="toctree-l1"><a class="reference internal" href="configurators.html#installers">Installers</a></li>
<li class="toctree-l1"><a class="reference internal" href="configurators.html#id38">Artifacts</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing.html">Template Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="expressions.html">Expression Functions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Cloud Maps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#key-concepts">Key Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to">How To…</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#clone-from-a-cloud-map">Clone from a cloud map</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-a-cloud-map">Update a cloud map</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-a-repository-host-with-a-cloud-map">Update a repository host with a cloud map</a></li>
<li class="toctree-l3"><a class="reference internal" href="#syncing">Syncing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sync-instances-of-the-same-host">Sync instances of the same host</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#anatomy-of-a-cloud-map">Anatomy of a cloud map</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#git-repositories">Git Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="#notables">Notables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#artifacts">Artifacts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#future-directions">Future directions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="jsonschema.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog for Unfurl</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Unfurl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Cloud Maps</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/cloudmap.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cloud-maps">
<h1>Cloud Maps<a class="headerlink" href="#cloud-maps" title="Permalink to this headline"></a></h1>
<p>A cloud map is a YAML document that contains a catalog of git repositories and the software, services, and applications that can be built or deployed from them. A cloud map contains project metadata and other repository metadata such as mirrors and forks that are not stored in git repositories themselves.
What makes a cloud map more than just a simple catalog of repositories is that it uses TOSCA schemas to express the dependencies between artifacts and applications produced by the repositories.</p>
<p>Some of the ways Unfurl and Unfurl Cloud uses cloud maps:</p>
<ul class="simple">
<li><p>Unfurl can search a cloud map for blueprints to add to a project.</p></li>
<li><p>Unfurl’s UI server (and Unfurl Cloud) uses the cloud map to find compatible types and applications when building blueprints and deployments.</p></li>
<li><p>Unfurl uses a cloud map to synchronize project metadata and mirrors of git repositories with git hosting services including Gitlab, Unfurl Cloud or just local file directories.</p></li>
<li><p>Unfurl Cloud syncs its public <a class="reference external" href="https://unfurl.cloud/blueprints">catalog</a> of popular open-source applications to our public <a class="reference external" href="https://github.com/onecommons/cloudmap.git">cloud map</a> and hosts a <a class="reference external" href="https://unfurl.cloud/cloud">visualization</a> of it.</p></li>
</ul>
<section id="key-concepts">
<h2>Key Concepts<a class="headerlink" href="#key-concepts" title="Permalink to this headline"></a></h2>
<p>A “repository host” is a service that hosts git repositories. Three types of git hosting services are currently supported: “local”, “gitlab”, and “unfurl.cloud”. Local is just a local directory containing git repositories.</p>
<p>Cloud maps are stored in a separate git repository that Unfurl clones and manages. If one is not configured it defaults to <a class="reference external" href="https://github.com/onecommons/cloudmap.git">https://github.com/onecommons/cloudmap.git</a>.</p>
<p>Unfurl maintains branches in the cloud map repository that reflect the current state of each repository host. When synchronizing a repositories host with the cloud map merges  its branch with the main branch.</p>
</section>
<section id="how-to">
<h2>How To…<a class="headerlink" href="#how-to" title="Permalink to this headline"></a></h2>
<section id="clone-from-a-cloud-map">
<h3>Clone from a cloud map<a class="headerlink" href="#clone-from-a-cloud-map" title="Permalink to this headline"></a></h3>
<p>When using the <a class="reference external" href="cli.html#unfurl-clone">unfurl clone</a> command, you can clone from the project’s default cloud map by using an URL of the form <code class="docutils literal notranslate"><span class="pre">cloudmap:&lt;package_id&gt;</span></code> as the <code class="docutils literal notranslate"><span class="pre">SOURCE</span></code> argument.
Unfurl will then search the cloud map for a repository whose key matches <code class="docutils literal notranslate"><span class="pre">&lt;package_id&gt;</span></code>.</p>
</section>
<section id="update-a-cloud-map">
<h3>Update a cloud map<a class="headerlink" href="#update-a-cloud-map" title="Permalink to this headline"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">unfurl</span> <span class="pre">cloudmap</span> <span class="pre">--import</span> <span class="pre">HOST</span></code> will update the cloudmap with latest from the given repository host.  <code class="docutils literal notranslate"><span class="pre">HOST</span></code> can be url, the name of the host (as declared in the <a class="reference internal" href="#configuration"><span class="std std-ref">cloudmaps/hosts</span></a> section of the project’s default environment), or “local” to update from the local files system.</p>
<p>For example, this command will update the cloudmap with metadata from local clones of git repositories:</p>
<p><code class="docutils literal notranslate"><span class="pre">unfurl</span> <span class="pre">cloudmap</span> <span class="pre">--import</span> <span class="pre">local</span> <span class="pre">--clone-root</span> <span class="pre">../my-repos</span></code></p>
<p>where <code class="docutils literal notranslate"><span class="pre">../my-repos</span></code> is the path to a directory containing one or more git repositories.</p>
<p>If repository host is remote, the import option will also pull the latest upstream changes into local git clones if the <code class="docutils literal notranslate"><span class="pre">clone_root</span></code> option is specified.</p>
<p>Import updates the cloudmap in a local branch, so you have manually merge those changed upstream if desired or use the <code class="docutils literal notranslate"><span class="pre">--sync</span></code> option described below.</p>
</section>
<section id="update-a-repository-host-with-a-cloud-map">
<h3>Update a repository host with a cloud map<a class="headerlink" href="#update-a-repository-host-with-a-cloud-map" title="Permalink to this headline"></a></h3>
<p>You can update a gitlab or unfurl cloud instance with latest in the cloud map using the <code class="docutils literal notranslate"><span class="pre">--export</span></code> option of the <a class="reference external" href="cli.html#unfurl-cloudmap">unfurl cloudmap</a> command.</p>
<p>For each matching repository in the cloudmap, a new project will be created if missing or existing project metadata will be updated. Then local git clones of the projects will be use to merge and push git changes to the host. The <code class="docutils literal notranslate"><span class="pre">--force</span></code> flag can be used to force push changes instead of merging.</p>
<p>For example: <code class="docutils literal notranslate"><span class="pre">unfurl</span> <span class="pre">cloudmap</span> <span class="pre">--export</span> <span class="pre">my_gitlab</span> <span class="pre">--namespace</span> <span class="pre">my_group</span></code></p>
</section>
<section id="syncing">
<h3>Syncing<a class="headerlink" href="#syncing" title="Permalink to this headline"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">--sync</span></code> option of the <a class="reference external" href="cli.html#unfurl-cloudmap">unfurl cloudmap</a> command synchronizes the cloud map with the given the repository host.  It imports the latest changes from the host, merges those changes into the main branch of the cloud map, and then exports the cloud map back to the host. The specific steps taken are as follows:</p>
<ol class="arabic simple">
<li><p>Update a branch named “hosts/{host_name}/{namespace}” with the latest from the repository host.</p></li>
<li><p>Merge the host branch into “main”.  If a conflict is detected, the command abort with a merge error in the cloud map repository.</p></li>
</ol>
<p>For example, if a repository branch or tags was changed in both branches there will be a merge conflict. If so, manually merge the changes in the local git clones (they will be recorded on the remote branch), sync them with the cloud map, then re-run this command.</p>
<ol class="arabic simple" start="3">
<li><p>Update the repository host with any changes it needs to match the cloud map.</p></li>
</ol>
<p>The user is responsible for pushing any changes to the upstream cloud map repository, for example:</p>
<p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">cloudmap;</span> <span class="pre">git</span> <span class="pre">--push</span> <span class="pre">origin</span> <span class="pre">main</span></code></p>
</section>
<section id="sync-instances-of-the-same-host">
<h3>Sync instances of the same host<a class="headerlink" href="#sync-instances-of-the-same-host" title="Permalink to this headline"></a></h3>
<p>If you are self-hosting a repository host you may have multiple physical instances of the same logical repository host, for example, staging and production instances.</p>
<p>You can use the cloudmap to synchronize their contents by setting the <code class="docutils literal notranslate"><span class="pre">canonical_url</span></code> key in the repository host’s configuration. In the following example, given the <code class="docutils literal notranslate"><span class="pre">hosts</span></code> configuration in the section below, the following commands will push all the projects in “onecommons/blueprints” namespace from the staging instance to the production instance:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># first sync latest on staging with the cloud map</span>
unfurl<span class="w"> </span>cloudmap<span class="w"> </span>--sync<span class="w"> </span>staging<span class="w"> </span>--namespace<span class="w"> </span>onecommons/blueprints

<span class="c1"># now sync the cloud map with production</span>
unfurl<span class="w"> </span>cloudmap<span class="w"> </span>--sync<span class="w"> </span>production<span class="w"> </span>--namespace<span class="w"> </span>onecommons/blueprints
</pre></div>
</div>
<p>In addition to updating those instances, the repository will have branches for each repository host recording their last known state and the main branch will have the latest from both staging and production. This way the main branch serves as the “source of truth”.</p>
</section>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline"></a></h2>
<p>You can configure the cloud map location and repository hosts used for synchronize in the environments section of <code class="docutils literal notranslate"><span class="pre">unfurl.yaml</span></code>.  This configuration sample illustrates the available options:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">environments</span><span class="p">:</span>
<span class="w">  </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cloudmaps</span><span class="p">:</span>
<span class="w">      </span><span class="nt">repositories</span><span class="p">:</span><span class="w">  </span><span class="c1"># location of the cloud map files</span>
<span class="w">        </span><span class="c1"># the default cloudmap to use if cloudmap name is omitted</span>
<span class="w">        </span><span class="nt">cloudmap</span><span class="p">:</span>
<span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file:../my_cloudmap</span><span class="w">  </span><span class="c1"># cloudmap git repository</span>
<span class="w">          </span><span class="nt">clone_root</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">../repos</span><span class="w">  </span><span class="c1"># optional, --clone-root option overrides this</span>
<span class="w">      </span><span class="nt">hosts</span><span class="p">:</span><span class="w">  </span><span class="c1"># repository hosts to synchronize with</span>
<span class="w">        </span><span class="nt">staging</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unfurl.cloud</span>
<span class="w">            </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://staging.unfurl.cloud/onecommons/</span>
<span class="w">            </span><span class="nt">canonical_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://unfurl.cloud</span><span class="w">  </span><span class="c1"># optional</span>
<span class="w">        </span><span class="nt">production</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unfurl.cloud</span>
<span class="w">            </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://unfurl.cloud/onecommons/</span>
<span class="w">            </span><span class="c1"># limit to projects with this visibility:</span>
<span class="w">            </span><span class="nt">visibility</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">public</span><span class="w">  </span><span class="c1"># optional, --visibility option overrides this</span>
</pre></div>
</div>
</section>
<section id="anatomy-of-a-cloud-map">
<h2>Anatomy of a cloud map<a class="headerlink" href="#anatomy-of-a-cloud-map" title="Permalink to this headline"></a></h2>
<p>If you take a look at a <a class="reference internal" href="jsonschema.html#cloudmap-yaml"><span class="std std-ref">cloudmap.yaml</span></a> file, you’ll find YAML that looks like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">repositories</span><span class="p">:</span>
<span class="w">  </span><span class="nt">unfurl.cloud/onecommons/blueprints/mediawiki</span><span class="p">:</span>
<span class="w">    </span><span class="nt">git</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unfurl.cloud/onecommons/blueprints/mediawiki.git</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">onecommons/blueprints/mediawiki</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MediaWiki</span>
<span class="w">    </span><span class="nt">protocols</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh</span>
<span class="w">    </span><span class="nt">internal_id</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;35&#39;</span>
<span class="w">    </span><span class="nt">project_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://unfurl.cloud/onecommons/blueprints/mediawiki</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MediaWiki is free and open-source wiki software used in Wikipedia,</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">Wiktionary, and many other online encyclopedias.</span>
<span class="w">      </span><span class="nt">issues_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://unfurl.cloud/onecommons/blueprints/mediawiki/-/issues</span>
<span class="w">      </span><span class="nt">homepage_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://unfurl.cloud/onecommons/blueprints/mediawiki</span>
<span class="w">    </span><span class="nt">default_branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">      </span><span class="nt">main</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0fc60cb3afd06ae2c4abe038007e9ff4db398662</span>
<span class="w">    </span><span class="nt">tags</span><span class="p">:</span>
<span class="w">      </span><span class="nt">v1.0.0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0fc60cb3afd06ae2c4abe038007e9ff4db398662</span>
<span class="w">      </span><span class="nt">v0.1.0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">225932bc2a45473d682e48f272bc48fcd83909bb</span>
<span class="w">    </span><span class="nt">notable</span><span class="p">:</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">ensemble-template.yaml#spec/service_template</span><span class="p p-Indicator">:</span>
<span class="w">        </span><span class="nt">artifact_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">artifact.tosca.ServiceTemplate</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mediawiki</span>
<span class="w">        </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MediaWiki is free and open-source wiki software used in Wikipedia,</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">Wiktionary, and many other online encyclopedias.</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mediawiki@unfurl.cloud/onecommons/blueprints/mediawiki</span>
<span class="w">          </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mediawiki</span>
<span class="w">          </span><span class="nt">extends</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mediawiki@unfurl.cloud/onecommons/blueprints/mediawiki</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SQLWebApp@unfurl.cloud/onecommons/std:generic_types</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WebApp@unfurl.cloud/onecommons/std:generic_types</span>
<span class="w">        </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MySQLDB@unfurl.cloud/onecommons/std:generic_types</span>
<span class="w">        </span><span class="nt">artifacts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker.io/bitnami/mediawiki</span>
<span class="nn">...</span>
<span class="nt">artifacts</span><span class="p">:</span>
<span class="w">  </span><span class="nt">docker.io/bitnami/mediawiki</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">artifacts.OCIImage</span>
</pre></div>
</div>
<p>The full <a class="reference internal" href="jsonschema.html#cloudmap-schema"><span class="std std-ref">json schema</span></a> can be found <a class="reference internal" href="jsonschema.html#cloudmap-schema"><span class="std std-ref">here</span></a> but key sections include:</p>
<section id="git-repositories">
<h3>Git Repositories<a class="headerlink" href="#git-repositories" title="Permalink to this headline"></a></h3>
<p>The bulk of a cloud map file is in the <code class="docutils literal notranslate"><span class="pre">repositories</span></code> section, which consists of map of git repositories where the key is a <a class="reference internal" href="packages.html#package-identifiers"><span class="std std-ref">package id</span></a> and includes project metadata and other repository metadata such as mirrors and forks that are not stored in git repositories themselves.</p>
</section>
<section id="notables">
<h3>Notables<a class="headerlink" href="#notables" title="Permalink to this headline"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">notable</span></code> section lists files and directories in the repository that are useful for characterizing the repository and integrating it with the other resources in the cloud map. Unfurl looks for files of interest when synchronizing repositories with the cloud map but entries can be also be added manually. Examples of notables would be a <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> for building container images or a <code class="docutils literal notranslate"><span class="pre">ensemble-template.yaml</span></code> that contains cloud blueprints for deploying.</p>
<p>As the example above shows, the notables for TOSCA service templates and Unfurl blueprint describe both the services they deploy and its dependencies, such as artifacts (e.g. container images) or other services (e.g. a database service) and use fully qualified identifiers with packages ids they can reference other repositories in the cloudmap.</p>
<p>This enables the cloudmap to used like a package manager to resolve the dependencies and components that are needed to be used to deploy an application.</p>
</section>
<section id="artifacts">
<h3>Artifacts<a class="headerlink" href="#artifacts" title="Permalink to this headline"></a></h3>
<p>Most code isn’t used directly, instead there is a build or packaging process to create the the artifact (for example, an executable binary, a software package, or a container image) that actually used when an application is deployed; the <code class="docutils literal notranslate"><span class="pre">artifacts</span></code> section of a cloud map lists artifacts.</p>
<p>Artifacts are declared separately from repositories because there isn’t necessarily a way to determine how artifacts are built, but that relationship can be expressed with the <code class="docutils literal notranslate"><span class="pre">builds</span></code> annotation in the <code class="docutils literal notranslate"><span class="pre">notable</span></code> section. In the future, the cloud map schema will be extended to better represent the build processes build artifacts from code in repositories.</p>
</section>
</section>
<section id="future-directions">
<h2>Future directions<a class="headerlink" href="#future-directions" title="Permalink to this headline"></a></h2>
<p>Could cloud maps evolve into a package manager for the cloud? See <a class="reference external" href="https://github.com/onecommons/cloudmap/blob/main/README.md">https://github.com/onecommons/cloudmap/blob/main/README.md</a> for more on our vision.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="expressions.html" class="btn btn-neutral float-left" title="Expression Functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cli.html" class="btn btn-neutral float-right" title="Command Line" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, OneCommons Co..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>