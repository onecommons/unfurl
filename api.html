<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Python API &mdash; Unfurl Documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon32.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/design-tabs.js"></script>
        <script src="_static/custom.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Changelog for Unfurl" href="CHANGELOG.html" />
    <link rel="prev" title="Glossary" href="glossary.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/unfurl_logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="solution-overview.html">Solution Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Unfurl Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="ensembles.html">Ensembles</a></li>
<li class="toctree-l1"><a class="reference internal" href="jobs.html">Jobs and Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="tosca.html">TOSCA</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsl.html">TOSCA as Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="toscaref.html">TOSCA Language Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="packages.html">Repositories and Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="secrets.html">Managing Secrets</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime.html">Runtime Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="configurators.html">Configurators</a></li>
<li class="toctree-l1"><a class="reference internal" href="configurators.html#installers">Installers</a></li>
<li class="toctree-l1"><a class="reference internal" href="configurators.html#configurators-artifacts">Artifacts</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing.html">Template Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="expressions.html">Expression Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloudmap.html">Cloud Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="jsonschema.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#api-for-writing-service-templates">API for writing service templates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tosca-types">TOSCA Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tosca-field-specifiers">TOSCA Field Specifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-tosca-objects">Other Tosca Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#property-constraints">Property Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-module-items">Other Module Items</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tosca.scalars">Scalars</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-unfurl.tosca_plugins.functions">Utility Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-unfurl.tosca_plugins.expr">Eval Expression Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api-for-writing-configurators">API for writing configurators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-unfurl.configurator">Configurators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-unfurl.projectpaths">Project folders</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-unfurl.runtime">Runtime module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#apis-for-controlling-unfurl">APIs for controlling Unfurl</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-unfurl.localenv">Localenv module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-unfurl.job">Job module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-unfurl.init">Init module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-unfurl.logs">Utility classes and functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-unfurl.eval">Eval Expression API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-unfurl.graphql">Graphql module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog for Unfurl</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Unfurl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Python API</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="python-api">
<h1><a class="toc-backref" href="#id3">Python API</a><a class="headerlink" href="#python-api" title="Permalink to this headline"></a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#python-api" id="id3">Python API</a></p>
<ul>
<li><p><a class="reference internal" href="#api-for-writing-service-templates" id="id4">API for writing service templates</a></p>
<ul>
<li><p><a class="reference internal" href="#tosca-types" id="id5">TOSCA Types</a></p></li>
<li><p><a class="reference internal" href="#tosca-field-specifiers" id="id6">TOSCA Field Specifiers</a></p></li>
<li><p><a class="reference internal" href="#other-tosca-objects" id="id7">Other Tosca Objects</a></p></li>
<li><p><a class="reference internal" href="#property-constraints" id="id8">Property Constraints</a></p></li>
<li><p><a class="reference internal" href="#other-module-items" id="id9">Other Module Items</a></p></li>
<li><p><a class="reference internal" href="#module-tosca.scalars" id="id10">Scalars</a></p></li>
<li><p><a class="reference internal" href="#module-unfurl.tosca_plugins.functions" id="id11">Utility Functions</a></p></li>
<li><p><a class="reference internal" href="#module-unfurl.tosca_plugins.expr" id="id12">Eval Expression Functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#api-for-writing-configurators" id="id13">API for writing configurators</a></p>
<ul>
<li><p><a class="reference internal" href="#module-unfurl.configurator" id="id14">Configurators</a></p></li>
<li><p><a class="reference internal" href="#module-unfurl.projectpaths" id="id15">Project folders</a></p></li>
<li><p><a class="reference internal" href="#module-unfurl.runtime" id="id16">Runtime module</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#apis-for-controlling-unfurl" id="id17">APIs for controlling Unfurl</a></p>
<ul>
<li><p><a class="reference internal" href="#module-unfurl.localenv" id="id18">Localenv module</a></p></li>
<li><p><a class="reference internal" href="#module-unfurl.job" id="id19">Job module</a></p></li>
<li><p><a class="reference internal" href="#module-unfurl.init" id="id20">Init module</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-unfurl.logs" id="id21">Utility classes and functions</a></p>
<ul>
<li><p><a class="reference internal" href="#module-unfurl.eval" id="id22">Eval Expression API</a></p></li>
<li><p><a class="reference internal" href="#module-unfurl.graphql" id="id23">Graphql module</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<section id="api-for-writing-service-templates">
<h2><a class="toc-backref" href="#id4">API for writing service templates</a><a class="headerlink" href="#api-for-writing-service-templates" title="Permalink to this headline"></a></h2>
<p>See <a class="reference internal" href="dsl.html"><span class="doc">here</span></a> for an overview of the TOSCA Python DSL.</p>
<section id="tosca-types">
<h3><a class="toc-backref" href="#id5">TOSCA Types</a><a class="headerlink" href="#tosca-types" title="Permalink to this headline"></a></h3>
<p>The classes in this section are used to define TOSCA types corresponding to a TOSCA template (such as a node template or relationship template), including:</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#tosca.Node" title="tosca.Node"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Node</span></code></a></p></td>
<td><p>A TOSCA node template.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tosca.Relationship" title="tosca.Relationship"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Relationship</span></code></a></p></td>
<td><p>A TOSCA relationship template.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tosca.CapabilityEntity" title="tosca.CapabilityEntity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CapabilityEntity</span></code></a></p></td>
<td><p>A TOSCA capability template.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tosca.DataEntity" title="tosca.DataEntity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataEntity</span></code></a></p></td>
<td><p>A complex TOSCA data type.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tosca.ArtifactEntity" title="tosca.ArtifactEntity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ArtifactEntity</span></code></a></p></td>
<td><p>A TOSCA artifact template.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tosca.Group" title="tosca.Group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Group</span></code></a></p></td>
<td><p>A TOSCA group template.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tosca.Policy" title="tosca.Policy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Policy</span></code></a></p></td>
<td><p>A TOSCA policy template.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="tosca.ToscaType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">ToscaType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType" title="Permalink to this definition"></a></dt>
<dd><p>Base class for TOSCA type definitions.</p>
<p>ToscaTypes are Python <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html">dataclasses</a> with custom <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html#dataclasses.field">fields</a> that
correspond to TOSCA’s field types including <a class="reference internal" href="#tosca.Property" title="tosca.Property"><code class="xref any py py-func docutils literal notranslate"><span class="pre">properties</span></code></a>, <a class="reference internal" href="#tosca.Requirement" title="tosca.Requirement"><code class="xref any py py-func docutils literal notranslate"><span class="pre">requirements</span></code></a>, <a class="reference internal" href="#tosca.Capability" title="tosca.Capability"><code class="xref any py py-func docutils literal notranslate"><span class="pre">capabilities</span></code></a>, and <a class="reference internal" href="#tosca.Artifact" title="tosca.Artifact"><code class="xref any py py-func docutils literal notranslate"><span class="pre">artifacts</span></code></a>. You don’t need to use Python’s dataclass decorators or functions directly.</p>
<p>Any public field (i.e. not starting with a “_”) will be included in the TOSCA YAML for the template, using the field’s type annotation to deduce which TOSCA (e.g. Nodes are treated as requirements, Artifacts are treated as artifacts, etc. defaulting to TOSCA properties). This can be customized using <a class="reference internal" href="#tosca-field-specifiers"><span class="std std-ref">TOSCA Field Specifiers</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Example</span><span class="p">(</span><span class="n">tosca</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Root</span><span class="p">):</span>
    <span class="c1"># Node type, so it&#39;s a TOSCA requirement</span>
    <span class="n">host</span><span class="p">:</span> <span class="n">tosca</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Compute</span>

    <span class="c1"># an artifact</span>
    <span class="n">shellScript</span><span class="p">:</span> <span class="n">tosca</span><span class="o">.</span><span class="n">artifacts</span><span class="o">.</span><span class="n">ImplementationBash</span>

    <span class="c1"># other types default to TOSCA properties</span>
    <span class="n">location</span><span class="p">:</span> <span class="nb">str</span>

    <span class="c1"># use the field specifies to customize</span>
    <span class="n">dns</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span><span class="n">constraints</span><span class="o">=</span><span class="p">[</span><span class="n">max_length</span><span class="p">(</span><span class="mi">20</span><span class="p">)],</span> <span class="n">options</span><span class="o">=</span><span class="n">sensitive</span><span class="p">)</span>

    <span class="c1"># ignored, starts with &quot;_&quot;</span>
    <span class="n">_internal</span><span class="p">:</span> <span class="nb">str</span>
</pre></div>
</div>
<p>When your Python code is first executed, e.g. when it is imported into a TOSCA service template, it executes in <a class="reference internal" href="#tosca.global_state_mode" title="tosca.global_state_mode"><code class="xref any py py-func docutils literal notranslate"><span class="pre">&quot;parse&quot;</span> <span class="pre">mode</span></code></a>, to prepare the object so it can be translated to TOSCA YAML.</p>
<p>In parse mode, user code accessing TOSCA fields may appear to return concrete values but actually (thanks to <a class="reference external" href="https://en.wikipedia.org/wiki/Type_punning">type punning</a>) they are returning <a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><code class="xref any py py-class docutils literal notranslate"><span class="pre">FieldProjection</span></code></a> object that are used to record the relationships needed to generate the TOSCA YAML consumed by the orchestrator.</p>
<p>When the orchestrator is executing methods defined on ToscaType objects invoked when running TOSCA operations, through <a class="reference internal" href="#tosca.Computed" title="tosca.Computed"><code class="xref any py py-func docutils literal notranslate"><span class="pre">tosca.Computed</span></code></a> properties, and via the <a class="reference internal" href="runtime.html#job-variables"><span class="std std-ref">Self</span></a> variable in Jinja2 templates. In that context the <a class="reference internal" href="#tosca.global_state_mode" title="tosca.global_state_mode"><code class="xref any py py-func docutils literal notranslate"><span class="pre">global_state_mode</span></code></a> will be set to “runtime” mode. In runtime mode, the object proxies the instance created from the TOSCA template – the values of its TOSCA fields will be corresponding the values on the instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_name</strong> (<em>str</em>) – </p></li>
<li><p><strong>_metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="tosca.ToscaType._template_init">
<span class="sig-name descname"><span class="pre">_template_init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType._template_init" title="Permalink to this definition"></a></dt>
<dd><p>User-defined callback invoked when the template object is initialized. Define this method in your subclass in lieu of <code class="docutils literal notranslate"><span class="pre">__init__</span></code> or <code class="docutils literal notranslate"><span class="pre">__post_init__</span></code>.
Compared to <a class="reference internal" href="#tosca.ToscaType._class_init" title="tosca.ToscaType._class_init"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">_class_init</span></code></a>, it is invoked for each template instead of during class definition.</p>
<p>You can set the default value of fields in your class definition to <code class="docutils literal notranslate"><span class="pre">DEFAULT</span></code> to indicate they will be assigned a value in the <code class="docutils literal notranslate"><span class="pre">_template_init</span></code> method. If they are not set in <code class="docutils literal notranslate"><span class="pre">_template_init</span></code>, they will be set to their default value automatically.</p>
<p>You can check if a field has its default value by calling <a class="reference internal" href="#tosca.ToscaType.has_default" title="tosca.ToscaType.has_default"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">has_default</span></code></a>
(e.g. if the field wasn’t specified as keyword argument when creating the template).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Example</span><span class="p">(</span><span class="n">tosca</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Root</span><span class="p">):</span>
    <span class="c1"># DEFAULT will create new object per instance (here a Compute node template).</span>
    <span class="c1"># A runtime error will be raised if the type can&#39;t be created with default values.</span>
    <span class="n">host</span><span class="p">:</span> <span class="n">tosca</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Compute</span> <span class="o">=</span> <span class="n">tosca</span><span class="o">.</span><span class="n">DEFAULT</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_template_init</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">(</span><span class="s2">&quot;host&quot;</span><span class="p">):</span>
          <span class="c1"># only set if the template didn&#39;t specify a host when it was created</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">tosca</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Compute</span><span class="p">(</span><span class="n">mem_size</span><span class="o">=</span><span class="mi">4</span> <span class="o">*</span> <span class="n">GB</span><span class="p">)</span>

        <span class="c1"># or (better, enables static type checking that the field has been declared):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">host</span><span class="p">):</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">tosca</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Compute</span><span class="p">(</span><span class="n">mem_size</span><span class="o">=</span><span class="mi">4</span> <span class="o">*</span> <span class="n">GB</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.ToscaType._class_init">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_class_init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType._class_init" title="Permalink to this definition"></a></dt>
<dd><p>A user-defined class method that is called when the class definition is being initialized, specifically before Python’s <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html">dataclass</a>  machinery is invoked. Define this method in a subclass if you want to customize your class definition.</p>
<p>Inside this method referencing a class fields will return a <a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><code class="xref any py py-class docutils literal notranslate"><span class="pre">FieldProjection</span></code></a> but this is hidden from the static type checker and IDE through <a class="reference external" href="https://en.wikipedia.org/wiki/Type_punning">type punning</a>.</p>
<p>You can set the default value of fields in your class definition to <code class="docutils literal notranslate"><span class="pre">CONSTRAINED</span></code> to indicate they will be configured in your <code class="docutils literal notranslate"><span class="pre">_class_init</span></code> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Example</span><span class="p">(</span><span class="n">tosca</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Root</span><span class="p">):</span>

    <span class="c1"># set default to CONSTRAINED to indicate a value will be assigned in _class_init</span>
    <span class="n">host</span><span class="p">:</span> <span class="n">tosca</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Compute</span> <span class="o">=</span> <span class="n">tosca</span><span class="o">.</span><span class="n">CONSTRAINED</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_class_init</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># the proxy node template created here will be shared by all instances of Example unless one sets its own.</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">tosca</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Compute</span><span class="p">()</span>

        <span class="c1"># Constrain the memory size of the host compute.</span>
        <span class="c1"># this will apply to all instances even if one sets its own Compute instance.</span>
        <span class="c1"># (The generated YAML for the host requirement on this node type will include a node_filter with an in_range property constraint).</span>
        <span class="n">in_range</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">gb</span><span class="p">,</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">gb</span><span class="p">)</span><span class="o">.</span><span class="n">apply_constraint</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">host</span><span class="o">.</span><span class="n">mem_size</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.ToscaType.__getattribute__">
<span class="sig-name descname"><span class="pre">__getattribute__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType.__getattribute__" title="Permalink to this definition"></a></dt>
<dd><p>Customizes attribute access. In parse mode, accessing a attribute that is a TOSCA field will return a <a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><code class="xref any py py-class docutils literal notranslate"><span class="pre">FieldProjection</span></code></a> instead of its value if any of the following are true:</p>
<ul class="simple">
<li><p>the field hasn’t been initialized yet (e.g. its value is <code class="docutils literal notranslate"><span class="pre">DEFAULT</span></code>, <code class="docutils literal notranslate"><span class="pre">REQUIRED</span></code>, or <code class="docutils literal notranslate"><span class="pre">CONSTRAINED</span></code>)</p></li>
<li><p>the field is a TOSCA <a class="reference internal" href="#tosca.Attribute" title="tosca.Attribute"><code class="xref any py py-func docutils literal notranslate"><span class="pre">Attribute</span></code></a> (as their values are set at runtime)</p></li>
<li><p>the value is <a class="reference internal" href="#tosca.EvalData" title="tosca.EvalData"><code class="xref any py py-class docutils literal notranslate"><span class="pre">EvalData</span></code></a></p></li>
<li><p>the value is a <a class="reference internal" href="#tosca.ToscaType" title="tosca.ToscaType"><code class="xref any py py-class docutils literal notranslate"><span class="pre">ToscaType</span></code></a> object set directly on the class the definition.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.ToscaType.find_configured_by">
<span class="sig-name descname"><span class="pre">find_configured_by</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><span class="pre">FieldProjection</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType.find_configured_by" title="Permalink to this definition"></a></dt>
<dd><p>Transitively search for <code class="docutils literal notranslate"><span class="pre">field_name</span></code> along the <code class="docutils literal notranslate"><span class="pre">.configured_by</span></code> axis (see <a class="reference internal" href="expressions.html#special-keys"><span class="std std-ref">Special keys</span></a>) and return the first match.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
  <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
  <span class="n">url</span><span class="p">:</span> <span class="nb">str</span>
  <span class="n">connects_to</span><span class="p">:</span> <span class="n">A</span> <span class="o">=</span> <span class="n">tosca</span><span class="o">.</span><span class="n">Requirement</span><span class="p">(</span><span class="n">relationship</span><span class="o">=</span><span class="n">unfurl</span><span class="o">.</span><span class="n">relationships</span><span class="o">.</span><span class="n">Configures</span><span class="p">)</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">(</span><span class="n">connects_to</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://example.com&quot;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">find_configured_by</span><span class="p">(</span><span class="n">B</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
<span class="s2">&quot;https://example.com&quot;</span>
</pre></div>
</div>
<p>If called during class definition this will return an eval expression.
If called as a classmethod or as a free function it will evaluate in the current context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>field_name</strong> (<em>str</em><em> | </em><a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><em>FieldProjection</em></a>) – Either the name of the field, or for a more type safety, a reference to the field (e.g. <code class="docutils literal notranslate"><span class="pre">B.url</span></code> in the example above).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The value of the referenced field</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.ToscaType.find_hosted_on">
<span class="sig-name descname"><span class="pre">find_hosted_on</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><span class="pre">FieldProjection</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType.find_hosted_on" title="Permalink to this definition"></a></dt>
<dd><p>Transitively search for <code class="docutils literal notranslate"><span class="pre">field_name</span></code> along the <code class="docutils literal notranslate"><span class="pre">.hosted_on</span></code> axis (see <a class="reference internal" href="expressions.html#special-keys"><span class="std std-ref">Special keys</span></a>) and return the first match.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
  <span class="n">url</span><span class="p">:</span> <span class="nb">str</span>

<span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
  <span class="n">host</span><span class="p">:</span> <span class="n">A</span> <span class="o">=</span> <span class="n">tosca</span><span class="o">.</span><span class="n">Requirement</span><span class="p">(</span><span class="n">relationship</span><span class="o">=</span><span class="n">tosca</span><span class="o">.</span><span class="n">relationships</span><span class="o">.</span><span class="n">HostedOn</span><span class="p">)</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://example.com&quot;</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">a</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">find_hosted_on</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
<span class="s2">&quot;https://example.com&quot;</span>
</pre></div>
</div>
<p>If called during class definition this will return an eval expression.
If called as a classmethod or as a free function it will evaluate in the current context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>field_name</strong> (<em>str</em><em> | </em><a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><em>FieldProjection</em></a>) – Either the name of the field, or for a more type safety, a reference to the field (e.g. <code class="docutils literal notranslate"><span class="pre">A.url</span></code> in the example above).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The value of the referenced field</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.ToscaType.from_owner">
<span class="sig-name descname"><span class="pre">from_owner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><span class="pre">FieldProjection</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType.from_owner" title="Permalink to this definition"></a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">field_name</span></code> on the <code class="docutils literal notranslate"><span class="pre">.owner</span></code> of the template (see <a class="reference internal" href="expressions.html#special-keys"><span class="std std-ref">Special keys</span></a>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
  <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
  <span class="n">my_artifact</span><span class="p">:</span> <span class="n">MyArtifact</span> <span class="o">=</span> <span class="n">MyArtifact</span><span class="p">(</span><span class="n">app_name</span><span class="o">=</span><span class="n">from_owner</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)))</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">App</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">a</span><span class="o">.</span><span class="n">my_artifact</span><span class="o">.</span><span class="n">app_name</span> <span class="o">==</span> <span class="n">a</span><span class="o">.</span><span class="n">name</span>
<span class="c1"># also available as a method:</span>
<span class="k">assert</span> <span class="n">a</span><span class="o">.</span><span class="n">my_artifact</span><span class="o">.</span><span class="n">from_owner</span><span class="p">(</span><span class="n">App</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="n">a</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p>If called during class definition this will return an eval expression.
If called as a classmethod or as a free function it will use the current context’s instance.
If the template instance is an embedded template (an artifact, a relationship, a data entity, or a capability),
the field will be evaluated on the node template the template is embedded in, otherwise it will be evaluated on the template itself.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>field_name</strong> (<em>str</em><em> | </em><a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><em>FieldProjection</em></a>) – Either the name of the field, or for a more type safety, a reference to the field (e.g. <code class="docutils literal notranslate"><span class="pre">A.url</span></code> in the example above).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The value of the referenced field</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.ToscaType.get_ref">
<span class="sig-name descname"><span class="pre">get_ref</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType.get_ref" title="Permalink to this definition"></a></dt>
<dd><p>Return a reference to a field. Raises <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> if the field doesn’t exist and <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> if the FieldProjection is for a different class than <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ref</strong> (<em>str</em><em> | </em><a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><em>FieldProjection</em></a>) – Either the name of the field, or, for more type safety, a reference to the field (e.g. <code class="docutils literal notranslate"><span class="pre">MyType.my_prop</span></code>).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>FieldProjection</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#tosca.FieldProjection" title="tosca._tosca.FieldProjection">tosca._tosca.FieldProjection</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.ToscaType.has_default">
<span class="sig-name descname"><span class="pre">has_default</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType.has_default" title="Permalink to this definition"></a></dt>
<dd><p>Return True if the attribute has its default value from the class definition or hasn’t been set at all.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ref</strong> (<em>str</em><em> | </em><a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><em>FieldProjection</em></a>) – Either the name of the field, or, for more type safety, a reference to the field (e.g. <code class="docutils literal notranslate"><span class="pre">MyType.my_prop</span></code>).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.ToscaType.patch">
<span class="sig-name descname"><span class="pre">patch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">patch</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType.patch" title="Permalink to this definition"></a></dt>
<dd><p>Update this template with the given <a class="reference internal" href="dsl.html#template-customization-and-patching"><span class="std std-ref">patch object</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>patch</strong> (<em>Self</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.ToscaType.set_to_property_source">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_to_property_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">requirement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">property</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType.set_to_property_source" title="Permalink to this definition"></a></dt>
<dd><p>Sets the given requirement to the TOSCA template that provided the value of “property”.</p>
<p>For example, if <code class="docutils literal notranslate"><span class="pre">A.property</span> <span class="pre">=</span> <span class="pre">B.property</span></code>
then <code class="docutils literal notranslate"><span class="pre">A.set_to_property_source(&quot;requirement&quot;,</span> <span class="pre">&quot;property&quot;)</span></code>
will create a node filter for <code class="docutils literal notranslate"><span class="pre">A.requirement</span></code> that selects <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p>
<p>The requirement and property have to be defined on the same class.
The method should be called from <code class="docutils literal notranslate"><span class="pre">_class_init(cls)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>requirement</strong> (<a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><em>FieldProjection</em></a><em> or </em><em>str</em>) – name of the requirement field</p></li>
<li><p><strong>property</strong> (<a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><em>FieldProjection</em></a><em> or </em><em>str</em>) – name of the property field</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – If <code class="docutils literal notranslate"><span class="pre">requirement</span></code> or <code class="docutils literal notranslate"><span class="pre">property</span></code> are missing from <code class="docutils literal notranslate"><span class="pre">cls</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p>The requirement and property names can also be strings, e.g.:</p>
<p><code class="docutils literal notranslate"><span class="pre">cls.set_to_property_source(&quot;requirement&quot;,</span> <span class="pre">&quot;property&quot;)</span></code></p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">cls.set_to_property_source(cls.requirement,</span> <span class="pre">cls.property)</span></code></p>
<p>is equivalent to:</p>
<p><code class="docutils literal notranslate"><span class="pre">cls.requirement</span> <span class="pre">=</span> <span class="pre">cls.property</span></code>  if called within <code class="docutils literal notranslate"><span class="pre">_class_init(cls)</span></code>,</p>
<p>but using this method will avoid static type checker complaints.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.ToscaType.set_operation">
<span class="sig-name descname"><span class="pre">set_operation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">op</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType.set_operation" title="Permalink to this definition"></a></dt>
<dd><p>Assign the given <a class="reference internal" href="glossary.html#operation"><span class="std std-ref">TOSCA operation</span></a> to this TOSCA object.
TOSCA allows operations to be defined directly on templates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>op</strong> (<em>Callable</em><em>[</em><em>[</em><em>Concatenate</em><em>[</em><em>Self</em><em>, </em><em>...</em><em>]</em><em>]</em><em>, </em><em>Any</em><em>]</em>) – A function implements the operation. It should looks like a method, i.e. accepts <code class="docutils literal notranslate"><span class="pre">Self</span></code> as the first argument.
Using the <a class="reference internal" href="#tosca.operation" title="tosca.operation"><code class="xref any py py-func docutils literal notranslate"><span class="pre">tosca.operation</span></code></a> function decorator is recommended but not required.</p></li>
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>str</em><em>, </em><em>Callable</em><em>[</em><em>[</em><em>Concatenate</em><em>[</em><em>Self</em><em>, </em><em>...</em><em>]</em><em>]</em><em>, </em><em>Any</em><em>]</em><em>]</em><em>]</em>) – The TOSCA operation name. If omitted, <code class="docutils literal notranslate"><span class="pre">op</span></code>’s <a class="reference internal" href="#tosca.operation" title="tosca.operation"><code class="xref py py-func docutils literal notranslate"><span class="pre">operation_name</span></code></a> or the op’s function name is used.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Self</em></p>
</dd>
</dl>
<p>Returns Self to allow chaining.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.ToscaType.set_inputs">
<span class="sig-name descname"><span class="pre">set_inputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType.set_inputs" title="Permalink to this definition"></a></dt>
<dd><p>Set the inputs for the current operation.
Call this inside of an operation method if the operations inputs need to be set at runtime time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<a class="reference internal" href="#tosca.ToscaInputs" title="tosca._tosca.ToscaInputs"><em>tosca._tosca.ToscaInputs</em></a>) – </p></li>
<li><p><strong>kw</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.ToscaType.clear_inputs">
<span class="sig-name descname"><span class="pre">clear_inputs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ToscaType.clear_inputs" title="Permalink to this definition"></a></dt>
<dd><p>Clear the inputs for the current operation.</p>
<p>Returns the inputs that were set before clearing them.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Optional</em>[<em>Dict</em>[str, <em>Any</em>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.Node">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_directives=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_node_filter=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Node" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#tosca.ToscaType" title="tosca._tosca.ToscaType"><code class="xref py py-class docutils literal notranslate"><span class="pre">tosca._tosca.ToscaType</span></code></a></p>
<p>A TOSCA node template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_name</strong> (<em>str</em>) – </p></li>
<li><p><strong>_metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>_directives</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>_node_filter</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="tosca.Node.find_required_by">
<span class="sig-name descname"><span class="pre">find_required_by</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">requirement_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><span class="pre">FieldProjection</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tosca.Node" title="tosca.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Node.find_required_by" title="Permalink to this definition"></a></dt>
<dd><p>Finds the node template with a requirement named <code class="docutils literal notranslate"><span class="pre">requirement_name</span></code> whose value is this template.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
  <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
  <span class="n">connects_to</span><span class="p">:</span> <span class="n">A</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">(</span><span class="n">connects_to</span><span class="o">=</span><span class="n">a</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">find_required_by</span><span class="p">(</span><span class="n">B</span><span class="o">.</span><span class="n">connects_to</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
<span class="n">b</span>
</pre></div>
</div>
<p>If no match is found, or more than one match is found, an error is raised.
If 0 or more matches are expected, use <a class="reference internal" href="#tosca.Node.find_all_required_by" title="tosca.Node.find_all_required_by"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">find_all_required_by</span></code></a>.</p>
<p>If called during class definition this will return an eval expression.
If called as a classmethod or as a free function it will evaluate in the current context.</p>
<p>For example, to expand on the example above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
  <span class="n">parent</span><span class="p">:</span> <span class="n">B</span> <span class="o">=</span> <span class="n">find_required_by</span><span class="p">(</span><span class="n">B</span><span class="o">.</span><span class="n">connects_to</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">parent</span></code> will default to an eval expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>requirement_name</strong> (<em>str</em><em> | </em><a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><em>FieldProjection</em></a>) – Either the name of the req, or for a more type safety, a reference to the requirement (e.g. <code class="docutils literal notranslate"><span class="pre">B.connects_to</span></code> in the example above).</p></li>
<li><p><strong>expected_type</strong> (<a class="reference internal" href="#tosca.Node" title="tosca.Node"><em>Node</em></a><em>, </em><em>optional</em>) – The expected type of the node template will be returned. If provided, enables static typing and runtime validation of the return value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The node template that is targeting this template via the requirement.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#tosca.Node" title="tosca.Node">Node</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.Node.find_all_required_by">
<span class="sig-name descname"><span class="pre">find_all_required_by</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">requirement_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><span class="pre">FieldProjection</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tosca.Node" title="tosca.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Node.find_all_required_by" title="Permalink to this definition"></a></dt>
<dd><p>Behaves the same as <a class="reference internal" href="#tosca.Node.find_required_by" title="tosca.Node.find_required_by"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">find_required_by</span></code></a> but returns a list of all the matches found.
If no match is found, return an empty list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>requirement_name</strong> (<em>str</em><em> | </em><a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><em>FieldProjection</em></a>) – Either the name of the req, or for a more type safety, a reference to the requirement (e.g. <code class="docutils literal notranslate"><span class="pre">B.connects_to</span></code> in the example above).</p></li>
<li><p><strong>expected_type</strong> (<a class="reference internal" href="#tosca.Node" title="tosca.Node"><em>Node</em></a><em>, </em><em>optional</em>) – The expected type of the node template will be returned. If provided, enables static typing and runtime validation of the return value.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[<a class="reference internal" href="#tosca.Node" title="tosca.Node">tosca.Node</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.Node.substitute">
<span class="sig-name descname"><span class="pre">substitute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">overrides</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Node.substitute" title="Permalink to this definition"></a></dt>
<dd><p>Create a new node template with a “substitute” directive.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">tosca_repositories</span><span class="w"> </span><span class="kn">import</span> <span class="n">nested</span>

<span class="n">substitution_node</span> <span class="o">=</span> <span class="n">nested</span><span class="o">.</span><span class="n">__root__</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="nb">property</span><span class="o">=</span><span class="s2">&quot;override&quot;</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="n">DB</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>_name</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Self</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.Node._directives">
<span class="sig-name descname"><span class="pre">_directives</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#tosca.Node._directives" title="Permalink to this definition"></a></dt>
<dd><p>List of this node template’s TOSCA directives</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.Node._node_filter">
<span class="sig-name descname"><span class="pre">_node_filter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#tosca.Node._node_filter" title="Permalink to this definition"></a></dt>
<dd><p>Optional node_filter to use when ‘select’ directive is set.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.Relationship">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Relationship</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_local_name=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_node=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_default_for=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_target=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Relationship" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tosca._tosca._OwnedToscaType</span></code></p>
<p>A TOSCA relationship template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_name</strong> (<em>str</em>) – </p></li>
<li><p><strong>_metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>_local_name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>_node</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#tosca.Node" title="tosca._tosca.Node"><em>tosca._tosca.Node</em></a><em>]</em>) – </p></li>
<li><p><strong>_default_for</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>str</em><em>, </em><a class="reference internal" href="#tosca.CapabilityEntity" title="tosca._tosca.CapabilityEntity"><em>tosca._tosca.CapabilityEntity</em></a><em>, </em><a class="reference internal" href="#tosca.Node" title="tosca._tosca.Node"><em>tosca._tosca.Node</em></a><em>, </em><em>Type</em><em>[</em><a class="reference internal" href="#tosca.CapabilityEntity" title="tosca._tosca.CapabilityEntity"><em>tosca._tosca.CapabilityEntity</em></a><em>]</em><em>, </em><em>Type</em><em>[</em><a class="reference internal" href="#tosca.Node" title="tosca._tosca.Node"><em>tosca._tosca.Node</em></a><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>_target</strong> (<a class="reference internal" href="#tosca.Node" title="tosca._tosca.Node"><em>tosca._tosca.Node</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.CapabilityEntity">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">CapabilityEntity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_local_name=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_node=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.CapabilityEntity" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tosca._tosca._OwnedToscaType</span></code></p>
<p>A TOSCA capability template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_name</strong> (<em>str</em>) – </p></li>
<li><p><strong>_metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>_local_name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>_node</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#tosca.Node" title="tosca._tosca.Node"><em>tosca._tosca.Node</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.DataEntity">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">DataEntity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_local_name=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_node=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.DataEntity" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tosca._tosca._BaseDataType</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">tosca._tosca._OwnedToscaType</span></code></p>
<p>A complex TOSCA data type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_name</strong> (<em>str</em>) – </p></li>
<li><p><strong>_metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>_local_name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>_node</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#tosca.Node" title="tosca._tosca.Node"><em>tosca._tosca.Node</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.ArtifactEntity">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">ArtifactEntity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_local_name=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_node=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repository=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deploy_path=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checksum=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checksum_algorithm=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permissions=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contents=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dependencies=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ArtifactEntity" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tosca._tosca._OwnedToscaType</span></code></p>
<p>A TOSCA artifact template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_name</strong> (<em>str</em>) – </p></li>
<li><p><strong>_metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>_local_name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>_node</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#tosca.Node" title="tosca._tosca.Node"><em>tosca._tosca.Node</em></a><em>]</em>) – </p></li>
<li><p><strong>file</strong> (<em>str</em>) – </p></li>
<li><p><strong>repository</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>deploy_path</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>version</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>checksum</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>checksum_algorithm</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>permissions</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>intent</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>target</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>order</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em>) – </p></li>
<li><p><strong>contents</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>dependencies</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><em>Union</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>]</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.Group">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_members=()</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Group" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#tosca.ToscaType" title="tosca._tosca.ToscaType"><code class="xref py py-class docutils literal notranslate"><span class="pre">tosca._tosca.ToscaType</span></code></a></p>
<p>A TOSCA group template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_name</strong> (<em>str</em>) – </p></li>
<li><p><strong>_metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>_members</strong> (<em>Sequence</em><em>[</em><em>Union</em><em>[</em><a class="reference internal" href="#tosca.Node" title="tosca._tosca.Node"><em>tosca._tosca.Node</em></a><em>, </em><a class="reference internal" href="#tosca.Group" title="tosca._tosca.Group"><em>tosca._tosca.Group</em></a><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.Policy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Policy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_targets=()</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Policy" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#tosca.ToscaType" title="tosca._tosca.ToscaType"><code class="xref py py-class docutils literal notranslate"><span class="pre">tosca._tosca.ToscaType</span></code></a></p>
<p>A TOSCA policy template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_name</strong> (<em>str</em>) – </p></li>
<li><p><strong>_metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>_targets</strong> (<em>Sequence</em><em>[</em><em>Union</em><em>[</em><a class="reference internal" href="#tosca.Node" title="tosca._tosca.Node"><em>tosca._tosca.Node</em></a><em>, </em><a class="reference internal" href="#tosca.Group" title="tosca._tosca.Group"><em>tosca._tosca.Group</em></a><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="tosca-field-specifiers">
<h3><a class="toc-backref" href="#id6">TOSCA Field Specifiers</a><a class="headerlink" href="#tosca-field-specifiers" title="Permalink to this headline"></a></h3>
<p>The follow are functions that are used as field specified when declaring attributes on <a class="reference internal" href="#tosca-types"><span class="std std-ref">TOSCA Types</span></a>. Use these if you need to specify TOSCA specific information about the field or if the TOSCA field type can’t be inferred from the Python’s attribute’s type. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyNode</span><span class="p">(</span><span class="n">tosca</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Root</span><span class="p">):</span>
    <span class="n">a_tosca_property</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Property</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;a-tosca-property&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">})</span>
</pre></div>
</div>
<p>Note that these functions all take keyword-only parameters (this is needed for IDE integration).</p>
<span class="target" id="module-tosca"></span><dl class="py function">
<dt class="sig sig-object py" id="tosca.Artifact">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Artifact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default=&lt;dataclasses._MISSING_TYPE</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factory=&lt;dataclasses._MISSING_TYPE</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Artifact" title="Permalink to this definition"></a></dt>
<dd><p>Field specifier for declaring a TOSCA artifact.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>default</strong> (<em>Any</em><em>, </em><em>optional</em>) – Default value. Set to None if the artifact isn’t required. Defaults to MISSING.</p></li>
<li><p><strong>factory</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Factory function to initialize the artifact with a unique value per template. Defaults to MISSING.</p></li>
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – TOSCA name of the field, overrides the artifact’s name when generating YAML. Defaults to “”.</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>JSON</em><em>]</em><em>, </em><em>optional</em>) – Dictionary of metadata to associate with the artifact.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#tosca.Options" title="tosca.Options"><em>Options</em></a><em>, </em><em>optional</em>) – Additional typed metadata to merge into metadata.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.Attribute">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Attribute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factory=&lt;dataclasses._MISSING_TYPE</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraints=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init=False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Attribute" title="Permalink to this definition"></a></dt>
<dd><p>Field specifier for declaring a TOSCA attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>default</strong> (<em>Any</em><em>, </em><em>optional</em>) – Default value. Set to None if the attribute isn’t required. Defaults to MISSING.</p></li>
<li><p><strong>factory</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Factory function to initialize the attribute with a unique value per template. Defaults to MISSING.</p></li>
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – TOSCA name of the field, overrides the attribute’s name when generating YAML. Defaults to “”.</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>JSON</em><em>]</em><em>, </em><em>optional</em>) – Dictionary of metadata to associate with the attribute.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#tosca.Options" title="tosca.Options"><em>Options</em></a><em>, </em><em>optional</em>) – Additional typed metadata to merge into metadata.</p></li>
<li><p><strong>constraints</strong> (List[<a class="reference internal" href="#tosca.DataConstraint" title="tosca.DataConstraint"><code class="xref any py py-class docutils literal notranslate"><span class="pre">DataConstraint</span></code></a>], optional) – List of TOSCA property constraints to apply to the attribute.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Human-friendly alternative name of the attribute.</p></li>
<li><p><strong>status</strong> (<em>str</em><em>, </em><em>optional</em>) – TOSCA status of the attribute.</p></li>
<li><p><strong>init</strong> (<em>Literal</em><em>[</em><em>False</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.Capability">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Capability</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default=&lt;dataclasses._MISSING_TYPE</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factory=&lt;dataclasses._MISSING_TYPE</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_source_types=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Capability" title="Permalink to this definition"></a></dt>
<dd><p>Field specifier for declaring a TOSCA capability.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>default</strong> (<em>Any</em><em>, </em><em>optional</em>) – Default value. Set to None if the capability isn’t required. Defaults to MISSING.</p></li>
<li><p><strong>factory</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Factory function to initialize the capability with a unique value per template. Defaults to MISSING.</p></li>
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – TOSCA name of the field, overrides the capability’s name when generating YAML. Defaults to “”.</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>JSON</em><em>]</em><em>, </em><em>optional</em>) – Dictionary of metadata to associate with the capability.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#tosca.Options" title="tosca.Options"><em>Options</em></a><em>, </em><em>optional</em>) – Additional typed metadata to merge into metadata.</p></li>
<li><p><strong>valid_source_types</strong> (<em>List</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – List of TOSCA type names to set as the capability’s valid_source_types</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.Computed">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Computed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Computed" title="Permalink to this definition"></a></dt>
<dd><p>Field specifier for declaring a TOSCA property whose value is computed by the factory function at runtime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>factory</strong> (<em>function</em>) – function called at runtime every time the property is evaluated.</p></li>
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – TOSCA name of the field, overrides the Python name when generating YAML.</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>JSON</em><em>]</em><em>, </em><em>optional</em>) – Dictionary of metadata to associate with the property.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Human-friendly alternative name of the property.</p></li>
<li><p><strong>status</strong> (<em>str</em><em>, </em><em>optional</em>) – TOSCA status of the property.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#tosca.Options" title="tosca.Options"><em>Options</em></a><em>, </em><em>optional</em>) – Typed metadata to apply.</p></li>
<li><p><strong>attribute</strong> (<em>bool</em><em>, </em><em>optional</em>) – Indicate that the property is also a TOSCA attribute.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tosca._fields.RT</p>
</dd>
</dl>
<dl class="simple">
<dt>Return type:</dt><dd><p>The return type of the factory function (should be compatible with the field type).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.Property">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Property</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default=&lt;dataclasses._MISSING_TYPE</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factory=&lt;dataclasses._MISSING_TYPE</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraints=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute=False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Property" title="Permalink to this definition"></a></dt>
<dd><p>Field specifier for declaring a TOSCA property.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>default</strong> (<em>Any</em><em>, </em><em>optional</em>) – Default value. Set to None if the property isn’t required. Defaults to MISSING.</p></li>
<li><p><strong>factory</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Factory function to initialize the property with a unique value per template. Defaults to MISSING.</p></li>
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – TOSCA name of the field, overrides the property’s name when generating YAML. Defaults to “”.</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>JSON</em><em>]</em><em>, </em><em>optional</em>) – Dictionary of metadata to associate with the property.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#tosca.Options" title="tosca.Options"><em>Options</em></a><em>, </em><em>optional</em>) – Additional typed metadata to merge into metadata.</p></li>
<li><p><strong>constraints</strong> (List[<a class="reference internal" href="#tosca.DataConstraint" title="tosca.DataConstraint"><code class="xref any py py-class docutils literal notranslate"><span class="pre">DataConstraint</span></code></a>], optional) – List of TOSCA property constraints to apply to the property.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Human-friendly alternative name of the property.</p></li>
<li><p><strong>status</strong> (<em>str</em><em>, </em><em>optional</em>) – TOSCA status of the property.</p></li>
<li><p><strong>attribute</strong> (<em>bool</em><em>, </em><em>optional</em>) – Indicate that the property is also a TOSCA attribute. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.Requirement">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Requirement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default=&lt;dataclasses._MISSING_TYPE</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factory=&lt;dataclasses._MISSING_TYPE</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relationship=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capability=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_filter=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Requirement" title="Permalink to this definition"></a></dt>
<dd><p>Field specifier for declaring a TOSCA requirement.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>default</strong> (<em>Any</em><em>, </em><em>optional</em>) – Default value. Set to None if the requirement isn’t required. Defaults to MISSING.</p></li>
<li><p><strong>factory</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Factory function to initialize the requirement with a unique value per template. Defaults to MISSING.</p></li>
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – TOSCA name of the field, overrides the requirement’s name when generating YAML. Defaults to “”.</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>JSON</em><em>]</em><em>, </em><em>optional</em>) – Dictionary of metadata to associate with the requirement.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#tosca.Options" title="tosca.Options"><em>Options</em></a><em>, </em><em>optional</em>) – Additional typed metadata to merge into metadata.</p></li>
<li><p><strong>relationship</strong> (<em>str</em><em> | </em><em>Type</em><em>[</em><a class="reference internal" href="#tosca.Relationship" title="tosca.Relationship"><em>Relationship</em></a><em>]</em><em>, </em><em>optional</em>) – The requirement’s <code class="docutils literal notranslate"><span class="pre">relationship</span></code> specified by TOSCA type name or Relationship class.</p></li>
<li><p><strong>capability</strong> (<em>str</em><em> | </em><em>Type</em><em>[</em><a class="reference internal" href="#tosca.CapabilityEntity" title="tosca.CapabilityEntity"><em>CapabilityEntity</em></a><em>]</em><em>, </em><em>optional</em>) – The requirement’s <code class="docutils literal notranslate"><span class="pre">capability</span></code> specified by TOSCA type name or CapabilityEntity class.</p></li>
<li><p><strong>node</strong> (<em>str</em><em>, </em><em>| </em><em>Type</em><em>[</em><a class="reference internal" href="#tosca.Node" title="tosca.Node"><em>Node</em></a><em>]</em><em>, </em><em>optional</em>) – The requirement’s <code class="docutils literal notranslate"><span class="pre">node</span></code> specified by TOSCA type name or Node class.</p></li>
<li><p><strong>node_filter</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>, </em><em>optional</em>) – The TOSCA node_filter for this requirement.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.operation">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">operation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operation_host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">environment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dependencies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invoke</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.operation" title="Permalink to this definition"></a></dt>
<dd><p>Function decorator that marks a function or methods as a TOSCA operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the TOSCA operation. Defaults to the name of the method.</p></li>
<li><p><strong>apply_to</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – List of TOSCA operations to apply this method to. If omitted, match by the operation name.</p></li>
<li><p><strong>timeout</strong> (<em>float</em><em>, </em><em>optional</em>) – Timeout for the operation (in seconds). Defaults to None.</p></li>
<li><p><strong>operation_host</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of host where this operation will be executed. Defaults to None.</p></li>
<li><p><strong>environment</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – A map of environment variables to use while executing the operation. Defaults to None.</p></li>
<li><p><strong>dependencies</strong> (<em>List</em><em>[</em><em>Union</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em><em>]</em><em>, </em><em>optional</em>) – List of artifacts this operation depends on. Defaults to None.</p></li>
<li><p><strong>outputs</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – TOSCA outputs mapping. Defaults to None.</p></li>
<li><p><strong>entry_state</strong> (<em>str</em><em>, </em><em>optional</em>) – Node state required to invoke this operation. Defaults to None.</p></li>
<li><p><strong>invoke</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of operation to delegate this operation to. Defaults to None.</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>JSON</em><em>]</em><em>, </em><em>optional</em>) – Dictionary of metadata to associate with the operation. Defaults to None.</p></li>
<li><p><strong>func</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>tosca._tosca.F</em><em>, </em><a class="reference internal" href="#tosca.ArtifactEntity" title="tosca._tosca.ArtifactEntity"><em>tosca._tosca.ArtifactEntity</em></a><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Union</em>[tosca._tosca.F, <em>Callable</em>[[tosca._tosca.F], tosca._tosca.F]]</p>
</dd>
</dl>
<p>This example marks a method a implementing the <code class="docutils literal notranslate"><span class="pre">create</span></code> and <code class="docutils literal notranslate"><span class="pre">delete</span></code> operations on the <code class="docutils literal notranslate"><span class="pre">Standard</span></code> TOSCA interface.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@operation</span><span class="p">(</span><span class="n">apply_to</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Standard.create&quot;</span><span class="p">,</span> <span class="s2">&quot;Standard.delete&quot;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">my_artifact</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
</pre></div>
</div>
<p>If you wish to declare an abstract operation on a custom interface without specifying its signature, assign <code class="docutils literal notranslate"><span class="pre">operation()</span></code> directly, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyInterface</span><span class="p">(</span><span class="n">tosca</span><span class="o">.</span><span class="n">interfaces</span><span class="o">.</span><span class="n">Root</span><span class="p">):</span>
    <span class="n">my_operation</span> <span class="o">=</span> <span class="n">operation</span><span class="p">()</span>
    <span class="s2">&quot;Invoke this method to perform my_operation&quot;</span>
</pre></div>
</div>
<p>This will avoid static type-check errors when subclasses declare a method implementing the operation.</p>
<p>You can also use it to create an operation from an Artifact without having to define a method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># set the &quot;configure&quot; operation on &quot;my_node&quot; with the given artifact as its implementation.</span>
<span class="n">my_node</span> <span class="o">=</span> <span class="n">MyNode</span><span class="p">()</span><span class="o">.</span><span class="n">set_operation</span><span class="p">(</span><span class="n">operation</span><span class="p">(</span><span class="n">ShellExecutable</span><span class="p">(</span><span class="s2">&quot;configure&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="s2">&quot;./script.sh {{ SELF.prop }}&quot;</span><span class="p">)))</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="other-tosca-objects">
<h3><a class="toc-backref" href="#id7">Other Tosca Objects</a><a class="headerlink" href="#other-tosca-objects" title="Permalink to this headline"></a></h3>
<p>The following classes represent TOSCA entities that are not derived from <a class="reference internal" href="#tosca.ToscaType" title="tosca.ToscaType"><code class="xref any py py-class docutils literal notranslate"><span class="pre">ToscaType</span></code></a> but correspond to TOSCA YAML constructs.</p>
<dl class="py class">
<dt class="sig sig-object py" id="tosca.Interface">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Interface</span></span><a class="headerlink" href="#tosca.Interface" title="Permalink to this definition"></a></dt>
<dd><p>Base class for defining custom TOSCA <a class="reference internal" href="toscaref/spec-other-types.html#interface-types"><span class="std std-ref">Interface Types</span></a>. Each public method (without a leading “_”) corresponds to a TOSCA <a class="reference internal" href="#tosca.operation" title="tosca.operation"><code class="xref any py py-func docutils literal notranslate"><span class="pre">tosca.operation</span></code></a>.  TOSCA types such as <a class="reference internal" href="#tosca.Node" title="tosca.Node"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Nodes</span></code></a> use multiple inheritance to implement interface operations.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.Interface._interface_requirements">
<span class="sig-name descname"><span class="pre">_interface_requirements</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#tosca.Interface._interface_requirements" title="Permalink to this definition"></a></dt>
<dd><p>Set this in the class definition to include as the <a class="reference internal" href="extensions.html#extensions"><span class="std std-ref">requirements</span></a> key on the TOSCA YAML <code class="docutils literal notranslate"><span class="pre">interface</span></code> declarations (an Unfurl extension for specifying the <a class="reference internal" href="runtime.html#connections"><span class="std std-ref">Connections</span></a> that its operations need to function).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.Interface._type_metadata">
<span class="sig-name descname"><span class="pre">_type_metadata</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">JsonType</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">JsonType</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">JsonType</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">JsonType</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#tosca.Interface._type_metadata" title="Permalink to this definition"></a></dt>
<dd><p>Set this in the class definition to set metadata for the TOSCA interface type.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.Interface._type_name">
<span class="sig-name descname"><span class="pre">_type_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#tosca.Interface._type_name" title="Permalink to this definition"></a></dt>
<dd><p>Set this in the class definition if the TOSCA type name is different from the class name.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.Repository">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Repository</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">credential</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Repository" title="Permalink to this definition"></a></dt>
<dd><p>Create a TOSCA  <a class="reference internal" href="toscaref/spec-repositories.html#tosca-repositories"><span class="std std-ref">Repository</span></a> object. Repositories can represent, for example,
a git repository, a container image or artifact registry or a file path to a local directory.</p>
<p>Repositories need to be declared before any import statements that refer to them
so an orchestrator like Unfurl can map them to <code class="docutils literal notranslate"><span class="pre">tosca_repositories</span></code> imports.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em><em>]</em>) – The name of the repository.</p></li>
<li><p><strong>url</strong> (<em>str</em>) – The url of the repository.</p></li>
<li><p><strong>revision</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – The revision of the repository to use (e.g. a semantic version or git tag or branch). Defaults to None.</p></li>
<li><p><strong>description</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – A human-readable description of the repository. Defaults to None.</p></li>
<li><p><strong>credential</strong> (<em>Optional</em><em>[</em><em>tosca.datatypes.Credential</em><em>]</em>) – The credential to use when accessing the repository. Defaults to None.</p></li>
<li><p><strong>metadata</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Additional metadata about the repository. Defaults to None.</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">std</span> <span class="o">=</span> <span class="n">tosca</span><span class="o">.</span><span class="n">Repository</span><span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="s2">&quot;https://unfurl.cloud/onecommons/std&quot;</span><span class="p">,</span>
            <span class="n">credential</span><span class="o">=</span><span class="n">tosca</span><span class="o">.</span><span class="n">datatypes</span><span class="o">.</span><span class="n">Credential</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;a_user&quot;</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">expr</span><span class="o">.</span><span class="n">get_env</span><span class="p">(</span><span class="s2">&quot;MY_TOKEN&quot;</span><span class="p">)))</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tosca_repositories.std</span><span class="w"> </span><span class="kn">import</span> <span class="n">Service</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.ToscaInputs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">ToscaInputs</span></span><a class="headerlink" href="#tosca.ToscaInputs" title="Permalink to this definition"></a></dt>
<dd><p>Base class for defining TOSCA operation inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.ToscaOutputs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">ToscaOutputs</span></span><a class="headerlink" href="#tosca.ToscaOutputs" title="Permalink to this definition"></a></dt>
<dd><p>Base class for defining TOSCA operation outputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.TopologyInputs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">TopologyInputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.TopologyInputs" title="Permalink to this definition"></a></dt>
<dd><p>Base class for defining topology template inputs.
When converting to YAML, TopologyInputs subclass definitions will be rendered as the <a class="reference internal" href="toscaref/spec-inputs.html#inputs"><span class="std std-ref">inputs section</span></a> of the topology template.
TopologyInputs subclass objects will be rendered as the <a class="reference internal" href="runtime.html#topology-inputs"><span class="std std-ref">input_values section</span></a> of the service template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_name</strong> (<em>str</em>) – </p></li>
<li><p><strong>_metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.TopologyOutputs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">TopologyOutputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.TopologyOutputs" title="Permalink to this definition"></a></dt>
<dd><p>Base class for defining topology template outputs.
When converting to YAML, TopologyOutputs subclass definitions will be rendered asthe <a class="reference internal" href="toscaref/spec-outputs.html#topology-outputs"><span class="std std-ref">outputs section</span></a> of the topology template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_name</strong> (<em>str</em>) – </p></li>
<li><p><strong>_metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.ValueType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">ValueType</span></span><a class="headerlink" href="#tosca.ValueType" title="Permalink to this definition"></a></dt>
<dd><p>ValueTypes are user-defined TOSCA data types that are derived from simple TOSCA datatypes, as opposed to complex TOSCA data types.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tosca.ValueType.simple_tosca_type">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">simple_tosca_type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ValueType.simple_tosca_type" title="Permalink to this definition"></a></dt>
<dd><p>The TOSCA simple type that this data types is derived from.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.ValueType.simple_type">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">simple_type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tosca.ValueType.simple_type" title="Permalink to this definition"></a></dt>
<dd><p>The Python type that this data type is derived from.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>type</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="property-constraints">
<h3><a class="toc-backref" href="#id8">Property Constraints</a><a class="headerlink" href="#property-constraints" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="tosca.DataConstraint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">DataConstraint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.DataConstraint" title="Permalink to this definition"></a></dt>
<dd><p>Base class for <a class="reference external" href="_static/TOSCA-Simple-Profile-YAML-v1.3-os-toc.html#_Toc50125233">TOSCA property constraints</a>. There’s a DataConstraint subclass with the same name as each of those constraints.</p>
<p>These can be passed as <a class="reference internal" href="#tosca.Property" title="tosca.Property"><code class="xref any py py-func docutils literal notranslate"><span class="pre">Property</span></code></a> and <a class="reference internal" href="#tosca.Attribute" title="tosca.Attribute"><code class="xref any py py-func docutils literal notranslate"><span class="pre">Attribute</span></code></a> field specifiers or as a Python type annotations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraint</strong> (<em>tosca._tosca.T</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.equal">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">equal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.equal" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraint</strong> (<em>tosca._tosca.T</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.greater_than">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">greater_than</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.greater_than" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraint</strong> (<em>tosca._tosca.T</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.less_than">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">less_than</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.less_than" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraint</strong> (<em>tosca._tosca.T</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.greater_or_equal">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">greater_or_equal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.greater_or_equal" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraint</strong> (<em>tosca._tosca.T</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.less_or_equal">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">less_or_equal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.less_or_equal" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraint</strong> (<em>tosca._tosca.T</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.in_range">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">in_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.in_range" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min</strong> (<em>tosca._tosca.T</em>) – </p></li>
<li><p><strong>max</strong> (<em>tosca._tosca.T</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.valid_values">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">valid_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.valid_values" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraint</strong> (<em>tosca._tosca.T</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.length">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.length" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraint</strong> (<em>tosca._tosca.T</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.min_length">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">min_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.min_length" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraint</strong> (<em>tosca._tosca.T</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.max_length">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">max_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.max_length" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraint</strong> (<em>tosca._tosca.T</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.pattern">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">pattern</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.pattern" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraint</strong> (<em>tosca._tosca.T</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.schema">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.schema" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraint</strong> (<em>tosca._tosca.T</em>) – </p>
</dd>
</dl>
</dd></dl>

</section>
<section id="other-module-items">
<h3><a class="toc-backref" href="#id9">Other Module Items</a><a class="headerlink" href="#other-module-items" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="tosca.Eval">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Eval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Eval" title="Permalink to this definition"></a></dt>
<dd><p>Use this function to specify that a value is or contains a TOSCA function or eval expressions. For example, for property default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>Any</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.EvalData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">EvalData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.EvalData" title="Permalink to this definition"></a></dt>
<dd><p>An internal wrapper around JSON/YAML data that may contain TOSCA functions or <a class="reference internal" href="processing.html#eval-expressions"><span class="std std-ref">Eval Expressions</span></a> and will be evaluated at runtime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expr</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#tosca.EvalData" title="tosca.EvalData"><em>EvalData</em></a><em>, </em><em>str</em><em>, </em><em>None</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>, </em><em>List</em><em>[</em><em>Any</em><em>]</em><em>, </em><em>Callable</em><em>]</em>) – </p></li>
<li><p><strong>path</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><em>Union</em><em>[</em><em>str</em><em>, </em><em>tosca._tosca._GetName</em><em>]</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.Options">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">Options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.Options" title="Permalink to this definition"></a></dt>
<dd><p>A utility class to enable structured and validated metadata on TOSCA fields.
Options are passed to the field specifier functions and merged with unstructured metadata.
The user can use the | operator to merge Options together.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.AttributeOptions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">AttributeOptions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.AttributeOptions" title="Permalink to this definition"></a></dt>
<dd><p>An option that only applies to TOSCA attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.PropertyOptions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">PropertyOptions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.PropertyOptions" title="Permalink to this definition"></a></dt>
<dd><p>An option that only applies to TOSCA properties.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>None</em><em>, </em><em>int</em><em>, </em><em>float</em><em>, </em><em>str</em><em>, </em><em>bool</em><em>, </em><em>Sequence</em><em>[</em><em>JsonType</em><em>]</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>JsonType</em><em>]</em><em>]</em><em>]</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.FieldProjection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">FieldProjection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.FieldProjection" title="Permalink to this definition"></a></dt>
<dd><p>An <a class="reference internal" href="#tosca.EvalData" title="tosca.EvalData"><code class="xref any py py-class docutils literal notranslate"><span class="pre">EvalData</span></code></a> subclass that references a TOSCA field or a projection off a tosca field (i.e. a field reference from a field reference). These are generally invisible to user code but during “parse” mode, <a class="reference internal" href="#tosca.ToscaType" title="tosca.ToscaType"><code class="xref any py py-class docutils literal notranslate"><span class="pre">ToscaType</span></code></a> attribute references return these “under the hood” but we use <a class="reference external" href="https://en.wikipedia.org/wiki/Type_punning">type punning</a> so that a Python static type checker won’t know this, allowing user code to operate on them as if they were the concrete values declared on the class. Since field projections are used to generate the YAML that a TOSCA orchestrator consumes, a Python type checker can catch validation errors before a blueprint is deployed.</p>
<p>You can explicitly get a <a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><code class="xref any py py-class docutils literal notranslate"><span class="pre">FieldProjection</span></code></a> using <a class="reference internal" href="#tosca.ToscaType.get_ref" title="tosca.ToscaType.get_ref"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">get_ref</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field</strong> (<em>tosca._tosca._Tosca_Field</em>) – </p></li>
<li><p><strong>parent</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#tosca.FieldProjection" title="tosca.FieldProjection"><em>FieldProjection</em></a><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.StandardOperationsKeywords">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">StandardOperationsKeywords</span></span><a class="headerlink" href="#tosca.StandardOperationsKeywords" title="Permalink to this definition"></a></dt>
<dd><p>The names of tosca and unfurl’s built-in operations.
<a class="reference internal" href="#tosca.set_operations" title="tosca.set_operations"><code class="xref any py py-func docutils literal notranslate"><span class="pre">set_operations</span></code></a> uses this to provide type hint for its keyword arguments, ignore this when setting custom operations.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.set_operations">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">set_operations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tosca.StandardOperationsKeywords" title="tosca.StandardOperationsKeywords"><span class="pre">StandardOperationsKeywords</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">nodes.Root</span></span></span><a class="headerlink" href="#tosca.set_operations" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">set_operations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_PT</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tosca.StandardOperationsKeywords" title="tosca.StandardOperationsKeywords"><span class="pre">StandardOperationsKeywords</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_PT</span></span></span></dt>
<dd><p>Helper method to set operations on a TOSCA template using its keyword arguments’ as the operation names.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>Optional</em><em>[</em><em>nodes.Root</em><em>]</em>) – An optional object to configure. If not provided, a new <code class="docutils literal notranslate"><span class="pre">tosca.nodes.Root</span></code> object is created.</p></li>
<li><p><strong>**kwargs</strong> (<em>Unpack</em><em>[</em><a class="reference internal" href="#tosca.StandardOperationsKeywords" title="tosca.StandardOperationsKeywords"><em>StandardOperationsKeywords</em></a><em>]</em>) – A mapping of operation names to a callable or
<a class="reference internal" href="#tosca.ArtifactEntity" title="tosca.ArtifactEntity"><code class="xref any py py-class docutils literal notranslate"><span class="pre">ArtifactEntity</span></code></a> instance. If an <a class="reference internal" href="#tosca.ArtifactEntity" title="tosca.ArtifactEntity"><code class="xref any py py-class docutils literal notranslate"><span class="pre">ArtifactEntity</span></code></a> is provided, it is converted into an operation via <a class="reference internal" href="#tosca.operation" title="tosca.operation"><code class="xref py py-func docutils literal notranslate"><span class="pre">tosca.operation()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The given or created template with the specified operations set.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#tosca.ToscaType" title="tosca.ToscaType">ToscaType</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.NodeTemplateDirective">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">NodeTemplateDirective</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names=&lt;not</span> <span class="pre">given&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qualname=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.NodeTemplateDirective" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Enum of Node Template <a class="reference external" href="_static/TOSCA-Simple-Profile-YAML-v1.3-os-toc.html#_Toc50125217">directives</a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.NodeTemplateDirective.check">
<span class="sig-name descname"><span class="pre">check</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'check'</span></em><a class="headerlink" href="#tosca.NodeTemplateDirective.check" title="Permalink to this definition"></a></dt>
<dd><p>Run check operation before deploying.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.NodeTemplateDirective.conditional">
<span class="sig-name descname"><span class="pre">conditional</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'conditional'</span></em><a class="headerlink" href="#tosca.NodeTemplateDirective.conditional" title="Permalink to this definition"></a></dt>
<dd><p>Silently exclude from plan if one of its requirements is not met.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.NodeTemplateDirective.default">
<span class="sig-name descname"><span class="pre">default</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'default'</span></em><a class="headerlink" href="#tosca.NodeTemplateDirective.default" title="Permalink to this definition"></a></dt>
<dd><p>Ignore this template if one with the same name is defined in the root topology.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.NodeTemplateDirective.dependent">
<span class="sig-name descname"><span class="pre">dependent</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'dependent'</span></em><a class="headerlink" href="#tosca.NodeTemplateDirective.dependent" title="Permalink to this definition"></a></dt>
<dd><p>Exclude from plan if not referenced by other templates.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.NodeTemplateDirective.discover">
<span class="sig-name descname"><span class="pre">discover</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'discover'</span></em><a class="headerlink" href="#tosca.NodeTemplateDirective.discover" title="Permalink to this definition"></a></dt>
<dd><p>Discover this template (instead of create).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.NodeTemplateDirective.protected">
<span class="sig-name descname"><span class="pre">protected</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'protected'</span></em><a class="headerlink" href="#tosca.NodeTemplateDirective.protected" title="Permalink to this definition"></a></dt>
<dd><p>Block instance from deletion.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.NodeTemplateDirective.select">
<span class="sig-name descname"><span class="pre">select</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'select'</span></em><a class="headerlink" href="#tosca.NodeTemplateDirective.select" title="Permalink to this definition"></a></dt>
<dd><p>Match the node with an instance in an <a class="reference internal" href="projects.html#external-ensembles"><span class="std std-ref">external ensemble</span></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.NodeTemplateDirective.substitute">
<span class="sig-name descname"><span class="pre">substitute</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'substitute'</span></em><a class="headerlink" href="#tosca.NodeTemplateDirective.substitute" title="Permalink to this definition"></a></dt>
<dd><p>Replace this node with a nested topology using <a class="reference internal" href="toscaref/spec-substitution-mapping.html#substitution-mappings"><span class="std std-ref">Substitution Mappings</span></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.NodeTemplateDirective.virtual">
<span class="sig-name descname"><span class="pre">virtual</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'virtual'</span></em><a class="headerlink" href="#tosca.NodeTemplateDirective.virtual" title="Permalink to this definition"></a></dt>
<dd><p>Don’t instantiate.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.find_node">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">find_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">nodes.Root</span></span></span><a class="headerlink" href="#tosca.find_node" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">find_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_PT</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_PT</span></span></span></dt>
<dd><p>Use this to refer to TOSCA node templates that are not visible to your Python code.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.find_relationship">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">find_relationship</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relationship_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">relationships.Root</span></span></span><a class="headerlink" href="#tosca.find_relationship" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">find_relationship</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relationship_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_PT</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_PT</span></span></span></dt>
<dd><p>Use this to refer to TOSCA relationship templates are not visible to your Python code</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.jinja_template">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">jinja_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.jinja_template" title="Permalink to this definition"></a></dt>
<dd><p>Use this decorator on methods or functions passed to <a class="reference internal" href="#tosca.Computed" title="tosca.Computed"><code class="xref any py py-func docutils literal notranslate"><span class="pre">Computed</span></code></a> properties. They should return a Python f-string, which the decorator converts to a jinja2 template at runtime.
This allows you to create a template with conditionals and loops while taking advantage of static type checking and IDE support for f-strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_func</strong> (<em>Optional</em><em>[</em><em>tosca._fields._F</em><em>]</em>) – </p></li>
<li><p><strong>convert_to</strong> (<em>Literal</em><em>[</em><em>'yaml'</em><em>, </em><em>'json'</em><em>, </em><em>None</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.patch_template">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">patch_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patch</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.patch_template" title="Permalink to this definition"></a></dt>
<dd><p>Apply the give <a class="reference internal" href="dsl.html#template-customization-and-patching"><span class="std std-ref">patch object</span></a> to the template found in the given module.</p>
<p>Must be called before yaml generation, so care must be taken to make sure the module that calls this method is imported before a TOSCA import or include of the patched template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>module</strong> (<em>module</em>) – </p></li>
<li><p><strong>template_name</strong> (<em>str</em>) – </p></li>
<li><p><strong>patch</strong> (<a class="reference internal" href="#tosca.ToscaType" title="tosca._tosca.ToscaType"><em>tosca._tosca.ToscaType</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[<a class="reference internal" href="#tosca.ToscaType" title="tosca._tosca.ToscaType">tosca._tosca.ToscaType</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.set_evaluation_mode">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">set_evaluation_mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.set_evaluation_mode" title="Permalink to this definition"></a></dt>
<dd><p>A context manager that sets the global (per-thread) tosca evaluation mode and restores the previous mode upon exit.
This is only needed for testing or other special contexts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<em>str</em>) – “parse” or  “runtime”</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p>the previous mode</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">set_evaluation_mode</span><span class="p">(</span><span class="s2">&quot;parse&quot;</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">tosca</span><span class="o">.</span><span class="n">global_state_mode</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;parse&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.safe_mode">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">safe_mode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tosca.safe_mode" title="Permalink to this definition"></a></dt>
<dd><p>This function returns True if running within the Python safe mode sandbox.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.global_state_mode">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">global_state_mode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tosca.global_state_mode" title="Permalink to this definition"></a></dt>
<dd><p>This function returns the execution state (either “parse” or “runtime”) that the current thread is in.</p>
<p>Returns “parse” or “runtime”</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.global_state_context">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">global_state_context</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tosca.global_state_context" title="Permalink to this definition"></a></dt>
<dd><p>This function returns orchestrator-specific runtime state for the current thread (or None).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.reset_safe_mode">
<span class="sig-prename descclassname"><span class="pre">tosca.</span></span><span class="sig-name descname"><span class="pre">reset_safe_mode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tosca.reset_safe_mode" title="Permalink to this definition"></a></dt>
<dd><p>If currently in safe mode, reset any global state as needed to maintain isolation.</p>
</dd></dl>

</section>
<section id="module-tosca.scalars">
<span id="scalars"></span><h3><a class="toc-backref" href="#id10">Scalars</a><a class="headerlink" href="#module-tosca.scalars" title="Permalink to this headline"></a></h3>
<p>This modules exposes TOSCA scalar units as Python <a class="reference internal" href="#tosca.scalars._Unit" title="tosca.scalars._Unit"><code class="xref any py py-class docutils literal notranslate"><span class="pre">_Unit</span></code></a> objects.</p>
<p>Each unit name listed in <code class="docutils literal notranslate"><span class="pre">SCALAR_UNIT_DICT</span></code> can be imported from this module, e.g.:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">tosca</span><span class="w"> </span><span class="kn">import</span> <span class="n">mb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">one_mb</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">mb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">one_mb</span>
<span class="go">1.0 MB</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">one_mb</span><span class="o">.</span><span class="n">value</span>
<span class="go">1000000.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">one_mb</span><span class="o">.</span><span class="n">as_unit</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">one_mb</span><span class="o">.</span><span class="n">to_yaml</span><span class="p">()</span>
<span class="go">&#39;1.0 MB&#39;</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="tosca.scalars.Bitrate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.scalars.</span></span><span class="sig-name descname"><span class="pre">Bitrate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars.Bitrate" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>unit</strong> (<a class="reference internal" href="#tosca.scalars._Unit" title="tosca.scalars._Unit"><em>_Unit</em></a>) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Bitrate.SCALAR_UNIT_DICT">
<span class="sig-name descname"><span class="pre">SCALAR_UNIT_DICT</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'Gbps':</span> <span class="pre">1000000000,</span> <span class="pre">'Gibps':</span> <span class="pre">1073741824,</span> <span class="pre">'Kbps':</span> <span class="pre">1000,</span> <span class="pre">'Kibps':</span> <span class="pre">1024,</span> <span class="pre">'Mbps':</span> <span class="pre">1000000,</span> <span class="pre">'Mibps':</span> <span class="pre">1048576,</span> <span class="pre">'Tbps':</span> <span class="pre">1000000000000,</span> <span class="pre">'Tibps':</span> <span class="pre">1099511627776,</span> <span class="pre">'bps':</span> <span class="pre">1}</span></em><a class="headerlink" href="#tosca.scalars.Bitrate.SCALAR_UNIT_DICT" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Bitrate.tosca_name">
<span class="sig-name descname"><span class="pre">tosca_name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'scalar-unit.bitrate'</span></em><a class="headerlink" href="#tosca.scalars.Bitrate.tosca_name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Bitrate.unit">
<span class="sig-name descname"><span class="pre">unit</span></span><a class="headerlink" href="#tosca.scalars.Bitrate.unit" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Bitrate.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#tosca.scalars.Bitrate.value" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.scalars.Frequency">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.scalars.</span></span><span class="sig-name descname"><span class="pre">Frequency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars.Frequency" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>unit</strong> (<a class="reference internal" href="#tosca.scalars._Unit" title="tosca.scalars._Unit"><em>_Unit</em></a>) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Frequency.SCALAR_UNIT_DICT">
<span class="sig-name descname"><span class="pre">SCALAR_UNIT_DICT</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'GHz':</span> <span class="pre">1000000000,</span> <span class="pre">'Hz':</span> <span class="pre">1,</span> <span class="pre">'MHz':</span> <span class="pre">1000000,</span> <span class="pre">'kHz':</span> <span class="pre">1000}</span></em><a class="headerlink" href="#tosca.scalars.Frequency.SCALAR_UNIT_DICT" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Frequency.tosca_name">
<span class="sig-name descname"><span class="pre">tosca_name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'scalar-unit.frequency'</span></em><a class="headerlink" href="#tosca.scalars.Frequency.tosca_name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Frequency.unit">
<span class="sig-name descname"><span class="pre">unit</span></span><a class="headerlink" href="#tosca.scalars.Frequency.unit" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Frequency.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#tosca.scalars.Frequency.value" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.scalars.Size">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.scalars.</span></span><span class="sig-name descname"><span class="pre">Size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars.Size" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>unit</strong> (<a class="reference internal" href="#tosca.scalars._Unit" title="tosca.scalars._Unit"><em>_Unit</em></a>) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Size.SCALAR_UNIT_DICT">
<span class="sig-name descname"><span class="pre">SCALAR_UNIT_DICT</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'B':</span> <span class="pre">1,</span> <span class="pre">'GB':</span> <span class="pre">1000000000,</span> <span class="pre">'GiB':</span> <span class="pre">1073741824,</span> <span class="pre">'KiB':</span> <span class="pre">1024,</span> <span class="pre">'MB':</span> <span class="pre">1000000,</span> <span class="pre">'MiB':</span> <span class="pre">1048576,</span> <span class="pre">'TB':</span> <span class="pre">1000000000000,</span> <span class="pre">'TiB':</span> <span class="pre">1099511627776,</span> <span class="pre">'kB':</span> <span class="pre">1000}</span></em><a class="headerlink" href="#tosca.scalars.Size.SCALAR_UNIT_DICT" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Size.tosca_name">
<span class="sig-name descname"><span class="pre">tosca_name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'scalar-unit.size'</span></em><a class="headerlink" href="#tosca.scalars.Size.tosca_name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Size.unit">
<span class="sig-name descname"><span class="pre">unit</span></span><a class="headerlink" href="#tosca.scalars.Size.unit" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Size.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#tosca.scalars.Size.value" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.scalars.Time">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.scalars.</span></span><span class="sig-name descname"><span class="pre">Time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars.Time" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>unit</strong> (<a class="reference internal" href="#tosca.scalars._Unit" title="tosca.scalars._Unit"><em>_Unit</em></a>) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Time.SCALAR_UNIT_DICT">
<span class="sig-name descname"><span class="pre">SCALAR_UNIT_DICT</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'d':</span> <span class="pre">86400,</span> <span class="pre">'h':</span> <span class="pre">3600,</span> <span class="pre">'m':</span> <span class="pre">60,</span> <span class="pre">'ms':</span> <span class="pre">0.001,</span> <span class="pre">'ns':</span> <span class="pre">1e-09,</span> <span class="pre">'s':</span> <span class="pre">1,</span> <span class="pre">'us':</span> <span class="pre">1e-06}</span></em><a class="headerlink" href="#tosca.scalars.Time.SCALAR_UNIT_DICT" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Time.tosca_name">
<span class="sig-name descname"><span class="pre">tosca_name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'scalar-unit.time'</span></em><a class="headerlink" href="#tosca.scalars.Time.tosca_name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Time.unit">
<span class="sig-name descname"><span class="pre">unit</span></span><a class="headerlink" href="#tosca.scalars.Time.unit" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars.Time.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#tosca.scalars.Time.value" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.scalars._Scalar">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.scalars.</span></span><span class="sig-name descname"><span class="pre">_Scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars._Scalar" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>unit</strong> (<a class="reference internal" href="#tosca.scalars._Unit" title="tosca.scalars._Unit"><em>_Unit</em></a>) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars._Scalar.SCALAR_UNIT_DICT">
<span class="sig-name descname"><span class="pre">SCALAR_UNIT_DICT</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#tosca.scalars._Scalar.SCALAR_UNIT_DICT" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.scalars._Scalar.as_ref">
<span class="sig-name descname"><span class="pre">as_ref</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars._Scalar.as_ref" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tosca.scalars._Scalar.as_unit">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">as_unit</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#tosca.scalars._Scalar.as_unit" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.scalars._Scalar.to_yaml">
<span class="sig-name descname"><span class="pre">to_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dict_cls=&lt;class</span> <span class="pre">'dict'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars._Scalar.to_yaml" title="Permalink to this definition"></a></dt>
<dd><p>Return this value and this type’s TOSCA unit suffix, eg. 10 kB</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars._Scalar.unit">
<span class="sig-name descname"><span class="pre">unit</span></span><a class="headerlink" href="#tosca.scalars._Scalar.unit" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tosca.scalars._Scalar.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#tosca.scalars._Scalar.value" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tosca.scalars._Unit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tosca.scalars.</span></span><span class="sig-name descname"><span class="pre">_Unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scalar_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars._Unit" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scalar_type</strong> (<em>Type</em><em>[</em><em>tosca.scalars._S</em><em>]</em>) – </p></li>
<li><p><strong>unit</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="tosca.scalars._Unit._round">
<span class="sig-name descname"><span class="pre">_round</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndigits</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars._Unit._round" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s</strong> (<em>tosca.scalars._S</em>) – </p></li>
<li><p><strong>ndigits</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>None</em><em>, </em><em>Literal</em><em>[</em><em>'ceil'</em><em>]</em><em>, </em><em>typing.Literal</em><em>[</em><em>'floor'</em><em>]</em><em>, </em><em>typing.Literal</em><em>[</em><em>'round'</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Union</em>[int, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.scalars._Unit.as_float">
<span class="sig-name descname"><span class="pre">as_float</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndigits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars._Unit.as_float" title="Permalink to this definition"></a></dt>
<dd><p>Return the given scalar as an float denominated by this unit. If ndigits is given, round to that many digits.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s</strong> (<em>tosca.scalars._S</em>) – </p></li>
<li><p><strong>ndigits</strong> (<em>int</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tosca.scalars._Unit.as_int">
<span class="sig-name descname"><span class="pre">as_int</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">round</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'round'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars._Unit.as_int" title="Permalink to this definition"></a></dt>
<dd><p>Return the given scalar as an integer denominated by this unit, rounding up or down to the nearest integer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s</strong> (<em>tosca.scalars._S</em>) – </p></li>
<li><p><strong>round</strong> (<em>Union</em><em>[</em><em>Literal</em><em>[</em><em>'round'</em><em>]</em><em>, </em><em>typing.Literal</em><em>[</em><em>'ceil'</em><em>]</em><em>, </em><em>typing.Literal</em><em>[</em><em>'floor'</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.scalars._unit">
<span class="sig-prename descclassname"><span class="pre">tosca.scalars.</span></span><span class="sig-name descname"><span class="pre">_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars._unit" title="Permalink to this definition"></a></dt>
<dd><p>Return a unit object for the given unit name. Raise NameError if the unit is not found.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>unit</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#tosca.scalars._Unit" title="tosca.scalars._Unit">tosca.scalars._Unit</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.scalars.scalar">
<span class="sig-prename descclassname"><span class="pre">tosca.scalars.</span></span><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars.scalar" title="Permalink to this definition"></a></dt>
<dd><p>Parse the string into a scalar or return None if parsing fails.</p>
<p>Supported syntax:</p>
<p><code class="docutils literal notranslate"><span class="pre">(+|-)?[digits]+</span> <span class="pre">*?</span> <span class="pre">[unit]</span></code>  (spaces between number and unit is optional)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>val</strong> (<em>Any</em>) – value to attempt to parse (The value is first converted to string, so _Scalars can be used).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[<a class="reference internal" href="#tosca.scalars._Scalar" title="tosca.scalars._Scalar">tosca.scalars._Scalar</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.scalars.scalar_value">
<span class="sig-prename descclassname"><span class="pre">tosca.scalars.</span></span><span class="sig-name descname"><span class="pre">scalar_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val_</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">round</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars.scalar_value" title="Permalink to this definition"></a></dt>
<dd><p>Convert a scalar to a number denominated by the given unit. If the scalar_value is a string or a _Scalar, parse it as a scalar.
If the scalar_value is a number assume it is already in the given unit. If the unit keyword is omitted, use the unit parsed from the scalar.</p>
<p>Return a float or an int depending on the “round” parameter: if a integer the number of digits to round to, or “ceil’, “floor” to round up or down to the nearest integer.
If round is omitted or null, round to the nearest integer unless its absolute value is less than 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>val_</strong> (<em>Any</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[<em>Union</em>[float, int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tosca.scalars.unit">
<span class="sig-prename descclassname"><span class="pre">tosca.scalars.</span></span><span class="sig-name descname"><span class="pre">unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tosca.scalars.unit" title="Permalink to this definition"></a></dt>
<dd><p>Return a unit object for the given unit name. Raise NameError if the unit is not found.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>unit</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#tosca.scalars._Unit" title="tosca.scalars._Unit">tosca.scalars._Unit</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-unfurl.tosca_plugins.functions">
<span id="utility-functions"></span><h3><a class="toc-backref" href="#id11">Utility Functions</a><a class="headerlink" href="#module-unfurl.tosca_plugins.functions" title="Permalink to this headline"></a></h3>
<p>This module contains utility functions that can be executed in <a class="reference internal" href="#tosca.global_state_mode" title="tosca.global_state_mode"><code class="xref any py py-func docutils literal notranslate"><span class="pre">&quot;parse&quot;</span> <span class="pre">mode</span></code></a> (e.g. as part of a class definition or in <code class="docutils literal notranslate"><span class="pre">_class_init_</span></code>)
and in the safe mode Python sandbox.
Each of these are also available as Eval <a class="reference internal" href="expressions.html#id2"><span class="std std-ref">Expression Functions</span></a>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.functions.to_dns_label">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.functions.</span></span><span class="sig-name descname"><span class="pre">to_dns_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'[a-zA-Z0-9-]'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'[a-zA-Z]'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'--'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'lower'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'[a-zA-Z0-9]'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'63'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">DNSLabelKwArgs</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#unfurl.tosca_plugins.functions.to_dns_label" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.functions.</span></span><span class="sig-name descname"><span class="pre">to_dns_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'[a-zA-Z0-9-]'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'[a-zA-Z]'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'--'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'lower'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'[a-zA-Z0-9]'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'63'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">DNSLabelKwArgs</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span></dt>
<dd><p>Convert the given argument (see <a class="reference internal" href="#unfurl.tosca_plugins.functions.to_label" title="unfurl.tosca_plugins.functions.to_label"><code class="xref py py-func docutils literal notranslate"><span class="pre">unfurl.tosca_plugins.functions.to_label()</span></code></a> for full description) to a DNS label (a label is the name separated by “.” in a domain name).
The maximum length of each label is 63 characters and can include
alphanumeric characters and hyphens but a domain name must not commence or end with a hyphen.</p>
<p>Invalid characters are replaced with “–“.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.functions.to_googlecloud_label">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.functions.</span></span><span class="sig-name descname"><span class="pre">to_googlecloud_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'\\\\w-'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'lower'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'__'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'[a-zA-Z]'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'63'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">DNSLabelKwArgs</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#unfurl.tosca_plugins.functions.to_googlecloud_label" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.functions.</span></span><span class="sig-name descname"><span class="pre">to_googlecloud_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'\\\\w-'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'lower'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'__'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'[a-zA-Z]'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'63'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">DNSLabelKwArgs</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span></dt>
<dd><p>See <a class="reference external" href="https://cloud.google.com/resource-manager/docs/labels-overview">https://cloud.google.com/resource-manager/docs/labels-overview</a></p>
<p>Invalid characters are replaced with “__”.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.functions.to_kubernetes_label">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.functions.</span></span><span class="sig-name descname"><span class="pre">to_kubernetes_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'\\\\w.-'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'any'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'__'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'[a-zA-Z0-9]'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'[a-zA-Z0-9]'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'63'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">DNSLabelKwArgs</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#unfurl.tosca_plugins.functions.to_kubernetes_label" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.functions.</span></span><span class="sig-name descname"><span class="pre">to_kubernetes_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'\\\\w.-'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'any'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'__'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'[a-zA-Z0-9]'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'[a-zA-Z0-9]'&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'63'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">DNSLabelKwArgs</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span></dt>
<dd><p>See <a class="reference external" href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set">https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set</a></p>
<p>Invalid characters are replaced with “__”.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.functions.to_label">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.functions.</span></span><span class="sig-name descname"><span class="pre">to_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">LabelKwArgs</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#unfurl.tosca_plugins.functions.to_label" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.functions.</span></span><span class="sig-name descname"><span class="pre">to_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">LabelKwArgs</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span></dt>
<dd><dl class="simple">
<dt>Convert a string to a label with the given constraints.</dt><dd><p>If a dictionary, all keys and string values are converted.
If list, to_label is applied to each item and concatenated using <code class="docutils literal notranslate"><span class="pre">sep</span></code></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg</strong> (<em>str</em><em> or </em><em>dict</em><em> or </em><em>list</em>) – Convert to label</p></li>
<li><p><strong>allowed</strong> (<em>str</em><em>, </em><em>optional</em>) – Allowed characters. Regex character ranges and character classes.
Defaults to “w”  (equivalent to <code class="docutils literal notranslate"><span class="pre">[a-zA-Z0-9_]</span></code>)</p></li>
<li><p><strong>replace</strong> (<em>str</em><em>, </em><em>optional</em>) – String Invalidate. Defaults to “” (remove the characters).</p></li>
<li><p><strong>start</strong> (<em>str</em><em>, </em><em>optional</em>) – Allowed characters for the first character. Regex character ranges and character classes.
Defaults to “a-zA-Z”</p></li>
<li><p><strong>start_prepend</strong> (<em>str</em><em>, </em><em>optional</em>) – If the start character is invalid, prepend with this string (Default: “x”)</p></li>
<li><p><strong>end</strong> (<em>str</em><em>, </em><em>optional</em>) – Allowed trailing characters. Regex character ranges and character classes.
If set, invalid characters are stripped.</p></li>
<li><p><strong>max</strong> (<em>int</em><em>, </em><em>optional</em>) – max length of label. Defaults to 63 (the maximum for a DNS name).</p></li>
<li><p><strong>case</strong> (<em>str</em><em>, </em><em>optional</em>) – “upper”, “lower” or “any” (no conversion). Defaults to “any”.</p></li>
<li><p><strong>sep</strong> (<em>str</em><em>, </em><em>optional</em>) – Separator to use when concatenating a list. Defaults to “”</p></li>
<li><p><strong>digestlen</strong> (<em>int</em><em>, </em><em>optional</em>) – If a label is truncated, the length of the digest to include in the label. 0 to disable.
Default: 3 or 2 if max &lt; 32</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-unfurl.tosca_plugins.expr">
<span id="eval-expression-functions"></span><h3><a class="toc-backref" href="#id12">Eval Expression Functions</a><a class="headerlink" href="#module-unfurl.tosca_plugins.expr" title="Permalink to this headline"></a></h3>
<p>Type-safe equivalents to Unfurl’s Eval <a class="reference internal" href="expressions.html#id2"><span class="std std-ref">Expression Functions</span></a>.</p>
<p>When called in <a class="reference internal" href="#tosca.global_state_mode" title="tosca.global_state_mode"><code class="xref any py py-func docutils literal notranslate"><span class="pre">&quot;parse&quot;</span> <span class="pre">mode</span></code></a> (e.g. as part of a class definition or in <code class="docutils literal notranslate"><span class="pre">_class_init_</span></code>) they will return eval expression
that will get executed. But note that the type signature will match the result of the expression, not the eval expression itself.
(This type punning enables effective static type checking).</p>
<p>When called in runtime mode (ie. as a computed property or as operation implementation) they perform the equivalent functionality.</p>
<p>These functions can be executed in the safe mode Python sandbox as it always executes in “parse” mode.</p>
<p>Note that some functions are overloaded with two signatures,
One that takes a live ToscaType object as an argument and one that takes <code class="docutils literal notranslate"><span class="pre">None</span></code> in its place.</p>
<p>The former variant can only be used in runtime mode as live objects are not available outside that mode.
In “parse” mode, the None variant must be used and at runtime the eval expression returned by that function
will be evaluated using the current context’s instance.</p>
<p>User-defined functions can be made available as an expression functions by the <a class="reference internal" href="#unfurl.tosca_plugins.expr.runtime_func" title="unfurl.tosca_plugins.expr.runtime_func"><code class="xref any py py-func docutils literal notranslate"><span class="pre">runtime_func</span></code></a> decorator.</p>
<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.abspath">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">abspath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tosca.ToscaType" title="tosca.ToscaType"><span class="pre">ToscaType</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relativeTo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mkdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FilePath</span></span></span><a class="headerlink" href="#unfurl.tosca_plugins.expr.abspath" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">abspath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relativeTo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mkdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.and_expr">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">and_expr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">left</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.and_expr" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<em>unfurl.tosca_plugins.expr.T</em>) – </p></li>
<li><p><strong>right</strong> (<em>unfurl.tosca_plugins.expr.U</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Union</em>[unfurl.tosca_plugins.expr.T, unfurl.tosca_plugins.expr.U]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.as_bool">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">as_bool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.as_bool" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.concat">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">concat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.concat" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.find_connection">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">find_connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rel_type=&lt;class</span> <span class="pre">'tosca.builtin_types.relationships.ConnectsTo'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.find_connection" title="Permalink to this definition"></a></dt>
<dd><p>Type-safe wrapper around the <a class="reference internal" href="expressions.html#find-connection"><span class="std std-ref">find_connection</span></a> eval expression function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#tosca.Node" title="tosca._tosca.Node"><em>tosca._tosca.Node</em></a><em>]</em>) – </p></li>
<li><p><strong>rel_type</strong> (<em>Type</em><em>[</em><em>unfurl.tosca_plugins.expr.RI</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[unfurl.tosca_plugins.expr.RI]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.get_context">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_context</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.get_context" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<a class="reference internal" href="#tosca.ToscaType" title="tosca._tosca.ToscaType"><em>tosca._tosca.ToscaType</em></a>) – </p></li>
<li><p><strong>kw</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#unfurl.eval.RefContext" title="unfurl.eval.RefContext">unfurl.eval.RefContext</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.get_dir">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tosca.ToscaType" title="tosca.ToscaType"><span class="pre">ToscaType</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">relativeTo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mkdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FilePath</span></span></span><a class="headerlink" href="#unfurl.tosca_plugins.expr.get_dir" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relativeTo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mkdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.get_ensemble_metadata">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_ensemble_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#unfurl.tosca_plugins.expr.get_ensemble_metadata" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_ensemble_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.get_env">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#unfurl.tosca_plugins.expr.get_env" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.get_input">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TI</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TI</span></span></span><a class="headerlink" href="#unfurl.tosca_plugins.expr.get_input" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.get_instance">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_instance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tosca.Node" title="tosca.Node"><span class="pre">Node</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">NodeInstance</span></span></span><a class="headerlink" href="#unfurl.tosca_plugins.expr.get_instance" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_instance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tosca.Relationship" title="tosca.Relationship"><span class="pre">Relationship</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RelationshipInstance</span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_instance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tosca.ArtifactEntity" title="tosca.ArtifactEntity"><span class="pre">ArtifactEntity</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ArtifactInstance</span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_instance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tosca.CapabilityEntity" title="tosca.CapabilityEntity"><span class="pre">CapabilityEntity</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CapabilityInstance</span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_instance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tosca.ToscaType" title="tosca.ToscaType"><span class="pre">ToscaType</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">EntityInstance</span></span></span></dt>
<dd><p>Returns the instance the given TOSCA template is proxying.
If not in <a class="reference internal" href="#tosca.global_state_mode" title="tosca.global_state_mode"><code class="xref any py py-func docutils literal notranslate"><span class="pre">&quot;runtime&quot;</span> <span class="pre">mode</span></code></a> or the template is not proxying an instance an exception is raised.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.get_instance_maybe">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_instance_maybe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tosca.Node" title="tosca.Node"><span class="pre">Node</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">NodeInstance</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#unfurl.tosca_plugins.expr.get_instance_maybe" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_instance_maybe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tosca.Relationship" title="tosca.Relationship"><span class="pre">Relationship</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">RelationshipInstance</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_instance_maybe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tosca.ArtifactEntity" title="tosca.ArtifactEntity"><span class="pre">ArtifactEntity</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ArtifactInstance</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_instance_maybe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tosca.CapabilityEntity" title="tosca.CapabilityEntity"><span class="pre">CapabilityEntity</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">CapabilityInstance</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_instance_maybe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tosca.ToscaType" title="tosca.ToscaType"><span class="pre">ToscaType</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">EntityInstance</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>In <a class="reference internal" href="#tosca.global_state_mode" title="tosca.global_state_mode"><code class="xref any py py-func docutils literal notranslate"><span class="pre">&quot;runtime&quot;</span> <span class="pre">mode</span></code></a> return the instance the given TOSCA template is proxying,
otherwise return None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.get_nodes_of_type">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">get_nodes_of_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.get_nodes_of_type" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cls</strong> (<em>Type</em><em>[</em><a class="reference internal" href="#tosca.ToscaType" title="tosca._tosca.ToscaType"><em>tosca._tosca.ToscaType</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.has_env">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">has_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.has_env" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.if_expr">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">if_expr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">if_cond</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">then</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">otherwise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.if_expr" title="Permalink to this definition"></a></dt>
<dd><p>Returns an eval expression like:</p>
<p><code class="docutils literal notranslate"><span class="pre">{&quot;eval&quot;:</span> <span class="pre">{&quot;if&quot;:</span> <span class="pre">if_cond,</span> <span class="pre">&quot;then&quot;:</span> <span class="pre">then,</span> <span class="pre">&quot;else&quot;:</span> <span class="pre">otherwise}</span></code></p>
<p>This will not evaluate at <a class="reference internal" href="#tosca.global_state_mode" title="tosca.global_state_mode"><code class="xref any py py-func docutils literal notranslate"><span class="pre">runtime</span> <span class="pre">mode</span></code></a> because all arguments will evaluated
before calling this function, defeating eval expressions’ (and Python’s) short-circuit semantics.
To avoid unexpected behavior, an error will be raised if invoked during runtime mode.
Instead just use a Python ‘if’ statement or expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>then</strong> (<em>unfurl.tosca_plugins.expr.T</em>) – </p></li>
<li><p><strong>otherwise</strong> (<em>unfurl.tosca_plugins.expr.U</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Union</em>[unfurl.tosca_plugins.expr.T, unfurl.tosca_plugins.expr.U]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.lookup">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.lookup" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.not_">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">not_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.not_" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.or_expr">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">or_expr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">left</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.or_expr" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<em>unfurl.tosca_plugins.expr.T</em>) – </p></li>
<li><p><strong>right</strong> (<em>unfurl.tosca_plugins.expr.U</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Union</em>[unfurl.tosca_plugins.expr.T, unfurl.tosca_plugins.expr.U]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.read">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.read" title="Permalink to this definition"></a></dt>
<dd><p>Equivalent to an <a class="reference internal" href="expressions.html#file"><span class="std std-ref">file</span></a> eval expression like:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">eval</span><span class="p">:</span>
<span class="w">  </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$path</span>
<span class="w">  </span><span class="nt">encoding</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$encoding</span>
<span class="nt">select</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">contents</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – </p></li>
<li><p><strong>encoding</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Union</em>[str, bytes]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.runtime_func">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">runtime_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">F</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">F</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#unfurl.tosca_plugins.expr.runtime_func" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">runtime_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">F</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">F</span></span></span></dt>
<dd><p>A decorator for making a function invocable as a runtime expression.
When the decorated function invoked in <a class="reference internal" href="#tosca.global_state_mode" title="tosca.global_state_mode"><code class="xref any py py-func docutils literal notranslate"><span class="pre">&quot;parse&quot;</span> <span class="pre">mode</span></code></a>, if any of its arguments contain <a class="reference internal" href="#tosca.EvalData" title="tosca.EvalData"><code class="xref py py-class docutils literal notranslate"><span class="pre">tosca.EvalData</span></code></a>,
then the function will return <a class="reference internal" href="#tosca.EvalData" title="tosca.EvalData"><code class="xref py py-class docutils literal notranslate"><span class="pre">tosca.EvalData</span></code></a> containing a JSON representation of the invocation as an <a class="reference internal" href="expressions.html#id2"><span class="std std-ref">expression function</span></a> that will be evaluated at runtime.
Otherwise, the function will eagerly execute as a normal Python function.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.super">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">super</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.super" title="Permalink to this definition"></a></dt>
<dd><p>Equivalent to the <a class="reference internal" href="expressions.html#special-keys"><span class="std std-ref">.super</span></a> eval expression key.
Returns a map of the current instances’s attributes as a view of its nearest inherited type.
(Python’s super() won’t work in <a class="reference internal" href="#tosca.global_state_mode" title="tosca.global_state_mode"><code class="xref any py py-func docutils literal notranslate"><span class="pre">&quot;runtime&quot;</span> <span class="pre">mode</span></code></a> when proxying an instance.)</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Base</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="n">prop</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Derived</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_prop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;prepend-&quot;</span> <span class="o">+</span> <span class="n">expr</span><span class="o">.</span><span class="n">super</span><span class="p">()[</span><span class="s2">&quot;prop&quot;</span><span class="p">]</span>

    <span class="n">prop</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Eval</span><span class="p">(</span><span class="n">_prop</span><span class="p">)</span>  <span class="c1"># evaluates to &quot;prepend-default&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>MutableMapping</em>[str, <em>Any</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.tempfile">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">tempfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.tempfile" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>contents</strong> (<em>Any</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.template">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contents</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overrides</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.template" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#tosca.ToscaType" title="tosca._tosca.ToscaType"><em>tosca._tosca.ToscaType</em></a><em>]</em>) – </p></li>
<li><p><strong>path</strong> (<em>str</em>) – </p></li>
<li><p><strong>contents</strong> (<em>str</em>) – </p></li>
<li><p><strong>overrides</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>vars</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.to_env">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">to_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_os_environ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.to_env" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Dict</em>[str, str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.token">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">token</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.token" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> (<em>str</em>) – </p></li>
<li><p><strong>token</strong> (<em>str</em>) – </p></li>
<li><p><strong>index</strong> (<em>int</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.uri">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">uri</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.uri" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#tosca.ToscaType" title="tosca._tosca.ToscaType"><em>tosca._tosca.ToscaType</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.tosca_plugins.expr.validate">
<span class="sig-prename descclassname"><span class="pre">unfurl.tosca_plugins.expr.</span></span><span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.tosca_plugins.expr.validate" title="Permalink to this definition"></a></dt>
<dd><p>Return a <a class="reference internal" href="#tosca.Options" title="tosca.Options"><code class="xref any py py-class docutils literal notranslate"><span class="pre">tosca.Options</span></code></a> that adds custom validation to the property or attribute definition.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">validate_pw</span><span class="p">(</span><span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
  <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Test</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
  <span class="n">password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">tosca</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">expr</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">validate_pw</span><span class="p">)</span> <span class="o">|</span> <span class="n">expr</span><span class="o">.</span><span class="n">sensitive</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>factory</strong> (<em>Callable</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#tosca.Options" title="tosca._fields.Options">tosca._fields.Options</a></p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="api-for-writing-configurators">
<h2><a class="toc-backref" href="#id13">API for writing configurators</a><a class="headerlink" href="#api-for-writing-configurators" title="Permalink to this headline"></a></h2>
<section id="module-unfurl.configurator">
<span id="configurators"></span><h3><a class="toc-backref" href="#id14">Configurators</a><a class="headerlink" href="#module-unfurl.configurator" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.configurator.</span></span><span class="sig-name descname"><span class="pre">Configurator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.Configurator" title="Permalink to this definition"></a></dt>
<dd><p>Base class for implementing <a class="reference internal" href="glossary.html#configurators"><span class="std std-ref">Configurators</span></a>.
Subclasses should at least implement a <a class="reference internal" href="#unfurl.configurator.Configurator.run" title="unfurl.configurator.Configurator.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a>, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MinimalConfigurator</span><span class="p">(</span><span class="n">Configurator</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_run</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Status</span><span class="o">.</span><span class="n">ok</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<a class="reference internal" href="#tosca.ToscaInputs" title="tosca._tosca.ToscaInputs"><em>tosca._tosca.ToscaInputs</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator.attribute_output_metadata_key">
<span class="sig-name descname"><span class="pre">attribute_output_metadata_key</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#unfurl.configurator.Configurator.attribute_output_metadata_key" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator.can_dry_run">
<span class="sig-name descname"><span class="pre">can_dry_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.Configurator.can_dry_run" title="Permalink to this definition"></a></dt>
<dd><p>Returns whether this configurator can handle a dry-runs for the given task.
(And should check <a class="reference internal" href="#unfurl.configurator.TaskView.dry_run" title="unfurl.configurator.TaskView.dry_run"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TaskView.dry_run</span></code></a> in during run().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference internal" href="#unfurl.configurator.TaskView" title="unfurl.configurator.TaskView"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TaskView</span></code></a>) – The task about to be run.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bool</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator.can_run">
<span class="sig-name descname"><span class="pre">can_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.Configurator.can_run" title="Permalink to this definition"></a></dt>
<dd><p>Return whether or not the configurator can execute the given task
depending on if this configurator support the requested action and parameters
and given the current state of the target instance?
Called right before running the task, so the task will have already been rendered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference internal" href="#unfurl.configurator.TaskView" title="unfurl.configurator.TaskView"><code class="xref py py-class docutils literal notranslate"><span class="pre">TaskView</span></code></a>) – The task that is about to be run.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Should return True or a message describing why the task couldn’t be run.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(bool or str)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator.check_digest">
<span class="sig-name descname"><span class="pre">check_digest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">changeset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.Configurator.check_digest" title="Permalink to this definition"></a></dt>
<dd><p>Examine the previous <code class="xref py py-class docutils literal notranslate"><span class="pre">ChangeRecord</span></code> generated by the previous time this operation
was performed on the target instance and return whether it should be rerun or not.</p>
<p>The default implementation recalculates the digest of input parameters that
were accessed in the previous run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="#unfurl.configurator.TaskView" title="unfurl.configurator.TaskView"><code class="xref py py-class docutils literal notranslate"><span class="pre">TaskView</span></code></a>) – The task that might execute this operation.</p></li>
<li><p><strong>changeset</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ChangeRecordRecord</span></code>) – The task that might execute this operation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if configuration’s digest has changed, False if it is the same.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator.exclude_from_digest">
<span class="sig-name descname"><span class="pre">exclude_from_digest</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">()</span></em><a class="headerlink" href="#unfurl.configurator.Configurator.exclude_from_digest" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator.get_dry_run">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_dry_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.Configurator.get_dry_run" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template</strong> (<em>unfurl.spec.EntitySpec</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator.get_generator">
<span class="sig-name descname"><span class="pre">get_generator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.Configurator.get_generator" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference internal" href="#unfurl.configurator.TaskView" title="unfurl.configurator.TaskView"><em>unfurl.configurator.TaskView</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Generator</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator.render">
<span class="sig-name descname"><span class="pre">render</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.Configurator.render" title="Permalink to this definition"></a></dt>
<dd><p>This method is called during the planning phase to give the configurator an
opportunity to do early validation and error detection and generate any plan information or configuration files that the user may want to review before the running the deployment task.</p>
<p>Property access and writes will be tracked and used to establish dynamic dependencies between instances so the plan can be ordered properly. Any updates made to instances maybe reverted if it has dependencies on attributes that might be changed later in the plan, so this method should be idempotent.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The value returned here will subsequently be available as <code class="docutils literal notranslate"><span class="pre">task.rendered</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><p><strong>task</strong> (<a class="reference internal" href="#unfurl.configurator.TaskView" title="unfurl.configurator.TaskView"><em>unfurl.configurator.TaskView</em></a>) – </p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.Configurator.run" title="Permalink to this definition"></a></dt>
<dd><p>Subclasses of Configurator need to implement this method.
It should perform the operation specified in the <code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationSpec</span></code>
on the <code class="xref py py-obj docutils literal notranslate"><span class="pre">task.target</span></code>. It can be either a generator that yields one or more <a class="reference internal" href="#unfurl.configurator.JobRequest" title="unfurl.configurator.JobRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">JobRequest</span></code></a> or <a class="reference internal" href="#unfurl.configurator.TaskRequest" title="unfurl.configurator.TaskRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">TaskRequest</span></code></a>
or a regular function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference internal" href="#unfurl.configurator.TaskView" title="unfurl.configurator.TaskView"><code class="xref py py-class docutils literal notranslate"><span class="pre">TaskView</span></code></a>) – The task currently running.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p>Optionally <code class="docutils literal notranslate"><span class="pre">run</span></code> can yield either a <a class="reference internal" href="#unfurl.configurator.JobRequest" title="unfurl.configurator.JobRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">JobRequest</span></code></a>, <a class="reference internal" href="#unfurl.configurator.TaskRequest" title="unfurl.configurator.TaskRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">TaskRequest</span></code></a> to run subtasks
and finally a <a class="reference internal" href="#unfurl.configurator.ConfiguratorResult" title="unfurl.configurator.ConfiguratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfiguratorResult</span></code></a> when done</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>If <code class="docutils literal notranslate"><span class="pre">run</span></code> is not defined as a generator it must return either a <a class="reference internal" href="#unfurl.support.Status" title="unfurl.support.Status"><code class="xref py py-class docutils literal notranslate"><span class="pre">Status</span></code></a>, a <code class="docutils literal notranslate"><span class="pre">bool</span></code> or a <a class="reference internal" href="#unfurl.configurator.ConfiguratorResult" title="unfurl.configurator.ConfiguratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfiguratorResult</span></code></a> to indicate if the task succeeded and any changes to the target’s state.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Union</em>[<em>Generator</em>, <a class="reference internal" href="#unfurl.configurator.ConfiguratorResult" title="unfurl.configurator.ConfiguratorResult">unfurl.configurator.ConfiguratorResult</a>, <a class="reference internal" href="#unfurl.support.Status" title="unfurl.support.Status">unfurl.support.Status</a>, bool, <a class="reference internal" href="#tosca.ToscaOutputs" title="tosca._tosca.ToscaOutputs">tosca._tosca.ToscaOutputs</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator.save_digest">
<span class="sig-name descname"><span class="pre">save_digest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.Configurator.save_digest" title="Permalink to this definition"></a></dt>
<dd><p>Generate a compact, deterministic representation of the current configuration.
This is saved in the job log and used by <a class="reference internal" href="#unfurl.configurator.Configurator.check_digest" title="unfurl.configurator.Configurator.check_digest"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">check_digest</span></code></a> in subsequent jobs to
determine if the configuration changed the operation needs to be re-run.</p>
<p>The default implementation calculates a SHA1 digest of the values of the inputs
that where accessed while that task was run, with the exception of
the input parameters listed in <a class="reference internal" href="#unfurl.configurator.Configurator.exclude_from_digest" title="unfurl.configurator.Configurator.exclude_from_digest"><code class="xref any py py-attr docutils literal notranslate"><span class="pre">exclude_from_digest</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference internal" href="#unfurl.configurator.TaskView" title="unfurl.configurator.TaskView"><code class="xref py py-class docutils literal notranslate"><span class="pre">TaskView</span></code></a>) – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary whose keys are strings that start with “digest”</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator.set_config_spec_args">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_config_spec_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.Configurator.set_config_spec_args" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kw</strong> (<em>dict</em>) – </p></li>
<li><p><strong>template</strong> (<em>unfurl.spec.EntitySpec</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator.short_name">
<span class="sig-name descname"><span class="pre">short_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#unfurl.configurator.Configurator.short_name" title="Permalink to this definition"></a></dt>
<dd><p>shortName can be used to customize the “short name” of the configurator
as an alternative to using the full name (“module.class”) when setting the implementation on an operation.
(Titlecase recommended)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.Configurator.should_run">
<span class="sig-name descname"><span class="pre">should_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.Configurator.should_run" title="Permalink to this definition"></a></dt>
<dd><p>Does this configuration need to be run? Called before rendering the task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference internal" href="#unfurl.configurator.TaskView" title="unfurl.configurator.TaskView"><em>unfurl.configurator.TaskView</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Union</em>[bool, <a class="reference internal" href="#unfurl.support.Priority" title="unfurl.support.Priority">unfurl.support.Priority</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.configurator.ConfiguratorResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.configurator.</span></span><span class="sig-name descname"><span class="pre">ConfiguratorResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">success</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modified</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.ConfiguratorResult" title="Permalink to this definition"></a></dt>
<dd><p>Represents the result of a task that ran.</p>
<p>See <a class="reference internal" href="#unfurl.configurator.TaskView.done" title="unfurl.configurator.TaskView.done"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TaskView.done()</span></code></a> for more documentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>success</strong> (<em>bool</em>) – </p></li>
<li><p><strong>modified</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – </p></li>
<li><p><strong>status</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.support.Status" title="unfurl.support.Status"><em>unfurl.support.Status</em></a><em>]</em>) – </p></li>
<li><p><strong>result</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>dict</em><em>, </em><em>str</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>outputs</strong> (<em>Optional</em><em>[</em><em>dict</em><em>]</em>) – </p></li>
<li><p><strong>exception</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.util.UnfurlTaskError" title="unfurl.util.UnfurlTaskError"><em>unfurl.util.UnfurlTaskError</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.configurator.JobRequest">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.configurator.</span></span><span class="sig-name descname"><span class="pre">JobRequest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resources</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.JobRequest" title="Permalink to this definition"></a></dt>
<dd><p>Yield this to run a child job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resources</strong> (<em>List</em><em>[</em><em>unfurl.runtime.EntityInstance</em><em>]</em>) – </p></li>
<li><p><strong>errors</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><a class="reference internal" href="#unfurl.util.UnfurlError" title="unfurl.util.UnfurlError"><em>unfurl.util.UnfurlError</em></a><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.JobRequest.get_instance_specs">
<span class="sig-name descname"><span class="pre">get_instance_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.JobRequest.get_instance_specs" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.configurator.JobRequest.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#unfurl.configurator.JobRequest.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.configurator.JobRequest.root">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">root</span></span><a class="headerlink" href="#unfurl.configurator.JobRequest.root" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.JobRequest.set_error">
<span class="sig-name descname"><span class="pre">set_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.JobRequest.set_error" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> (<em>str</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.configurator.JobRequest.target">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">target</span></span><a class="headerlink" href="#unfurl.configurator.JobRequest.target" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.configurator.TaskRequest">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.configurator.</span></span><span class="sig-name descname"><span class="pre">TaskRequest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configSpec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">persist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startState</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskRequest" title="Permalink to this definition"></a></dt>
<dd><p>Yield this to run a child task. (see <a class="reference internal" href="#unfurl.configurator.TaskView.create_sub_task" title="unfurl.configurator.TaskView.create_sub_task"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unfurl.configurator.TaskView.create_sub_task()</span></code></a>)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configSpec</strong> (<em>unfurl.planrequests.ConfigurationSpec</em>) – </p></li>
<li><p><strong>target</strong> (<em>unfurl.runtime.EntityInstance</em>) – </p></li>
<li><p><strong>reason</strong> (<em>str</em>) – </p></li>
<li><p><strong>persist</strong> (<em>bool</em>) – </p></li>
<li><p><strong>required</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – </p></li>
<li><p><strong>startState</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.support.NodeState" title="unfurl.support.NodeState"><em>unfurl.support.NodeState</em></a><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="unfurl.configurator.TaskRequest.completed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">completed</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#unfurl.configurator.TaskRequest.completed" title="Permalink to this definition"></a></dt>
<dd><p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskRequest.finish_workflow">
<span class="sig-name descname"><span class="pre">finish_workflow</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskRequest.finish_workflow" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskRequest.get_operation_artifacts">
<span class="sig-name descname"><span class="pre">get_operation_artifacts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskRequest.get_operation_artifacts" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>List</em>[<a class="reference internal" href="#unfurl.configurator.JobRequest" title="unfurl.planrequests.JobRequest">unfurl.planrequests.JobRequest</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.configurator.TaskRequest.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#unfurl.configurator.TaskRequest.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskRequest.reassign_final_for_workflow">
<span class="sig-name descname"><span class="pre">reassign_final_for_workflow</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskRequest.reassign_final_for_workflow" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Optional</em>[<a class="reference internal" href="#unfurl.configurator.TaskRequest" title="unfurl.planrequests.TaskRequest">unfurl.planrequests.TaskRequest</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.configurator.</span></span><span class="sig-name descname"><span class="pre">TaskView</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configSpec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dependencies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView" title="Permalink to this definition"></a></dt>
<dd><p>The interface presented to configurators.</p>
<p>The following public attributes are available:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>manifest</strong> (<em>Manifest</em>) – </p></li>
<li><p><strong>configSpec</strong> (<em>unfurl.planrequests.ConfigurationSpec</em>) – </p></li>
<li><p><strong>target</strong> (<em>unfurl.runtime.EntityInstance</em>) – </p></li>
<li><p><strong>reason</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>dependencies</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><a class="reference internal" href="#unfurl.runtime.Operational" title="unfurl.runtime.Operational"><em>Operational</em></a><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.target">
<span class="sig-name descname"><span class="pre">target</span></span><a class="headerlink" href="#unfurl.configurator.TaskView.target" title="Permalink to this definition"></a></dt>
<dd><p>The instance this task is operating on.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.configSpec">
<span class="sig-name descname"><span class="pre">configSpec</span></span><a class="headerlink" href="#unfurl.configurator.TaskView.configSpec" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>ConfigurationSpec</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.reason">
<span class="sig-name descname"><span class="pre">reason</span></span><a class="headerlink" href="#unfurl.configurator.TaskView.reason" title="Permalink to this definition"></a></dt>
<dd><p>The reason this operation was planned. See <a class="reference internal" href="#unfurl.support.Reason" title="unfurl.support.Reason"><code class="xref py py-class docutils literal notranslate"><span class="pre">Reason</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.cwd">
<span class="sig-name descname"><span class="pre">cwd</span></span><a class="headerlink" href="#unfurl.configurator.TaskView.cwd" title="Permalink to this definition"></a></dt>
<dd><p>Current working directory</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.dry_run">
<span class="sig-name descname"><span class="pre">dry_run</span></span><a class="headerlink" href="#unfurl.configurator.TaskView.dry_run" title="Permalink to this definition"></a></dt>
<dd><p>Dry run only</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.verbose">
<span class="sig-name descname"><span class="pre">verbose</span></span><a class="headerlink" href="#unfurl.configurator.TaskView.verbose" title="Permalink to this definition"></a></dt>
<dd><p>Verbosity level set for this job (-1 error, 0 normal, 1 verbose, 2 debug)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.add_dependency">
<span class="sig-name descname"><span class="pre">add_dependency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wantList</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.add_dependency" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expr</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>collections.abc.Mapping</em><em>]</em>) – </p></li>
<li><p><strong>expected</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>list</em><em>, </em><em>unfurl.result.ResultsList</em><em>, </em><em>unfurl.result.Result</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>schema</strong> (<em>Optional</em><em>[</em><em>collections.abc.Mapping</em><em>]</em>) – </p></li>
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>required</strong> (<em>bool</em>) – </p></li>
<li><p><strong>wantList</strong> (<em>bool</em>) – </p></li>
<li><p><strong>target</strong> (<em>Optional</em><em>[</em><em>unfurl.runtime.EntityInstance</em><em>]</em>) – </p></li>
<li><p><strong>write_only</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>unfurl.configurator.Dependency</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.add_message">
<span class="sig-name descname"><span class="pre">add_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.add_message" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<em>object</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.apply_work_folders">
<span class="sig-name descname"><span class="pre">apply_work_folders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.apply_work_folders" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>names</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.connections">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connections</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">unfurl.configurator._ConnectionsMap</span></em><a class="headerlink" href="#unfurl.configurator.TaskView.connections" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.create_sub_task">
<span class="sig-name descname"><span class="pre">create_sub_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">operation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resource</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">persist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.create_sub_task" title="Permalink to this definition"></a></dt>
<dd><p>Create a subtask that will be executed if yielded by <a class="reference internal" href="#unfurl.configurator.Configurator.run" title="unfurl.configurator.Configurator.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unfurl.configurator.Configurator.run()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>operation</strong> (<em>str</em>) – The operation call (like <code class="docutils literal notranslate"><span class="pre">interface.operation</span></code>)</p></li>
<li><p><strong>resource</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">NodeInstance</span></code>) – </p></li>
<li><p><strong>inputs</strong> (<em>Optional</em><em>[</em><em>dict</em><em>]</em>) – </p></li>
<li><p><strong>persist</strong> (<em>bool</em>) – </p></li>
<li><p><strong>required</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#unfurl.configurator.TaskRequest" title="unfurl.configurator.TaskRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">TaskRequest</span></code></a></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Optional</em>[<a class="reference internal" href="#unfurl.configurator.TaskRequest" title="unfurl.planrequests.TaskRequest">unfurl.planrequests.TaskRequest</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.discard_work_folders">
<span class="sig-name descname"><span class="pre">discard_work_folders</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.discard_work_folders" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.done">
<span class="sig-name descname"><span class="pre">done</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">success</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modified</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">captureException</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.done" title="Permalink to this definition"></a></dt>
<dd><p><a class="reference internal" href="#unfurl.configurator.Configurator.run" title="unfurl.configurator.Configurator.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unfurl.configurator.Configurator.run()</span></code></a> should call this method and return or yield its return value before terminating.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">yield</span> <span class="n">task</span><span class="o">.</span><span class="n">done</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>success</strong> (<em>bool</em>) – indicates if this operation completed without an error.</p></li>
<li><p><strong>modified</strong> (<em>bool</em>) – (optional) indicates whether the physical instance was modified by this operation.</p></li>
<li><p><strong>status</strong> (<a class="reference internal" href="#unfurl.support.Status" title="unfurl.support.Status"><em>Status</em></a>) – (optional) should be set if the operation changed the operational status of the target instance.
If not specified, the runtime will updated the instance status as needed, based
the operation preformed and observed changes to the instance (attributes changed).</p></li>
<li><p><strong>result</strong> (<em>dict</em>) – (optional) A dictionary that will be serialized as YAML into the changelog, can contain any useful data about these operation.</p></li>
<li><p><strong>outputs</strong> (<em>dict</em>) – (optional) Operation outputs, as specified in the topology template.</p></li>
<li><p><strong>captureException</strong> (<em>Optional</em><em>[</em><em>object</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#unfurl.configurator.ConfiguratorResult" title="unfurl.configurator.ConfiguratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfiguratorResult</span></code></a></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#unfurl.configurator.ConfiguratorResult" title="unfurl.configurator.ConfiguratorResult">unfurl.configurator.ConfiguratorResult</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.environ">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">environ</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#unfurl.configurator.TaskView.environ" title="Permalink to this definition"></a></dt>
<dd><p>The environment variables for this task.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>cached copy of <a class="reference internal" href="#unfurl.configurator.TaskView.get_environment" title="unfurl.configurator.TaskView.get_environment"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">self.get_environment(False)</span></code></a></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Dict[str, str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.fail_work_folders">
<span class="sig-name descname"><span class="pre">fail_work_folders</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.fail_work_folders" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.find_connection">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">find_connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ctx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tosca.relationships.ConnectsTo'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.find_connection" title="Permalink to this definition"></a></dt>
<dd><p>Find a relationship that this task can use to connect to the given instance.
First look for relationship between the task’s target instance and the given instance.
If none is found, see if there a default connection of the given type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>NodeInstance</em>) – The instance to connect to.</p></li>
<li><p><strong>relation</strong> (<em>str</em><em>, </em><em>optional</em>) – The relationship type. Defaults to <code class="docutils literal notranslate"><span class="pre">tosca.relationships.ConnectsTo</span></code>.</p></li>
<li><p><strong>ctx</strong> (<a class="reference internal" href="#unfurl.eval.RefContext" title="unfurl.eval.RefContext"><em>unfurl.eval.RefContext</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The connection instance.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>RelationshipInstance or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.find_instance">
<span class="sig-name descname"><span class="pre">find_instance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.find_instance" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[unfurl.runtime.NodeInstance]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.get_environment">
<span class="sig-name descname"><span class="pre">get_environment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">addOnly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.get_environment" title="Permalink to this definition"></a></dt>
<dd><p>Return a dictionary of environment variables applicable to this task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>addOnly</strong> (<em>bool</em>) – If addOnly is False all variables in the current os environment will be included
otherwise only variables added will be included.</p></li>
<li><p><strong>env</strong> (<em>Optional</em><em>[</em><em>dict</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict:</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<p>See <a class="reference internal" href="runtime.html#environment-variables"><span class="std std-ref">Environment Variables</span></a> for a description of how the environment variables are determined.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.get_settings">
<span class="sig-name descname"><span class="pre">get_settings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.get_settings" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.get_work_folder">
<span class="sig-name descname"><span class="pre">get_work_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.get_work_folder" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>location</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#unfurl.projectpaths.WorkFolder" title="unfurl.projectpaths.WorkFolder">unfurl.projectpaths.WorkFolder</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.inputs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">inputs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">unfurl.result.ResultsMap</span></em><a class="headerlink" href="#unfurl.configurator.TaskView.inputs" title="Permalink to this definition"></a></dt>
<dd><p>Exposes inputs and task settings as expression variables, so they can be accessed like:</p>
<p>eval: $inputs::param</p>
<p>or in jinja2 templates:</p>
<p>{{ inputs.param }}</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.query">
<span class="sig-name descname"><span class="pre">query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dependency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wantList</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">throw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.query" title="Permalink to this definition"></a></dt>
<dd><p>Executes a query using this task’s current context and returns the result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>dict</em><em>]</em>) – The query to be executed. Can be a string or a dictionary.</p></li>
<li><p><strong>dependency</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, saves the query result as a dependency. Defaults to False.</p></li>
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – The name of the dependency. Defaults to None.</p></li>
<li><p><strong>required</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, marks the dependency as required. Defaults to False.</p></li>
<li><p><strong>wantList</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, expects the result to be a list. Defaults to False.</p></li>
<li><p><strong>strict</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, enforces strict resolution rules. Defaults to True.</p></li>
<li><p><strong>vars</strong> (<em>Optional</em><em>[</em><em>dict</em><em>]</em><em>, </em><em>optional</em>) – Variables to be added to the query context. Defaults to None.</p></li>
<li><p><strong>throw</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, raises an exception on error, otherwise add to task errors and returns None. Defaults to False.</p></li>
<li><p><strong>trace</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em><em>, </em><em>optional</em>) – Trace level for debugging. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The result of the query, which can be of various types
depending on the query and options provided. Returns None if an error occurs and throw is False.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[Any, Result, List[Result], None]</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>Exception</strong> – If an error occurs during query evaluation and throw is True.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.remove_dependency">
<span class="sig-name descname"><span class="pre">remove_dependency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.remove_dependency" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[unfurl.configurator.Dependency]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.restore_envvars">
<span class="sig-name descname"><span class="pre">restore_envvars</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.restore_envvars" title="Permalink to this definition"></a></dt>
<dd><p>Restore the os.environ to the environment’s state before this task ran.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.sensitive">
<span class="sig-name descname"><span class="pre">sensitive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.sensitive" title="Permalink to this definition"></a></dt>
<dd><p>Mark the given value as sensitive. Sensitive values will be encrypted or redacted when outputed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A copy of the value converted the appropriate subtype of <a class="reference internal" href="#unfurl.logs.sensitive" title="unfurl.logs.sensitive"><code class="xref py py-class docutils literal notranslate"><span class="pre">unfurl.logs.sensitive</span></code></a> value or the value itself if it can’t be converted.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#unfurl.logs.sensitive" title="unfurl.logs.sensitive">sensitive</a></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>object</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.set_envvars">
<span class="sig-name descname"><span class="pre">set_envvars</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.set_envvars" title="Permalink to this definition"></a></dt>
<dd><p>Update os.environ with the task’s environment variables and save the current one so it can be restored by <a class="reference internal" href="#unfurl.configurator.TaskView.restore_envvars" title="unfurl.configurator.TaskView.restore_envvars"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">restore_envvars</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.set_work_folder">
<span class="sig-name descname"><span class="pre">set_work_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'operation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preserve</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">always_apply</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.set_work_folder" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>location</strong> (<em>str</em>) – </p></li>
<li><p><strong>preserve</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – </p></li>
<li><p><strong>always_apply</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#unfurl.projectpaths.WorkFolder" title="unfurl.projectpaths.WorkFolder">unfurl.projectpaths.WorkFolder</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.update_instances">
<span class="sig-name descname"><span class="pre">update_instances</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instances</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.configurator.TaskView.update_instances" title="Permalink to this definition"></a></dt>
<dd><p>Notify Unfurl of new or changed instances made while the task is running.</p>
<p>This will queue a new child job if needed. To immediately run the child job based on the supplied spec, yield the returned JobRequest.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instances</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>List</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em><em>]</em>) – Either a list or a string that is parsed as YAML.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Tuple</em>[<em>Optional</em>[<a class="reference internal" href="#unfurl.configurator.JobRequest" title="unfurl.planrequests.JobRequest">unfurl.planrequests.JobRequest</a>], <em>List</em>[<a class="reference internal" href="#unfurl.util.UnfurlTaskError" title="unfurl.util.UnfurlTaskError">unfurl.util.UnfurlTaskError</a>]]</p>
</dd>
</dl>
<p>For example, this snipped creates a new instance and modifies the current target instance.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a new instance:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">name-of-new-instance</span>
<span class="w">  </span><span class="nt">parent</span><span class="p">:</span><span class="w">   </span><span class="l l-Scalar l-Scalar-Plain">HOST</span><span class="w"> </span><span class="c1"># or SELF or &lt;instance name&gt;</span>
<span class="w">  </span><span class="c1"># all other fields should match the YAML in an ensemble&#39;s status section</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aNodeTemplate</span>
<span class="w">  </span><span class="nt">attributes</span><span class="p">:</span>
<span class="w">     </span><span class="nt">anAttribute</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aValue</span>
<span class="w">  </span><span class="nt">readyState</span><span class="p">:</span>
<span class="w">    </span><span class="nt">local</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ok</span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">started</span>
<span class="c1"># modify an existing instance:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SELF</span>
<span class="w">  </span><span class="c1"># the following fields are supported (all are optional):</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aNodeTemplate</span>
<span class="w">  </span><span class="nt">attributes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">anAttribute</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aNewValue</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">  </span><span class="nt">artifacts</span><span class="p">:</span>
<span class="w">      </span><span class="nt">artifact1</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">  </span><span class="nt">readyState</span><span class="p">:</span>
<span class="w">    </span><span class="nt">local</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ok</span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">started</span>
<span class="w">  </span><span class="nt">protected</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">customized</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.configurator.TaskView.vars">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">vars</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span></em><a class="headerlink" href="#unfurl.configurator.TaskView.vars" title="Permalink to this definition"></a></dt>
<dd><p>A dictionary of the same variables that are available to expressions when evaluating inputs.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-unfurl.support"></span><p>Internal classes supporting the runtime.</p>
<dl class="py class">
<dt class="sig sig-object py" id="unfurl.support.NodeState">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.support.</span></span><span class="sig-name descname"><span class="pre">NodeState</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names=&lt;not</span> <span class="pre">given&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qualname=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.support.NodeState" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>An enumeration representing <a class="reference external" href="_static/TOSCA-Simple-Profile-YAML-v1.3-os-toc.html#_Toc50125214">TOSCA Node States</a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.NodeState.configured">
<span class="sig-name descname"><span class="pre">configured</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5</span></em><a class="headerlink" href="#unfurl.support.NodeState.configured" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.NodeState.configuring">
<span class="sig-name descname"><span class="pre">configuring</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></em><a class="headerlink" href="#unfurl.support.NodeState.configuring" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.NodeState.created">
<span class="sig-name descname"><span class="pre">created</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#unfurl.support.NodeState.created" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.NodeState.creating">
<span class="sig-name descname"><span class="pre">creating</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#unfurl.support.NodeState.creating" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.NodeState.deleted">
<span class="sig-name descname"><span class="pre">deleted</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">11</span></em><a class="headerlink" href="#unfurl.support.NodeState.deleted" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.NodeState.deleting">
<span class="sig-name descname"><span class="pre">deleting</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10</span></em><a class="headerlink" href="#unfurl.support.NodeState.deleting" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.NodeState.error">
<span class="sig-name descname"><span class="pre">error</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">12</span></em><a class="headerlink" href="#unfurl.support.NodeState.error" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.NodeState.initial">
<span class="sig-name descname"><span class="pre">initial</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#unfurl.support.NodeState.initial" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.NodeState.started">
<span class="sig-name descname"><span class="pre">started</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">7</span></em><a class="headerlink" href="#unfurl.support.NodeState.started" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.NodeState.starting">
<span class="sig-name descname"><span class="pre">starting</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">6</span></em><a class="headerlink" href="#unfurl.support.NodeState.starting" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.NodeState.stopped">
<span class="sig-name descname"><span class="pre">stopped</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">9</span></em><a class="headerlink" href="#unfurl.support.NodeState.stopped" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.NodeState.stopping">
<span class="sig-name descname"><span class="pre">stopping</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8</span></em><a class="headerlink" href="#unfurl.support.NodeState.stopping" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.support.Priority">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.support.</span></span><span class="sig-name descname"><span class="pre">Priority</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names=&lt;not</span> <span class="pre">given&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qualname=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.support.Priority" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Priority.critical">
<span class="sig-name descname"><span class="pre">critical</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#unfurl.support.Priority.critical" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Priority.ignore">
<span class="sig-name descname"><span class="pre">ignore</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#unfurl.support.Priority.ignore" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Priority.optional">
<span class="sig-name descname"><span class="pre">optional</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#unfurl.support.Priority.optional" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Priority.required">
<span class="sig-name descname"><span class="pre">required</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#unfurl.support.Priority.required" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.support.Reason">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.support.</span></span><span class="sig-name descname"><span class="pre">Reason</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names=&lt;not</span> <span class="pre">given&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qualname=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.support.Reason" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.add">
<span class="sig-name descname"><span class="pre">add</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'add'</span></em><a class="headerlink" href="#unfurl.support.Reason.add" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.check">
<span class="sig-name descname"><span class="pre">check</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'check'</span></em><a class="headerlink" href="#unfurl.support.Reason.check" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'connect'</span></em><a class="headerlink" href="#unfurl.support.Reason.connect" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.degraded">
<span class="sig-name descname"><span class="pre">degraded</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'degraded'</span></em><a class="headerlink" href="#unfurl.support.Reason.degraded" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.error">
<span class="sig-name descname"><span class="pre">error</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'error'</span></em><a class="headerlink" href="#unfurl.support.Reason.error" title="Permalink to this definition"></a></dt>
<dd><p>Synonym for repair. Deprecated.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.force">
<span class="sig-name descname"><span class="pre">force</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'force'</span></em><a class="headerlink" href="#unfurl.support.Reason.force" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.missing">
<span class="sig-name descname"><span class="pre">missing</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'missing'</span></em><a class="headerlink" href="#unfurl.support.Reason.missing" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.prune">
<span class="sig-name descname"><span class="pre">prune</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'prune'</span></em><a class="headerlink" href="#unfurl.support.Reason.prune" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.reconfigure">
<span class="sig-name descname"><span class="pre">reconfigure</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'reconfigure'</span></em><a class="headerlink" href="#unfurl.support.Reason.reconfigure" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.repair">
<span class="sig-name descname"><span class="pre">repair</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'repair'</span></em><a class="headerlink" href="#unfurl.support.Reason.repair" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.run">
<span class="sig-name descname"><span class="pre">run</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'run'</span></em><a class="headerlink" href="#unfurl.support.Reason.run" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'stop'</span></em><a class="headerlink" href="#unfurl.support.Reason.stop" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.subtask">
<span class="sig-name descname"><span class="pre">subtask</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'subtask'</span></em><a class="headerlink" href="#unfurl.support.Reason.subtask" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.undeploy">
<span class="sig-name descname"><span class="pre">undeploy</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'undeploy'</span></em><a class="headerlink" href="#unfurl.support.Reason.undeploy" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.update">
<span class="sig-name descname"><span class="pre">update</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'update'</span></em><a class="headerlink" href="#unfurl.support.Reason.update" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Reason.upgrade">
<span class="sig-name descname"><span class="pre">upgrade</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'upgrade'</span></em><a class="headerlink" href="#unfurl.support.Reason.upgrade" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.support.Status">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.support.</span></span><span class="sig-name descname"><span class="pre">Status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names=&lt;not</span> <span class="pre">given&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qualname=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.support.Status" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Status.absent">
<span class="sig-name descname"><span class="pre">absent</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5</span></em><a class="headerlink" href="#unfurl.support.Status.absent" title="Permalink to this definition"></a></dt>
<dd><p>Instance confirmed to not exist.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Status.degraded">
<span class="sig-name descname"><span class="pre">degraded</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#unfurl.support.Status.degraded" title="Permalink to this definition"></a></dt>
<dd><p>Instance is operational but in a degraded state.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Status.error">
<span class="sig-name descname"><span class="pre">error</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#unfurl.support.Status.error" title="Permalink to this definition"></a></dt>
<dd><p>Instance is not operational.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Status.ok">
<span class="sig-name descname"><span class="pre">ok</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#unfurl.support.Status.ok" title="Permalink to this definition"></a></dt>
<dd><p>Instance is operational</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Status.pending">
<span class="sig-name descname"><span class="pre">pending</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></em><a class="headerlink" href="#unfurl.support.Status.pending" title="Permalink to this definition"></a></dt>
<dd><p>Instance is being brought up or hasn’t been created yet.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.support.Status.unknown">
<span class="sig-name descname"><span class="pre">unknown</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#unfurl.support.Status.unknown" title="Permalink to this definition"></a></dt>
<dd><p>The operational state of the instance is unknown.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-unfurl.result"></span><dl class="py class">
<dt class="sig sig-object py" id="unfurl.result.ChangeRecord">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.result.</span></span><span class="sig-name descname"><span class="pre">ChangeRecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jobId</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startTime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taskId</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">previousId</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.result.ChangeRecord" title="Permalink to this definition"></a></dt>
<dd><p>A ChangeRecord represents a job or task in the change log file.
It consists of a change ID and named attributes.</p>
<p>A change ID is an identifier with this sequence of 12 characters:
- “A” serves as a format version identifier
- 7 alphanumeric characters (0-9, A-Z, and a-z) encoding the date and time the job ran.
- 4 hexadecimal digits encoding the task id</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jobId</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>startTime</strong> (<em>Optional</em><em>[</em><em>datetime.datetime</em><em>]</em>) – </p></li>
<li><p><strong>taskId</strong> (<em>int</em>) – </p></li>
<li><p><strong>previousId</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>parse</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="unfurl.result.ChangeRecord.format_log">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format_log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">changeId</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attributes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.result.ChangeRecord.format_log" title="Permalink to this definition"></a></dt>
<dd><p>format: changeidtkey=valuetkey=value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>changeId</strong> (<em>str</em>) – </p></li>
<li><p><strong>attributes</strong> (<em>dict</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.result.ChangeRecord.log">
<span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.result.ChangeRecord.log" title="Permalink to this definition"></a></dt>
<dd><p>changeidtkey=valuetkey=value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>attributes</strong> (<em>Optional</em><em>[</em><em>dict</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-unfurl.projectpaths">
<span id="project-folders"></span><h3><a class="toc-backref" href="#id15">Project folders</a><a class="headerlink" href="#module-unfurl.projectpaths" title="Permalink to this headline"></a></h3>
<p>An ensemble may contain create the following directories when a job runs:</p>
<dl class="field-list simple">
<dt class="field-odd">artifacts</dt>
<dd class="field-odd"><p>Artifacts required for deployment (e.g. Terraform state files).</p>
</dd>
<dt class="field-even">secrets</dt>
<dd class="field-even"><p>sensitive artifacts (e.g. certificates). They are vault encrypted in the repository.</p>
</dd>
<dt class="field-odd">local</dt>
<dd class="field-odd"><p>Artifacts specific to this installation and so excluded from the repository (e.g. a pidfile)</p>
</dd>
<dt class="field-even">tasks</dt>
<dd class="field-even"><p>The most recently generated configuration files for each instance (for informational purposes only – excluded from repository and safe to delete).</p>
</dd>
</dl>
<p>Each of these directories will contain subdirectories named after each instance in the ensemble; their contents are populated as those instances are deployed.</p>
<p>When a plan is being generated, a directory named “planned” will be created which will have the same directory structure as above. When the job executes the plan those files will be moved to the corresponding directory if the task successfully deployed, otherwise it will be moved to a directory named <code class="docutils literal notranslate"><span class="pre">failed/&lt;changeid&gt;</span></code>.</p>
<p>When a task runs, its configurator has access to these directories that it can use
to store artifacts in the ensemble’s repository or for generating local configuration files.
For this, each deployed instance can have its own set of directories (see <a class="reference internal" href="expressions.html#get-dir"><span class="std std-ref">get_dir</span></a>).</p>
<p>Because generating a plan should not impact what is currently deployed, during the
during planning and rendering phase, a configurator can use the <a class="reference internal" href="#unfurl.projectpaths.WorkFolder" title="unfurl.projectpaths.WorkFolder"><code class="xref any py py-class docutils literal notranslate"><span class="pre">WorkFolder</span></code></a> interface to read and write from temporary copies of those folders in the “planned” directory. They will either be discarded or moved to “active” if the task fails or succeeds.</p>
<p>This also enables the files generated by the plan to be manually examined – useful for development, error diagnosis and user intervention, or as part of a git-based approval process.</p>
<dl class="py class">
<dt class="sig sig-object py" id="unfurl.projectpaths.WorkFolder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.projectpaths.</span></span><span class="sig-name descname"><span class="pre">WorkFolder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preserve</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.projectpaths.WorkFolder" title="Permalink to this definition"></a></dt>
<dd><p>When a task is running, this class provides access to the directories associated with instances and tasks,
such as the directories for reading and writing artifacts and secrets.</p>
<p>Updates to these directories through this class are performed transactionally –
accessing a directory through this class marks it for writing and creates a
copy of it in the <code class="docutils literal notranslate"><span class="pre">planned</span></code> directory.</p>
<p>If a task completes successfully <code class="docutils literal notranslate"><span class="pre">apply()</span></code> is called, which copies it back to the
permanent location of the folder in the ensemble’s “active” directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="#unfurl.configurator.TaskView" title="unfurl.configurator.TaskView"><em>TaskView</em></a>) – </p></li>
<li><p><strong>location</strong> (<em>str</em>) – </p></li>
<li><p><strong>preserve</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.projectpaths.WorkFolder.always_apply">
<span class="sig-name descname"><span class="pre">always_apply</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#unfurl.projectpaths.WorkFolder.always_apply" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.projectpaths.WorkFolder.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.projectpaths.WorkFolder.apply" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.projectpaths.WorkFolder.copy_from">
<span class="sig-name descname"><span class="pre">copy_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.projectpaths.WorkFolder.copy_from" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.projectpaths.WorkFolder.copy_to">
<span class="sig-name descname"><span class="pre">copy_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.projectpaths.WorkFolder.copy_to" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.projectpaths.WorkFolder.cwd">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cwd</span></span><a class="headerlink" href="#unfurl.projectpaths.WorkFolder.cwd" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.projectpaths.WorkFolder.discard">
<span class="sig-name descname"><span class="pre">discard</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.projectpaths.WorkFolder.discard" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.projectpaths.WorkFolder.failed">
<span class="sig-name descname"><span class="pre">failed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.projectpaths.WorkFolder.failed" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.projectpaths.WorkFolder.get_current_path">
<span class="sig-name descname"><span class="pre">get_current_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mkdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.projectpaths.WorkFolder.get_current_path" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.projectpaths.WorkFolder.pending_path">
<span class="sig-name descname"><span class="pre">pending_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mkdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.projectpaths.WorkFolder.pending_path" title="Permalink to this definition"></a></dt>
<dd><p>An absolute path to the planning location of this directory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.projectpaths.WorkFolder.permanent_path">
<span class="sig-name descname"><span class="pre">permanent_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mkdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.projectpaths.WorkFolder.permanent_path" title="Permalink to this definition"></a></dt>
<dd><p>An absolute path to the permanent location of this directory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.projectpaths.WorkFolder.relpath_to_current">
<span class="sig-name descname"><span class="pre">relpath_to_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.projectpaths.WorkFolder.relpath_to_current" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.projectpaths.WorkFolder.write_file">
<span class="sig-name descname"><span class="pre">write_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.projectpaths.WorkFolder.write_file" title="Permalink to this definition"></a></dt>
<dd><p>Create a file with the given contents</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contents</strong> – <p>.</p>
</p></li>
<li><p><strong>name</strong> (<em>string</em>) – Relative path to write to.</p></li>
<li><p><strong>encoding</strong> (<em>string</em>) – (Optional) One of “binary”, “vault”, “json”, “yaml”
or an encoding registered with the Python codec registry.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An absolute path to the file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-unfurl.runtime">
<span id="runtime-module"></span><h3><a class="toc-backref" href="#id16">Runtime module</a><a class="headerlink" href="#module-unfurl.runtime" title="Permalink to this headline"></a></h3>
<p>This module defines the core model and implements the runtime operations of the model.</p>
<p>The state of the system is represented as a collection of Instances.
Each instance have a status; attributes that describe its state; and a TOSCA template
which describes its capabilities, relationships and available interfaces for configuring and interacting with it.</p>
<dl class="py class">
<dt class="sig sig-object py" id="unfurl.runtime.Operational">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.runtime.</span></span><span class="sig-name descname"><span class="pre">Operational</span></span><a class="headerlink" href="#unfurl.runtime.Operational" title="Permalink to this definition"></a></dt>
<dd><p>This is an abstract base class for Jobs, Resources, and Configurations all have a Status associated with them
and all use the same algorithm to compute their status from their dependent resources, tasks, and configurations</p>
<dl class="py method">
<dt class="sig sig-object py" id="unfurl.runtime.Operational.aggregate_status">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aggregate_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statuses</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seen</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.runtime.Operational.aggregate_status" title="Permalink to this definition"></a></dt>
<dd><p>Returns: ok, degraded, pending or None</p>
<p>If there are no instances, return None
If any required are not operational, return pending or error
If any other are not operational or degraded, return degraded
Otherwise return ok.
(Instances with priority set to “ignore” are ignored.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>statuses</strong> (<em>Iterable</em><em>[</em><a class="reference internal" href="#unfurl.runtime.Operational" title="unfurl.runtime.Operational"><em>unfurl.runtime.Operational</em></a><em>]</em>) – </p></li>
<li><p><strong>seen</strong> (<em>Dict</em><em>[</em><em>int</em><em>, </em><a class="reference internal" href="#unfurl.runtime.Operational" title="unfurl.runtime.Operational"><em>unfurl.runtime.Operational</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[<a class="reference internal" href="#unfurl.support.Status" title="unfurl.support.Status">unfurl.support.Status</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.runtime.Operational.get_operational_dependencies">
<span class="sig-name descname"><span class="pre">get_operational_dependencies</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.runtime.Operational.get_operational_dependencies" title="Permalink to this definition"></a></dt>
<dd><p>Return an iterator of <a class="reference internal" href="#unfurl.runtime.Operational" title="unfurl.runtime.Operational"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Operational</span></code></a> objects that this instance directly depends on to be operational.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Iterable</em>[<a class="reference internal" href="#unfurl.runtime.Operational" title="unfurl.runtime.Operational">unfurl.runtime.Operational</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.runtime.Operational.get_operational_dependents">
<span class="sig-name descname"><span class="pre">get_operational_dependents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.runtime.Operational.get_operational_dependents" title="Permalink to this definition"></a></dt>
<dd><p>Return an iterator of <a class="reference internal" href="#unfurl.runtime.Operational" title="unfurl.runtime.Operational"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Operational</span></code></a> objects that directly depend on this instance to be operational.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Iterable</em>[<a class="reference internal" href="#unfurl.runtime.Operational" title="unfurl.runtime.Operational">unfurl.runtime.Operational</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.runtime.Operational.has_changed">
<span class="sig-name descname"><span class="pre">has_changed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">changeset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.runtime.Operational.has_changed" title="Permalink to this definition"></a></dt>
<dd><p>Whether or not this object changed since the give ChangeRecord.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>changeset</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.result.ChangeRecord" title="unfurl.result.ChangeRecord"><em>unfurl.result.ChangeRecord</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.runtime.OperationalInstance">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.runtime.</span></span><span class="sig-name descname"><span class="pre">OperationalInstance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manualOveride</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lastStateChange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lastConfigChange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.runtime.OperationalInstance" title="Permalink to this definition"></a></dt>
<dd><p>A concrete implementation of Operational</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>status</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference internal" href="#unfurl.runtime.OperationalInstance" title="unfurl.runtime.OperationalInstance"><em>OperationalInstance</em></a><em>, </em><em>int</em><em>, </em><em>str</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>priority</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.support.Priority" title="unfurl.support.Priority"><em>unfurl.support.Priority</em></a><em>]</em>) – </p></li>
<li><p><strong>manualOveride</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference internal" href="#unfurl.runtime.OperationalInstance" title="unfurl.runtime.OperationalInstance"><em>OperationalInstance</em></a><em>, </em><em>int</em><em>, </em><em>str</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>lastStateChange</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>lastConfigChange</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>state</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.support.NodeState" title="unfurl.support.NodeState"><em>unfurl.support.NodeState</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="unfurl.runtime.OperationalInstance.get_operational_dependencies">
<span class="sig-name descname"><span class="pre">get_operational_dependencies</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.runtime.OperationalInstance.get_operational_dependencies" title="Permalink to this definition"></a></dt>
<dd><p>Return an iterator of <a class="reference internal" href="#unfurl.runtime.Operational" title="unfurl.runtime.Operational"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Operational</span></code></a> objects that this instance directly depends on to be operational.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Iterable</em>[<a class="reference internal" href="#unfurl.runtime.Operational" title="unfurl.runtime.Operational">unfurl.runtime.Operational</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.runtime.OperationalInstance.local_status">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">local_status</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#unfurl.support.Status" title="unfurl.support.Status"><span class="pre">unfurl.support.Status</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#unfurl.runtime.OperationalInstance.local_status" title="Permalink to this definition"></a></dt>
<dd><p>The local_status property.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.runtime.OperationalInstance.manual_override_status">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">manual_override_status</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#unfurl.support.Status" title="unfurl.support.Status"><span class="pre">unfurl.support.Status</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#unfurl.runtime.OperationalInstance.manual_override_status" title="Permalink to this definition"></a></dt>
<dd><p>The manualOverideStatus property.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.runtime.OperationalInstance.priority">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">priority</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#unfurl.support.Priority" title="unfurl.support.Priority"><span class="pre">unfurl.support.Priority</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#unfurl.runtime.OperationalInstance.priority" title="Permalink to this definition"></a></dt>
<dd><p>The priority property.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.runtime.OperationalInstance.state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">state</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#unfurl.support.NodeState" title="unfurl.support.NodeState"><span class="pre">unfurl.support.NodeState</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#unfurl.runtime.OperationalInstance.state" title="Permalink to this definition"></a></dt>
<dd><p>The state property.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="apis-for-controlling-unfurl">
<h2><a class="toc-backref" href="#id17">APIs for controlling Unfurl</a><a class="headerlink" href="#apis-for-controlling-unfurl" title="Permalink to this headline"></a></h2>
<section id="module-unfurl.localenv">
<span id="localenv-module"></span><h3><a class="toc-backref" href="#id18">Localenv module</a><a class="headerlink" href="#module-unfurl.localenv" title="Permalink to this headline"></a></h3>
<p>Classes for managing the local environment.</p>
<p>Repositories can optionally be organized into projects that have a local configuration.</p>
<p>By convention, the “home” project defines a localhost instance and adds it to its context.</p>
<dl class="py class">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.localenv.</span></span><span class="sig-name descname"><span class="pre">LocalEnv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifestPath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">homePath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">can_be_empty</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overrides</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">readonly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv" title="Permalink to this definition"></a></dt>
<dd><p>This class represents the local environment that an ensemble runs in, including
the local project it is part of and the home project.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>manifestPath</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>homePath</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>parent</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.localenv.LocalEnv" title="unfurl.localenv.LocalEnv"><em>unfurl.localenv.LocalEnv</em></a><em>]</em>) – </p></li>
<li><p><strong>project</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.localenv.Project" title="unfurl.localenv.Project"><em>unfurl.localenv.Project</em></a><em>]</em>) – </p></li>
<li><p><strong>can_be_empty</strong> (<em>bool</em>) – </p></li>
<li><p><strong>override_context</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>overrides</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>readonly</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.find_git_repo">
<span class="sig-name descname"><span class="pre">find_git_repo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repoURL</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.find_git_repo" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repoURL</strong> (<em>str</em>) – </p></li>
<li><p><strong>revision</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[unfurl.repo.GitRepo]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.find_or_create_working_dir">
<span class="sig-name descname"><span class="pre">find_or_create_working_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repoURL</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkout_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">package</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.find_or_create_working_dir" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repoURL</strong> (<em>str</em>) – </p></li>
<li><p><strong>revision</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>basepath</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>checkout_args</strong> (<em>dict</em>) – </p></li>
<li><p><strong>package</strong> (<em>Optional</em><em>[</em><em>Package</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Tuple</em>[<em>Optional</em>[unfurl.repo.GitRepo], <em>Optional</em>[str], <em>Optional</em>[bool]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.find_path_in_repos">
<span class="sig-name descname"><span class="pre">find_path_in_repos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">importLoader</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.find_path_in_repos" title="Permalink to this definition"></a></dt>
<dd><p>If the given path is part of the working directory of a git repository
return that repository and a path relative to it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – </p></li>
<li><p><strong>importLoader</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Tuple</em>[<em>Optional</em>[unfurl.repo.GitRepo], <em>Optional</em>[str], <em>Optional</em>[str], <em>Optional</em>[bool]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.find_project">
<span class="sig-name descname"><span class="pre">find_project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">testPath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopPath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.find_project" title="Permalink to this definition"></a></dt>
<dd><p>Walk parents looking for unfurl.yaml</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>testPath</strong> (<em>str</em>) – </p></li>
<li><p><strong>stopPath</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[<a class="reference internal" href="#unfurl.localenv.Project" title="unfurl.localenv.Project">unfurl.localenv.Project</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.get_context">
<span class="sig-name descname"><span class="pre">get_context</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.get_context" title="Permalink to this definition"></a></dt>
<dd><p>Return a new context that merges the given context with the local context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>context</strong> (<em>Optional</em><em>[</em><em>dict</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Dict</em>[str, <em>Any</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.get_ensemble_project">
<span class="sig-name descname"><span class="pre">get_ensemble_project</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.get_ensemble_project" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Optional</em>[<a class="reference internal" href="#unfurl.localenv.Project" title="unfurl.localenv.Project">unfurl.localenv.Project</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.get_external_manifest">
<span class="sig-name descname"><span class="pre">get_external_manifest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_validation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safe_mode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.get_external_manifest" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>location</strong> (<em>dict</em>) – </p></li>
<li><p><strong>skip_validation</strong> (<em>bool</em>) – </p></li>
<li><p><strong>safe_mode</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[YamlManifest]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.get_local_instance">
<span class="sig-name descname"><span class="pre">get_local_instance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.get_local_instance" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – </p></li>
<li><p><strong>context</strong> (<em>dict</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Tuple</em>[unfurl.runtime.NodeInstance, dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.get_manifest">
<span class="sig-name descname"><span class="pre">get_manifest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_validation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safe_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.get_manifest" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>skip_validation</strong> (<em>bool</em>) – </p></li>
<li><p><strong>safe_mode</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>YamlManifest</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.get_paths">
<span class="sig-name descname"><span class="pre">get_paths</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.get_paths" title="Permalink to this definition"></a></dt>
<dd><p>Return a list of directories for $PATH.
Includes the directory the <code class="docutils literal notranslate"><span class="pre">unfurl</span></code> script is installed in and,
if asdf is installed, appends a PATH list from the <code class="docutils literal notranslate"><span class="pre">.toolversions</span></code>
found in the current project and the home project.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>List</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.get_project">
<span class="sig-name descname"><span class="pre">get_project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">homeProject</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.get_project" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – </p></li>
<li><p><strong>homeProject</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.localenv.Project" title="unfurl.localenv.Project"><em>unfurl.localenv.Project</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#unfurl.localenv.Project" title="unfurl.localenv.Project">unfurl.localenv.Project</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.get_runtime">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_runtime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ensemble_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">home_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.get_runtime" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ensemble_path</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>home_path</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.get_vault">
<span class="sig-name descname"><span class="pre">get_vault</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.get_vault" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.get_vault_password">
<span class="sig-name descname"><span class="pre">get_vault_password</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vaultId</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.get_vault_password" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vaultId</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.link_repo">
<span class="sig-name descname"><span class="pre">link_repo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.link_repo" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_path</strong> (<em>str</em>) – </p></li>
<li><p><strong>name</strong> (<em>str</em>) – </p></li>
<li><p><strong>url</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Tuple</em>[str, str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.map_value">
<span class="sig-name descname"><span class="pre">map_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_rules</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.LocalEnv.map_value" title="Permalink to this definition"></a></dt>
<dd><p>Evaluate using project home as a base dir.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>val</strong> (<em>Any</em>) – </p></li>
<li><p><strong>env_rules</strong> (<em>Optional</em><em>[</em><em>dict</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#unfurl.localenv.LocalEnv" title="unfurl.localenv.LocalEnv"><span class="pre">unfurl.localenv.LocalEnv</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#unfurl.localenv.LocalEnv.parent" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.localenv.LocalEnv.project">
<span class="sig-name descname"><span class="pre">project</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#unfurl.localenv.Project" title="unfurl.localenv.Project"><span class="pre">unfurl.localenv.Project</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#unfurl.localenv.LocalEnv.project" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.localenv.Project">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.localenv.</span></span><span class="sig-name descname"><span class="pre">Project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">homeProject</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overrides</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">readonly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">register</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project" title="Permalink to this definition"></a></dt>
<dd><p>A Unfurl project is a folder that contains at least a local configuration file (unfurl.yaml),
one or more ensemble.yaml files which maybe optionally organized into one or more git repositories.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – </p></li>
<li><p><strong>homeProject</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.localenv.Project" title="unfurl.localenv.Project"><em>Project</em></a><em>]</em>) – </p></li>
<li><p><strong>overrides</strong> (<em>Optional</em><em>[</em><em>dict</em><em>]</em>) – </p></li>
<li><p><strong>readonly</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – </p></li>
<li><p><strong>register</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.add_context">
<span class="sig-name descname"><span class="pre">add_context</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.add_context" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – </p></li>
<li><p><strong>value</strong> (<em>dict</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.adjust_manifest_path">
<span class="sig-name descname"><span class="pre">adjust_manifest_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_env</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.adjust_manifest_path" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>location</strong> (<em>dict</em>) – </p></li>
<li><p><strong>local_env</strong> (<a class="reference internal" href="#unfurl.localenv.LocalEnv" title="unfurl.localenv.LocalEnv"><em>unfurl.localenv.LocalEnv</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.create_working_dir">
<span class="sig-name descname"><span class="pre">create_working_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gitUrl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.create_working_dir" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gitUrl</strong> (<em>str</em>) – </p></li>
<li><p><strong>ref</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>unfurl.repo.GitRepo</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.find_ensemble_by_name">
<span class="sig-name descname"><span class="pre">find_ensemble_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.find_ensemble_by_name" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.find_ensemble_by_path">
<span class="sig-name descname"><span class="pre">find_ensemble_by_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.find_ensemble_by_path" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.find_git_repo">
<span class="sig-name descname"><span class="pre">find_git_repo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repoURL</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.find_git_repo" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repoURL</strong> (<em>str</em>) – </p></li>
<li><p><strong>revision</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[unfurl.repo.GitRepo]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.find_git_repo_from_repository">
<span class="sig-name descname"><span class="pre">find_git_repo_from_repository</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repoSpec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.find_git_repo_from_repository" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>repoSpec</strong> (<em>toscaparser.repositories.Repository</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[unfurl.repo.GitRepo]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.find_or_clone">
<span class="sig-name descname"><span class="pre">find_or_clone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repo</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.find_or_clone" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>repo</strong> (<em>unfurl.repo.GitRepo</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>unfurl.repo.GitRepo</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.find_or_create_working_dir">
<span class="sig-name descname"><span class="pre">find_or_create_working_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repoURL</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.find_or_create_working_dir" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repoURL</strong> (<em>str</em>) – </p></li>
<li><p><strong>revision</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>unfurl.repo.GitRepo</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.find_path">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">find_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">testPath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopPath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.find_path" title="Permalink to this definition"></a></dt>
<dd><p>Walk parents looking for unfurl.yaml</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>testPath</strong> (<em>str</em>) – </p></li>
<li><p><strong>stopPath</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.find_path_in_repos">
<span class="sig-name descname"><span class="pre">find_path_in_repos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">importLoader</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.find_path_in_repos" title="Permalink to this definition"></a></dt>
<dd><p>If the given path is part of the working directory of a git repository
return that repository and a path relative to it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – </p></li>
<li><p><strong>importLoader</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Tuple</em>[<em>Optional</em>[unfurl.repo.RepoView], <em>Optional</em>[str], <em>Optional</em>[bool]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.get_asdf_paths">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_asdf_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">projectRoot</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asdfDataDir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">toolVersions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.get_asdf_paths" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>List</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.get_context">
<span class="sig-name descname"><span class="pre">get_context</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contextName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.get_context" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contextName</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>context</strong> (<em>Optional</em><em>[</em><em>dict</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.get_default_context">
<span class="sig-name descname"><span class="pre">get_default_context</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.get_default_context" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Optional</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.get_default_project_path">
<span class="sig-name descname"><span class="pre">get_default_project_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.get_default_project_path" title="Permalink to this definition"></a></dt>
<dd><p>If there is a default project set for the given environment, return its path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>context_name</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.get_managed_project">
<span class="sig-name descname"><span class="pre">get_managed_project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">localEnv</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.get_managed_project" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>location</strong> (<em>dict</em>) – </p></li>
<li><p><strong>localEnv</strong> (<a class="reference internal" href="#unfurl.localenv.LocalEnv" title="unfurl.localenv.LocalEnv"><em>unfurl.localenv.LocalEnv</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[<a class="reference internal" href="#unfurl.localenv.Project" title="unfurl.localenv.Project">unfurl.localenv.Project</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.get_name_from_dir">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_name_from_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">projectRoot</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.get_name_from_dir" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>projectRoot</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.get_relative_path">
<span class="sig-name descname"><span class="pre">get_relative_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.get_relative_path" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.get_unique_path">
<span class="sig-name descname"><span class="pre">get_unique_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.get_unique_path" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.get_vault_password">
<span class="sig-name descname"><span class="pre">get_vault_password</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contextName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vaultId</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.get_vault_password" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contextName</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>vaultId</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.get_vault_passwords">
<span class="sig-name descname"><span class="pre">get_vault_passwords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contextName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.get_vault_passwords" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>contextName</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Iterable</em>[<em>Tuple</em>[str, <em>Union</em>[str, bytes]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.has_ensembles">
<span class="sig-name descname"><span class="pre">has_ensembles</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.has_ensembles" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.is_path_in_project">
<span class="sig-name descname"><span class="pre">is_path_in_project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.is_path_in_project" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.is_vault_encrypted">
<span class="sig-name descname"><span class="pre">is_vault_encrypted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contextName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.is_vault_encrypted" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>contextName</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.load_yaml_include">
<span class="sig-name descname"><span class="pre">load_yaml_include</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">yamlConfig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">templatePath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseDir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warnWhenNotFound</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expanded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.load_yaml_include" title="Permalink to this definition"></a></dt>
<dd><p>This is called while the YAML config is being loaded.
Returns (url or fullpath, parsed yaml)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yamlConfig</strong> (<em>unfurl.yamlloader.YamlConfig</em>) – </p></li>
<li><p><strong>templatePath</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>dict</em><em>]</em>) – </p></li>
<li><p><strong>action</strong> (<em>Optional</em><em>[</em><em>unfurl.yamlloader.LoadIncludeAction</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.make_vault_lib">
<span class="sig-name descname"><span class="pre">make_vault_lib</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contextName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.make_vault_lib" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>contextName</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Optional</em>[ansible.parsing.vault.VaultLib]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.localenv.Project.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#unfurl.localenv.Project.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.normalize_path">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">normalize_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.normalize_path" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="unfurl.localenv.Project.project_repoview">
<span class="sig-name descname"><span class="pre">project_repoview</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">unfurl.repo.RepoView</span></em><a class="headerlink" href="#unfurl.localenv.Project.project_repoview" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.register_ensemble">
<span class="sig-name descname"><span class="pre">register_ensemble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifestPath</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">managedBy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.register_ensemble" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>manifestPath</strong> (<em>str</em>) – </p></li>
<li><p><strong>project</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.localenv.Project" title="unfurl.localenv.Project"><em>unfurl.localenv.Project</em></a><em>]</em>) – </p></li>
<li><p><strong>managedBy</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.localenv.Project" title="unfurl.localenv.Project"><em>unfurl.localenv.Project</em></a><em>]</em>) – </p></li>
<li><p><strong>context</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>local</strong> (<em>bool</em>) – </p></li>
<li><p><strong>default</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.register_project">
<span class="sig-name descname"><span class="pre">register_project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.register_project" title="Permalink to this definition"></a></dt>
<dd><p>Register a project with this project.
Return True if this project’s config file was updated and saved to disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>project</strong> (<a class="reference internal" href="#unfurl.localenv.Project" title="unfurl.localenv.Project"><em>unfurl.localenv.Project</em></a>) – </p></li>
<li><p><strong>save</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.reload">
<span class="sig-name descname"><span class="pre">reload</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.reload" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.search_for_default_manifest">
<span class="sig-name descname"><span class="pre">search_for_default_manifest</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.search_for_default_manifest" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Optional</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.localenv.Project.should_include_path">
<span class="sig-name descname"><span class="pre">should_include_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.localenv.Project.should_include_path" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unfurl.localenv.Project.venv">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">venv</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#unfurl.localenv.Project.venv" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-unfurl.job">
<span id="job-module"></span><h3><a class="toc-backref" href="#id19">Job module</a><a class="headerlink" href="#module-unfurl.job" title="Permalink to this headline"></a></h3>
<p>A Job is generated by comparing a list of specs with the last known state of the system.
Job runs tasks, each of which has a configuration spec that is executed on the running system
Each task tracks and records its modifications to the system’s state</p>
<dl class="py class">
<dt class="sig sig-object py" id="unfurl.job.ConfigChange">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.job.</span></span><span class="sig-name descname"><span class="pre">ConfigChange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parentJob</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startTime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">previousId</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.job.ConfigChange" title="Permalink to this definition"></a></dt>
<dd><p>Represents a configuration change made to the system.
It has a operating status and a list of dependencies that contribute to its status.
There are two kinds of dependencies:</p>
<ol class="arabic simple">
<li><p>Live resource attributes that the configuration’s inputs depend on.</p></li>
<li><p>Other configurations and resources it relies on to function properly.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parentJob</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.job.Job" title="unfurl.job.Job"><em>Job</em></a><em>]</em>) – </p></li>
<li><p><strong>startTime</strong> (<em>Optional</em><em>[</em><em>datetime.datetime</em><em>]</em>) – </p></li>
<li><p><strong>status</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference internal" href="#unfurl.runtime.OperationalInstance" title="unfurl.runtime.OperationalInstance"><em>unfurl.runtime.OperationalInstance</em></a><em>, </em><em>int</em><em>, </em><em>str</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>previousId</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>kw</strong> (<em>Any</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.job.Job">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.job.</span></span><span class="sig-name descname"><span class="pre">Job</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rootResource</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobOptions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">previousId</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.job.Job" title="Permalink to this definition"></a></dt>
<dd><p>runs ConfigTasks and child Jobs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>manifest</strong> (<em>YamlManifest</em>) – </p></li>
<li><p><strong>rootResource</strong> (<em>unfurl.runtime.TopologyInstance</em>) – </p></li>
<li><p><strong>jobOptions</strong> (<a class="reference internal" href="#unfurl.job.JobOptions" title="unfurl.job.JobOptions"><em>unfurl.job.JobOptions</em></a>) – </p></li>
<li><p><strong>previousId</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="unfurl.job.Job.can_run_task">
<span class="sig-name descname"><span class="pre">can_run_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">not_ready</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.job.Job.can_run_task" title="Permalink to this definition"></a></dt>
<dd><p>Checked at runtime right before each task is run</p>
<ul class="simple">
<li><p>validate inputs</p></li>
<li><p>check pre-conditions to see if it can be run</p></li>
<li><p>check task if it can be run</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<em>unfurl.job.ConfigTask</em>) – </p></li>
<li><p><strong>not_ready</strong> (<em>Sequence</em><em>[</em><em>unfurl.planrequests.PlanRequest</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Tuple</em>[bool, str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.job.Job.get_operational_dependencies">
<span class="sig-name descname"><span class="pre">get_operational_dependencies</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.job.Job.get_operational_dependencies" title="Permalink to this definition"></a></dt>
<dd><p>Return an iterator of <a class="reference internal" href="#unfurl.runtime.Operational" title="unfurl.runtime.Operational"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Operational</span></code></a> objects that this instance directly depends on to be operational.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><em>Iterable</em>[unfurl.job.ConfigTask]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.job.Job.run_task">
<span class="sig-name descname"><span class="pre">run_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">not_ready</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.job.Job.run_task" title="Permalink to this definition"></a></dt>
<dd><p>During each task run:
* Notification of metadata changes that reflect changes made to resources
* Notification of add or removing dependency on a resource or properties of a resource
* Notification of creation or deletion of a resource
* Requests a resource with requested metadata, if it doesn’t exist, a task is run to make it so
(e.g. add a dns entry, install a package).</p>
<p>Returns a task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<em>unfurl.job.ConfigTask</em>) – </p></li>
<li><p><strong>not_ready</strong> (<em>Sequence</em><em>[</em><em>unfurl.planrequests.PlanRequest</em><em>]</em>) – </p></li>
<li><p><strong>depth</strong> (<em>int</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>unfurl.job.ConfigTask</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.job.Job.should_run_task">
<span class="sig-name descname"><span class="pre">should_run_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.job.Job.should_run_task" title="Permalink to this definition"></a></dt>
<dd><p>Checked before rendering the task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<em>unfurl.job.ConfigTask</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Tuple</em>[bool, str]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.job.JobOptions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.job.</span></span><span class="sig-name descname"><span class="pre">JobOptions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.job.JobOptions" title="Permalink to this definition"></a></dt>
<dd><p>Options available to select which tasks are run, e.g. read-only</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kw</strong> (<em>Any</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.job.run_job">
<span class="sig-prename descclassname"><span class="pre">unfurl.job.</span></span><span class="sig-name descname"><span class="pre">run_job</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifestPath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_opts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.job.run_job" title="Permalink to this definition"></a></dt>
<dd><p>Loads the given Ensemble and creates and runs a job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>manifestPath</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>, optional) – If None, it will look for an ensemble in the current working directory.</p></li>
<li><p><strong>_opts</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code>, optional) – the names of the command line options for creating jobs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The job that just ran or None if it couldn’t be created.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="#unfurl.job.Job" title="unfurl.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a>)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-unfurl.init">
<span id="init-module"></span><h3><a class="toc-backref" href="#id20">Init module</a><a class="headerlink" href="#module-unfurl.init" title="Permalink to this headline"></a></h3>
<p>This module implements creating and cloning project and ensembles as well Unfurl runtimes.</p>
<dl class="py function">
<dt class="sig sig-object py" id="unfurl.init.clone">
<span class="sig-prename descclassname"><span class="pre">unfurl.init.</span></span><span class="sig-name descname"><span class="pre">clone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ensemble_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ensemble'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.init.clone" title="Permalink to this definition"></a></dt>
<dd><p>Clone the <code class="docutils literal notranslate"><span class="pre">source</span></code> project or ensemble to <code class="docutils literal notranslate"><span class="pre">dest</span></code>. If <code class="docutils literal notranslate"><span class="pre">dest</span></code> isn’t in a project, create a new one.</p>
<p><code class="docutils literal notranslate"><span class="pre">source</span></code> can be a git URL or a path inside a local git repository.
Git URLs can specify a particular file in the repository using an URL fragment like <code class="docutils literal notranslate"><span class="pre">#&lt;branch_or_tag&gt;:&lt;file/path&gt;</span></code>.
You can use cloudmap url like <code class="docutils literal notranslate"><span class="pre">cloudmap:&lt;package_id&gt;</span></code>, which will resolve to a git URL.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">source</span></code> can point to an Unfurl project, an ensemble template, a service template, an existing ensemble, or a folder containing one of those.</p>
<p>The result of the clone depends on the destination:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">dest</span></code></p></th>
<th class="head"><p>Result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Inside source project</p></td>
<td><p>New or forked ensemble (depending on source)</p></td>
</tr>
<tr class="row-odd"><td><p>Missing or empty folder</p></td>
<td><p>Clone project, create new ensemble if missing</p></td>
</tr>
<tr class="row-even"><td><p>Another project</p></td>
<td><p>See below</p></td>
</tr>
<tr class="row-odd"><td><p>Non-empty folder</p></td>
<td><p>Error, abort</p></td>
</tr>
</tbody>
</table>
<p>When creating a new ensemble from a source, if the source points to:</p>
<ul class="simple">
<li><p>an ensemble: fork the ensemble (clone without status and new uri)</p></li>
<li><p>an ensemble template or TOSCA service template: a create new ensemble from the template.</p></li>
<li><p>a project: If the project includes a ensemble-template.yaml, use that; if missing, fork the project’s default ensemble.</p></li>
</ul>
<p>When dest is set to another project, clone’s behavior depends on source:</p>
<p>If the source is a local file path, the project and local repository is registered in the destination project and a new ensemble is created based on the source.</p>
<p>If the source is a git URL, the repository is cloned inside the destination project. A new ensemble is only created if the source specified a specific ensemble or template or if the source was blueprint project (i.e. it contains an ensemble template but doesn’t contain any ensembles).</p>
<p>When deploying an ensemble that is in project that was cloned into another project, the environment setting in each unfurl.yaml are merged, with the top-level project’s settings taking precedence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>str</em>) – </p></li>
<li><p><strong>dest</strong> (<em>str</em>) – </p></li>
<li><p><strong>ensemble_name</strong> (<em>str</em>) – </p></li>
<li><p><strong>options</strong> (<em>Any</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="module-unfurl.logs">
<span id="utility-classes-and-functions"></span><h2><a class="toc-backref" href="#id21">Utility classes and functions</a><a class="headerlink" href="#module-unfurl.logs" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="unfurl.logs.sensitive">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.logs.</span></span><span class="sig-name descname"><span class="pre">sensitive</span></span><a class="headerlink" href="#unfurl.logs.sensitive" title="Permalink to this definition"></a></dt>
<dd><p>Base class for marking a value as sensitive. Depending on the context,
sensitive values will either be encrypted or redacted when outputed.</p>
</dd></dl>

<span class="target" id="module-unfurl.util"></span><dl class="py exception">
<dt class="sig sig-object py" id="unfurl.util.UnfurlError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.util.</span></span><span class="sig-name descname"><span class="pre">UnfurlError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">saveStack</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.util.UnfurlError" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<em>object</em>) – </p></li>
<li><p><strong>saveStack</strong> (<em>bool</em>) – </p></li>
<li><p><strong>log</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="unfurl.util.UnfurlTaskError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.util.</span></span><span class="sig-name descname"><span class="pre">UnfurlTaskError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dependency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.util.UnfurlTaskError" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="#unfurl.configurator.TaskView" title="unfurl.configurator.TaskView"><em>TaskView</em></a>) – </p></li>
<li><p><strong>message</strong> (<em>object</em>) – </p></li>
<li><p><strong>log</strong> (<em>int</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.util.filter_env">
<span class="sig-prename descclassname"><span class="pre">unfurl.util.</span></span><span class="sig-name descname"><span class="pre">filter_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rules</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addOnly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.util.filter_env" title="Permalink to this definition"></a></dt>
<dd><p>Applies the given list of rules to a dictionary of environment variables and returns a new dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rules</strong> (<em>dict</em>) – A dictionary of rules for adding, removing and filtering environment variables.</p></li>
<li><p><strong>env</strong> (<em>dict</em><em>, </em><em>optional</em>) – The environment to apply the give rules to. If <code class="docutils literal notranslate"><span class="pre">env</span></code> is None it will be set to <code class="docutils literal notranslate"><span class="pre">os.environ</span></code>.
Defaults to None.</p></li>
<li><p><strong>addOnly</strong> (<em>bool</em><em>, </em><em>optional</em>) – If addOnly is False (the default) all variables in <code class="docutils literal notranslate"><span class="pre">env</span></code> will be included
in the returned dict, otherwise only variables added by <code class="docutils literal notranslate"><span class="pre">rules</span></code> will be included</p></li>
<li><p><strong>sub</strong> (<em>dict</em><em>, </em><em>optional</em>) – A dictionary of substitutions to apply to the environment variable values.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Dict</em>[str, str]</p>
</dd>
</dl>
<p>Rules applied in the order they are declared in the <code class="docutils literal notranslate"><span class="pre">rules</span></code> dictionary. The following examples show the different patterns for the rules:</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">foo: bar</dt>
<dd class="field-odd"><p>Add <code class="docutils literal notranslate"><span class="pre">foo=bar</span></code></p>
</dd>
<dt class="field-even">+foo</dt>
<dd class="field-even"><p>Copy <code class="docutils literal notranslate"><span class="pre">foo</span></code> from the current environment</p>
</dd>
<dt class="field-odd">+foo: bar</dt>
<dd class="field-odd"><p>Copy <code class="docutils literal notranslate"><span class="pre">foo</span></code>, or add <code class="docutils literal notranslate"><span class="pre">foo=bar</span></code> if it is not present</p>
</dd>
<dt class="field-even">+foo*</dt>
<dd class="field-even"><p>Copy all name from the current environment that match <code class="docutils literal notranslate"><span class="pre">foo*</span></code></p>
</dd>
<dt class="field-odd">+!foo*</dt>
<dd class="field-odd"><p>Copy all name from the current environment except those matching <code class="docutils literal notranslate"><span class="pre">foo*</span></code></p>
</dd>
<dt class="field-even">-!foo</dt>
<dd class="field-even"><p>Remove all names except for <code class="docutils literal notranslate"><span class="pre">foo</span></code></p>
</dd>
<dt class="field-odd">^foo: /bar/bin</dt>
<dd class="field-odd"><p>Treat <code class="docutils literal notranslate"><span class="pre">foo</span></code> like <code class="docutils literal notranslate"><span class="pre">PATH</span></code> and prepend <code class="docutils literal notranslate"><span class="pre">/bar/bin:$foo</span></code></p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.util.sensitive_bytes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.util.</span></span><span class="sig-name descname"><span class="pre">sensitive_bytes</span></span><a class="headerlink" href="#unfurl.util.sensitive_bytes" title="Permalink to this definition"></a></dt>
<dd><p>Transparent wrapper class to mark bytes as sensitive</p>
<dl class="py method">
<dt class="sig sig-object py" id="unfurl.util.sensitive_bytes.decode">
<span class="sig-name descname"><span class="pre">decode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.util.sensitive_bytes.decode" title="Permalink to this definition"></a></dt>
<dd><p>Wrapper method to ensure type conversions maintain sensitive context</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>List</em><em>[</em><em>object</em><em>]</em>) – </p></li>
<li><p><strong>kwargs</strong> (<em>collections.abc.Mapping</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#unfurl.util.sensitive_str" title="unfurl.util.sensitive_str">unfurl.util.sensitive_str</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.util.sensitive_dict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.util.</span></span><span class="sig-name descname"><span class="pre">sensitive_dict</span></span><a class="headerlink" href="#unfurl.util.sensitive_dict" title="Permalink to this definition"></a></dt>
<dd><p>Transparent wrapper class to mark a dict as sensitive</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.util.sensitive_list">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.util.</span></span><span class="sig-name descname"><span class="pre">sensitive_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.util.sensitive_list" title="Permalink to this definition"></a></dt>
<dd><p>Transparent wrapper class to mark a list as sensitive</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.util.sensitive_str">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.util.</span></span><span class="sig-name descname"><span class="pre">sensitive_str</span></span><a class="headerlink" href="#unfurl.util.sensitive_str" title="Permalink to this definition"></a></dt>
<dd><p>Transparent wrapper class to mark a str as sensitive</p>
<dl class="py method">
<dt class="sig sig-object py" id="unfurl.util.sensitive_str.encode">
<span class="sig-name descname"><span class="pre">encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.util.sensitive_str.encode" title="Permalink to this definition"></a></dt>
<dd><p>Wrapper method to ensure type conversions maintain sensitive context</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>List</em><em>[</em><em>object</em><em>]</em>) – </p></li>
<li><p><strong>kwargs</strong> (<em>collections.abc.Mapping</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#unfurl.util.sensitive_bytes" title="unfurl.util.sensitive_bytes">unfurl.util.sensitive_bytes</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<section id="module-unfurl.eval">
<span id="eval-expression-api"></span><h3><a class="toc-backref" href="#id22">Eval Expression API</a><a class="headerlink" href="#module-unfurl.eval" title="Permalink to this headline"></a></h3>
<p>API for evaluating <a class="reference internal" href="processing.html#eval-expressions"><span class="std std-ref">Eval Expressions</span></a>. See also <a class="reference internal" href="#unfurl.configurator.TaskView.query" title="unfurl.configurator.TaskView.query"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">unfurl.configurator.TaskView.query</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="unfurl.eval.Ref">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.eval.</span></span><span class="sig-name descname"><span class="pre">Ref</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.eval.Ref" title="Permalink to this definition"></a></dt>
<dd><p>A Ref objects describes a path to metadata associated with a resource.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exp</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>collections.abc.Mapping</em><em>]</em>) – </p></li>
<li><p><strong>vars</strong> (<em>Optional</em><em>[</em><em>dict</em><em>]</em>) – </p></li>
<li><p><strong>trace</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="unfurl.eval.Ref.is_ref">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_ref</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.eval.Ref.is_ref" title="Permalink to this definition"></a></dt>
<dd><p>Return true if the given value looks like a Ref.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>Union</em><em>[</em><em>collections.abc.Mapping</em><em>, </em><a class="reference internal" href="#unfurl.eval.Ref" title="unfurl.eval.Ref"><em>unfurl.eval.Ref</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.eval.Ref.resolve">
<span class="sig-name descname"><span class="pre">resolve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#unfurl.eval.RefContext" title="unfurl.eval.RefContext"><span class="pre">RefContext</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">wantList</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">True</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#unfurl.eval.Ref.resolve" title="Permalink to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">resolve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#unfurl.eval.RefContext" title="unfurl.eval.RefContext"><span class="pre">RefContext</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">wantList</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ResolveOneUnion</span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">resolve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#unfurl.eval.RefContext" title="unfurl.eval.RefContext"><span class="pre">RefContext</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">wantList</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'result'</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Result</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">resolve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#unfurl.eval.RefContext" title="unfurl.eval.RefContext"><span class="pre">RefContext</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">wantList</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'result'</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Result</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ResolveOneUnion</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Given an expression, returns a value, a list of values, or or list of Result, depending on <code class="docutils literal notranslate"><span class="pre">wantList</span></code>:</p>
<p>If wantList=True (default), return a list of matches.</p>
<p>Note that values in the list can be a list or None.</p>
<p>If wantList=False, return <a class="reference internal" href="#unfurl.eval.Ref.resolve_one" title="unfurl.eval.Ref.resolve_one"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">resolve_one</span></code></a> semantics.</p>
<p>If wantList=’result’, return a list of Result.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unfurl.eval.Ref.resolve_one">
<span class="sig-name descname"><span class="pre">resolve_one</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ctx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.eval.Ref.resolve_one" title="Permalink to this definition"></a></dt>
<dd><p>Given an expression, return a value, None or a list of values.</p>
<p>If there is no match, return None.</p>
<p>If there is more than one match, return a list of matches.</p>
<p>Otherwise return the match.</p>
<p>Note: If you want to distinguish between None values and no match
or between single match that is a list and a list of matches
use <a class="reference internal" href="#unfurl.eval.Ref.resolve" title="unfurl.eval.Ref.resolve"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">Ref.resolve</span></code></a>, which always returns a (possible empty) of matches</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ctx</strong> (<a class="reference internal" href="#unfurl.eval.RefContext" title="unfurl.eval.RefContext"><em>unfurl.eval.RefContext</em></a>) – </p></li>
<li><p><strong>strict</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><em>Union</em>[None, <em>Any</em>, <em>List</em>[<em>Any</em>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unfurl.eval.RefContext">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unfurl.eval.</span></span><span class="sig-name descname"><span class="pre">RefContext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">currentResource</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wantList</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolveExternal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.eval.RefContext" title="Permalink to this definition"></a></dt>
<dd><p>The context of the expression being evaluated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>currentResource</strong> (<em>ResourceRef</em>) – </p></li>
<li><p><strong>vars</strong> (<em>Optional</em><em>[</em><em>dict</em><em>]</em>) – </p></li>
<li><p><strong>wantList</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>bool</em><em>, </em><em>Literal</em><em>[</em><em>'result'</em><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>resolveExternal</strong> (<em>bool</em>) – </p></li>
<li><p><strong>trace</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em>) – </p></li>
<li><p><strong>strict</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – </p></li>
<li><p><strong>task</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#unfurl.configurator.TaskView" title="unfurl.configurator.TaskView"><em>TaskView</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="unfurl.eval.RefContext.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wantList</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tosca_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.eval.RefContext.copy" title="Permalink to this definition"></a></dt>
<dd><p>Create a copy of the current RefContext with optional modifications.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource</strong> (<em>Optional</em><em>[</em><em>ResourceRef</em><em>]</em>) – The resource reference to use for the copy. Defaults to None.</p></li>
<li><p><strong>vars</strong> (<em>Optional</em><em>[</em><em>dict</em><em>]</em>) – A dictionary of variables to update in the copy. Defaults to None.</p></li>
<li><p><strong>wantList</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>bool</em><em>, </em><em>Literal</em><em>[</em><em>&quot;result&quot;</em><em>]</em><em>]</em><em>]</em>) – Determines if a list is desired. Defaults to None.</p></li>
<li><p><strong>trace</strong> (<em>int</em>) – The trace level for the copy. Defaults to 0.</p></li>
<li><p><strong>strict</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – Whether to enforce strict mode. Defaults to None.</p></li>
<li><p><strong>tosca_type</strong> (<em>Optional</em><em>[</em><em>StatefulEntityType</em><em>]</em>) – The TOSCA type for the copy. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new instance of RefContext with the specified modifications.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#unfurl.eval.RefContext" title="unfurl.eval.RefContext">RefContext</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unfurl.eval.map_value">
<span class="sig-prename descclassname"><span class="pre">unfurl.eval.</span></span><span class="sig-name descname"><span class="pre">map_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resourceOrCxt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">applyTemplates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flatten</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unfurl.eval.map_value" title="Permalink to this definition"></a></dt>
<dd><p>Return a copy of the given string, dict, or list, resolving any expressions or template strings embedded in it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>Any</em>) – The value to be processed, which can be a string, dictionary, or list.</p></li>
<li><p><strong>resourceOrCxt</strong> (<em>Union</em><em>[</em><em>&quot;RefContext&quot;</em><em>, </em><em>&quot;ResourceRef&quot;</em><em>]</em>) – The context or resource instance used for resolving expressions.</p></li>
<li><p><strong>applyTemplates</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to evaluate Jinja2 templates embedded in strings. Defaults to True.</p></li>
<li><p><strong>as_list</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to return the result as a list. Defaults to False.</p></li>
<li><p><strong>flatten</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The processed value with resolved expressions or template strings. If <code class="docutils literal notranslate"><span class="pre">as_list</span></code> is True, the result is always a list.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-unfurl.graphql">
<span id="graphql-module"></span><h3><a class="toc-backref" href="#id23">Graphql module</a><a class="headerlink" href="#module-unfurl.graphql" title="Permalink to this headline"></a></h3>
<p>This module defines GraphQL representations of ensembles and Unfurl environments,
including simplified representations of TOSCA types and node templates as documented by the GraphQL schema below.</p>
<p>These objects are exported as JSON by the <a class="reference internal" href="cli.html#unfurl-export"><span class="std std-ref">export</span></a> command and by unfurl server API endpoints.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>type DeploymentTemplate {
  name: String!
  title: String!
  slug: String!
  description: String
  visibility: String
  metadata: JSON

  blueprint: ApplicationBlueprint!
  primary: ResourceTemplate!
  resourceTemplates: [ResourceTemplate!]
  cloud: ResourceType
  environmentVariableNames: [String!]
  source: String
  branch: String
  commitTime: String
}

type Deployment {
  title: String!
  primary: Resource
  resources: [Resource!]
  deploymentTemplate: DeploymentTemplate!
  url: url
  status: Status
  summary: String
  workflow: String
  deployTime: String
  packages: JSON
}

type ResourceType {
    name: String!
    title: String
    extends: [ResourceType!]
    description: String
    badge: String
    icon: String
    visibility: String
    details_url: String
    inputsSchema: JSON
    computedPropertiesSchema: JSON
    outputsSchema: JSON
    requirements: [RequirementConstraint!]
    implementations: [String]
    implementation_requirements: [String]
    directives: [String]
    metadata: JSON
    _sourceinfo: JSON
}

type RequirementConstraint {
    name: String!
    title: String
    description: String
    resourceType: ResourceType!
    match: ResourceTemplate
    min: Int
    max: Int
    badge: String
    visibility: String
    icon: String
    inputsSchema: Required[JSON]
    requirementsFilter: [RequirementConstraint!]
}

type ResourceTemplate {
    name: String!
    title: String
    type: ResourceType!
    visibility: String
    directives: [String!]
    imported: String
    metadata: JSON

    description: string

    # Maps to an object that conforms to type.inputsSchema
    properties: [Input!]

    dependencies: [Requirement!]
}

type Requirement {
  name: String!
  constraint: RequirementConstraint!
  match: ResourceTemplate
  target: Resource
  visibility: String
}

type Resource {
  name: String!
  title: String!
  url: String
  template: ResourceTemplate!
  status: Status
  state: State
  attributes: [Input!]
  computedProperties: [Input!]
  connections: [Requirement!]
  protected: Boolean
  imported: String
}

type DeploymentEnvironment {
    name: String!
    connections: [ResourceTemplate!]
    instances: [ResourceTemplate!]
    primary_provider: ResourceTemplate
    repositories: JSON!
}

type DeploymentPath {
  name: String!
  environment: String!
  project_id: String
  pipelines: [JSON!]
  incremental_deploy: boolean!
}

type ApplicationBlueprint {
  name: String!
  title: String
  description: String
  primary: ResourceType!
  primaryDeploymentBlueprint: String
  deploymentTemplates: [DeploymentTemplate!]
  projectPath: String
  blueprintPath: String

  livePreview: String
  sourceCodeUrl: String
  image: String
  projectIcon: String
}
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="glossary.html" class="btn btn-neutral float-left" title="Glossary" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="CHANGELOG.html" class="btn btn-neutral float-right" title="Changelog for Unfurl" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, OneCommons Co..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>