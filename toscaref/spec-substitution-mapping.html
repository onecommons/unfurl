<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Substitution Mappings &mdash; Unfurl Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon32.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/design-tabs.js"></script>
        <script src="../_static/custom.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Groups" href="spec-groups.html" />
    <link rel="prev" title="Relationship Templates" href="spec-relationship-templates.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/unfurl_logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../solution-overview.html">Solution Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects.html">Unfurl Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ensembles.html">Ensembles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs.html">Jobs and Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tosca.html">TOSCA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dsl.html">TOSCA as Python</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../toscaref.html">TOSCA Language Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="spec-tosca_def_version.html">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="spec-repositories.html">Repositories</a></li>
<li class="toctree-l2"><a class="reference internal" href="spec-imports.html">Imports</a></li>
<li class="toctree-l2"><a class="reference internal" href="spec-node-types.html">Node Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="spec-data-types.html">Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="spec-other-types.html">Other Types</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="spec-topology-template.html">Topology Templates</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="spec-inputs.html">Inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-outputs.html">Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-node-templates.html">Node Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-relationship-templates.html">Relationship Templates</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Substitution Mappings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#declaration">Declaration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="spec-groups.html">Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-policy.html">Policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-imperative-workflow.html">Workflows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extensions.html">Unfurl Specific</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toscadef.html">Type Definitions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../packages.html">Repositories and Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../secrets.html">Managing Secrets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runtime.html">Runtime Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configurators.html">Configurators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configurators.html#installers">Installers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configurators.html#id38">Artifacts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processing.html">Template Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../expressions.html">Expression Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloudmap.html">Cloud Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jsonschema.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Changelog for Unfurl</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Unfurl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../toscaref.html">TOSCA Language Reference</a></li>
          <li class="breadcrumb-item"><a href="spec-topology-template.html">Topology Template</a></li>
      <li class="breadcrumb-item active">Substitution Mappings</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/toscaref/spec-substitution-mapping.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="substitution-mappings">
<span id="id1"></span><h1>Substitution Mappings<a class="headerlink" href="#substitution-mappings" title="Permalink to this headline"></a></h1>
<p>TOSCA lets you replace a node template in one topology with another topology in its entirety.
To make a topology available for substitution, add a <code class="docutils literal notranslate"><span class="pre">substitution_mappings</span></code> section to the topology template.
To use this topology in another topology, declare a node template with a <code class="docutils literal notranslate"><span class="pre">substitute</span></code> directive and Unfurl will find a matching topology to replace the node template.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">substitution_mappings</span></code> section describes how to map the topology to the substituted node template’s type, properties, attributes, and requirements.
As a TOSCA extension, Unfurl adds a <code class="docutils literal notranslate"><span class="pre">node</span></code> key to point to a node template in that topology to be used to replace the substituted node template in the other topology.
This way, you don’t need to provide a full mapping.</p>
<p>In addition, <code class="docutils literal notranslate"><span class="pre">root</span></code> can be used as an alias for the <code class="docutils literal notranslate"><span class="pre">substitution_mappings</span></code> keyword.
This is also used by Unfurl to figure out which node templates to include in the plan for a deployment job.
If it is present, only node templates reachable from that root template will be included in the plan.
If it is not declared, all node templates in the topology will be included.</p>
<section id="declaration">
<h2>Declaration<a class="headerlink" href="#declaration" title="Permalink to this headline"></a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">substitution_mappings</span><span class="p">:</span><span class="w">  </span><span class="c1"># or root:</span>

<span class="w">   </span><span class="nt">node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;node_template_name&gt;</span><span class="w">  </span><span class="c1"># unfurl extension</span>

<span class="w">   </span><span class="nt">node_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;node_type_name&gt;</span>

<span class="w">   </span><span class="nt">substitution_filter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;node_filter&gt;</span>

<span class="w">   </span><span class="nt">properties</span><span class="p">:</span><span class="w">  </span><span class="c1"># mapping to map topology inputs to node template properties</span>

<span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">&lt;property_mappings&gt;</span>

<span class="w">   </span><span class="nt">attributes</span><span class="p">:</span><span class="w"> </span><span class="c1"># mappings to map topology outputs to node template attributes</span>

<span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">&lt;attribute_mappings&gt;</span>

<span class="w">   </span><span class="nt">requirements</span><span class="p">:</span>

<span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">&lt;requirement_mappings&gt;</span>

<span class="w">   </span><span class="nt">capabilities</span><span class="p">:</span><span class="w">   </span><span class="c1"># currently unsupported</span>

<span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">&lt;capability_mappings&gt;</span>

<span class="w">   </span><span class="nt">interfaces</span><span class="p">:</span><span class="w">    </span><span class="c1"># currently unsupported</span>

<span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">&lt;interface_mappings&gt;</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more information, refer to <a class="reference external" href="../_static/TOSCA-Simple-Profile-YAML-v1.3-os-toc.html#_Toc50125452">TOSCA Substitution Mapping Section</a></p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="spec-relationship-templates.html" class="btn btn-neutral float-left" title="Relationship Templates" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="spec-groups.html" class="btn btn-neutral float-right" title="Groups" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, OneCommons Co..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>